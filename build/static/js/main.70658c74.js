/*! For license information please see main.70658c74.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},176:function(e){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,s],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}return(0,a.default)(r)};var r,i=n(54),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},54:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,a,o){var s=i||"<<anonymous>>",u=o||r;if(null==n[r])return t?new Error("Required "+a+" `"+u+"` was not specified in `"+s+"`."):null;for(var c=arguments.length,l=Array(c>6?c-6:0),f=6;f<c;f++)l[f-6]=arguments[f];return e.apply(void 0,[n,r,s,a,u].concat(l))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,E=60107,I=60108,T=60114,S=60109,C=60110,N=60112,R=60113,A=60120,P=60115,D=60116,O=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;_=U("react.element"),x=U("react.portal"),E=U("react.fragment"),I=U("react.strict_mode"),T=U("react.profiler"),S=U("react.provider"),C=U("react.context"),N=U("react.forward_ref"),R=U("react.suspense"),A=U("react.suspense_list"),P=U("react.memo"),D=U("react.lazy"),O=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function z(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function H(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function K(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 22:return e=H(e.type._render,!1);case 1:return e=H(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case T:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case O:return G(e._render);case D:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ee(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Re(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Ae(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Re(e),t)for(e=0;e<t.length;e++)Re(t[e])}}function De(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=De,Fe=!1,je=!1;function Ue(){null===Ce&&null===Ne||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){qe=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ye){qe=!1}function ze(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,He=null,Ke=!1,Ge=null,Qe={onError:function(e){We=!0,He=e}};function Ye(e,t,n,r,i,a,o,s,u){We=!1,He=null,ze.apply(Qe,arguments)}function $e(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if($e(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=$e(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function yt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ni(e.target);if(null!==t){var n=$e(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Xe(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)mt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Et={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},It={},Tt={};function St(e){if(It[e])return It[e];if(!Et[e])return e;var t,n=Et[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return It[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete Et.animationend.animation,delete Et.animationiteration.animation,delete Et.animationstart.animation),"TransitionEvent"in window||delete Et.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),Rt=St("animationstart"),At=St("transitionend"),Pt=new Map,Dt=new Map,Ot=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",Rt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Dt.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function jt(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function Ut(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function Bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Ht(e)/Kt|0)|0},Ht=Math.log,Kt=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function $t(e,t,n,r){Fe||Le();var i=Jt,a=Fe;Fe=!0;try{Oe(i,e,t,n,r)}finally{(Fe=a)||Ue()}}function Xt(e,t,n,r){Qt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=yt(st,e,t,n,r,i),!0;case"dragenter":return ut=yt(ut,e,t,n,r,i),!0;case"mouseover":return ct=yt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,yt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,yt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=$e(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Xe(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),yn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),mn=un(yn),gn=un(i({},yn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),bn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=un(wn),xn=un(i({},hn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Rn=un(Nn),An=un(i({},yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Dn=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},yn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(On),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,jn=null;f&&"documentMode"in document&&(jn=document.documentMode);var Un=f&&"TextEvent"in window&&!jn,Vn=f&&(!Fn||jn&&8<jn&&11>=jn),qn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Kn[e.type]:"textarea"===t}function Qn(e,t,n,r){Ae(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,$n=null;function Xn(e){Nr(e,0)}function Jn(e){if(X(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),$n=Yn=null)}function ar(e){if("value"===e.propertyName&&Jn($n)){var t=[];if(Qn(t,$n,e,Te(e)),e=Xn,Fe)e(t);else{Fe=!0;try{De(e,t)}finally{Fe=!1,Ue()}}}}function or(e,t,n){"focusin"===e?(ir(),$n=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn($n)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function yr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Ot,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<Er.length;Ir++)Dt.set(Er[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=He;We=!1,He=null,Ke||(Ke=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(Ke)throw e=Ge,Ke=!1,Ge=null,e}function Rr(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Ar="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Ar]||(e[Ar]=!0,s.forEach((function(t){Sr.has(t)||Dr(t,!1,e,null),Dr(t,!0,e,null)})))}function Dr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Or(a,e,i,t),o.add(s))}function Or(e,t,n,r){var i=Dt.get(t);switch(void 0===i?2:i){case 0:i=$t;break;case 1:i=Xt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(je)return e(t,n);je=!0;try{Me(e,t,n)}finally{je=!1,Ue()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=Rn;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case Nt:case Rt:u=bn;break;case At:u=Dn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=$e(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=jr(d))p++;for(d=0,v=h;v;v=jr(v))d++;for(;0<p-d;)l=jr(l),p--;for(;0<d-p;)h=jr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=jr(l),h=jr(h)}l=null}else l=null;null!==u&&Ur(o,s,u,l,!1),null!==c&&null!==f&&Ur(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=Zn;else if(Gn(s))if(er)y=cr;else{y=sr;var m=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ur);switch(y&&(y=y(e,r))?Qn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ie(s,"number",s.value)),m=r?ii(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(kr=m,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Hn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Hn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Hn=!0)),0<(m=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=Un?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,qn);case"textInput":return(e=t.data)===qn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ur(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,Br=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Hr="function"===typeof setTimeout?setTimeout:void 0,Kr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var $r=0;var Xr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Xr,Zr="__reactProps$"+Xr,ei="__reactContainer$"+Xr,ti="__reactEvents$"+Xr;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function yi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ei=null,Ii=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ri=a.unstable_now,Ai=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Di=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},ji=void 0!==Ni?Ni:function(){},Ui=null,Vi=null,qi=!1,Bi=Ri(),zi=1e4>Bi?Ri:function(){return Ri()-Bi};function Wi(){switch(Ai()){case Pi:return 99;case Di:return 98;case Oi:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Hi(e){switch(e){case 99:return Pi;case 98:return Di;case 97:return Oi;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Ki(e,t){return e=Hi(e),Ii(e,t)}function Gi(e,t,n){return e=Hi(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==Ui){qi=!0;var e=0;try{var t=Ui;Ki(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Ui=null}catch(n){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ti(Pi,Qi),n}finally{qi=!1}}}var $i=w.ReactCurrentBatchConfig;function Xi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ya(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&$e(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=mi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?yi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=mi(t)?vi:di.current,i.context=yi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ya(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ea(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ku(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=$u(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=Xu(t,e.mode,n)).return=e,t}if(_a(t)||B(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ea(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===E?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||B(n))return null!==i?null:f(e,t,n,r,null);Ea(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===E?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||B(r))return f(t,e=e.get(n)||null,r,i,null);Ea(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,y=null;null!==f&&v<s.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,s[v],u);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(y=p(f,i,v,s[v],u))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),c}function y(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,y),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=a(g,s,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===E&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===E){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===E?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Xu(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=$u(a,e.mode,u)).return=e,e=r),s(e);if(_a(a))return v(e,r,a,u);if(B(a))return y(e,r,a,u);if(l&&Ea(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ia(!0),Sa=Ia(!1),Ca={},Na=ci(Ca),Ra=ci(Ca),Aa=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Da(e,t){switch(fi(Aa,t),fi(Ra,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Oa(){li(Na),li(Ra),li(Aa)}function La(e){Pa(Aa.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Ra,e),fi(Na,n))}function Ma(e){Ra.current===e&&(li(Na),li(Ra))}var Fa=ci(0);function ja(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ua=null,Va=null,qa=!1;function Ba(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=Va;if(t){var n=t;if(!za(e,t)){if(!(t=Qr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(Ua=e);Ba(Ua,n)}Ua=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,Ua=e}}function Ha(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ua=e}function Ka(e){if(e!==Ua)return!1;if(!qa)return Ha(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)Ba(e,t),t=Qr(t.nextSibling);if(Ha(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=Ua?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=Ua=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var $a=w.ReactCurrentDispatcher,Xa=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$a.current=null===e||null===e.memoizedState?Do:Oo,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,$a.current=Lo,e=n(r,i)}while(ro)}if($a.current=Po,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Ds;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=$a.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var y=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(y),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(y);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ao.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function yo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ao.bind(null,Za,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function bo(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void mo(t,n,a,r)}Za.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function _o(e,t){return bo(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Eo(e,t){return wo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Io.bind(null,t,e),n)}function So(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ro(e,t){var n=Wi();Ki(98>n?98:n,(function(){e(!0)})),Ki(97<n?97:n,(function(){var n=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=n}}))}function Ao(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ao.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:yo,useDebugValue:So,useDeferredValue:function(e){var t=yo(e),n=t[0],r=t[1];return _o((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=yo(!1),t=e[0];return go(e=Ro.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+($r++).toString(36))),Error(o(355))})),n=yo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,mo(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),t}return yo(t="r:"+($r++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Eo,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=Xa.transition;Xa.transition=1;try{r(e)}finally{Xa.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function jo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function Uo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Hu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Ku(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function Bo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return jo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=mi(n)?vi:di.current;return a=yi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,jo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ho(e,t,n,r,i){if(mi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=yi(t,c=mi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ba(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ya(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Xi(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=yi(t,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&ba(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ya(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ko(e,t,n,r,a,i)}function Ko(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):jo(e,t,s,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Da(e,t.containerInfo)}var Qo,Yo,$o,Xo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Xo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Xo,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Ku(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ku(o,s),null!==e?r=Ku(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(jo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ja(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ja(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ku(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ku(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&gi(),null;case 3:return Oa(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ka(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Aa.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ka(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Rr("cancel",r),Rr("close",r);break;case"iframe":case"object":case"embed":Rr("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Rr(Tr[e],r);break;case"source":Rr("error",r);break;case"img":case"image":case"link":Rr("error",r),Rr("load",r);break;case"details":Rr("toggle",r);break;case"input":ee(r,s),Rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rr("invalid",r);break;case"textarea":ue(r,s),Rr("invalid",r)}for(var c in Ee(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Rr("scroll",r));switch(n){case"input":$(r),re(r,s,!0);break;case"textarea":$(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ie(n,r),n){case"dialog":Rr("cancel",e),Rr("close",e),a=r;break;case"iframe":case"object":case"embed":Rr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Rr(Tr[a],e);a=r;break;case"source":Rr("error",e),a=r;break;case"img":case"image":case"link":Rr("error",e),Rr("load",e),a=r;break;case"details":Rr("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Rr("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Rr("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Rr("invalid",e);break;default:a=r}Ee(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?_e(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Rr("scroll",e):null!=f&&b(e,s,f,c))}switch(n){case"input":$(e),re(e,r,!1);break;case"textarea":$(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)$o(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Aa.current),Pa(Na.current),Ka(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ka(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===js&&(js=3):(0!==js&&3!==js||(js=4),null===Ds||0===(134217727&qs)&&0===(134217727&Bs)||gu(Ds,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==js||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=ja(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ks&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=ja(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ks&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Fa.current,fi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Oa(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ee(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Rr("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},$o=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$s||($s=!0,Xs=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ys(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Xi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ms(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Xi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Is(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Es(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Es(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Es(e,t,n),e=e.sibling;null!==e;)Es(e,t,n),e=e.sibling}function Is(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?me(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Hs=zi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,Rs=w.ReactCurrentDispatcher,As=w.ReactCurrentOwner,Ps=0,Ds=null,Os=null,Ls=0,Ms=0,Fs=ci(0),js=0,Us=null,Vs=0,qs=0,Bs=0,zs=0,Ws=null,Hs=0,Ks=1/0;function Gs(){Ks=zi()+500}var Qs,Ys=null,$s=!1,Xs=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ps)?zi():-1!==su?su:su=zi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=Vs),0!==$i.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Ps)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Ds&&(Bs|=t,4===js&&gu(e,Ls));var r=Wi();1===t?0!==(8&Ps)&&0===(48&Ps)?ku(e):(yu(e,n),0===Ps&&(Gs(),Qi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),yu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function yu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=jt(e,e===Ds?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ku.bind(null,e),null===Ui?(Ui=[n],Vi=Ti(Pi,Yi)):Ui.push(n),n=Fi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,mu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function mu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=jt(e,e===Ds?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Tu();for(Ds===e&&Ls===r||(Gs(),Eu(e,r));;)try{Nu();break}catch(u){Iu(e,u)}if(na(),Rs.current=a,Ps=i,null!==Os?r=0:(Ds=null,Ls=0,r=js),0!==(Vs&Bs))Eu(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=Ut(e))&&(r=Su(e,n))),1===r)throw t=Us,Eu(e,0),gu(e,n),yu(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Hs+500-zi())){if(0!==jt(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Hr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return yu(e,zi()),e.callbackNode===t?mu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Bs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ps))throw Error(o(327));if(Lu(),e===Ds&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(Vs&Bs)&&(n=Su(e,t=jt(e,t)))}else n=Su(e,t=jt(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=Ut(e))&&(n=Su(e,t))),1===n)throw n=Us,Eu(e,0),gu(e,t),yu(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),yu(e,zi()),null}function bu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function wu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function _u(e,t){fi(Fs,Ms),Ms|=t,Vs|=t}function xu(){Ms=Fs.current,li(Fs)}function Eu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Kr(n)),null!==Os)for(n=Os.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Oa(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Oa();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Ds=e,Os=Ku(e.current,null),Ls=Ms=Vs=t,js=0,Us=null,zs=Bs=qs=0}function Iu(e,t){for(;;){var n=Os;try{if(na(),$a.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,As.current=null,null===n||null===n.return){js=1,Us=t,Os=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var y=h.updateQueue;if(null===y){var m=new Set;m.add(c),h.updateQueue=m}else y.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=qu.bind(null,a,c,s);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==js&&(js=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var w=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Js||!Js.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Au(n)}catch(x){t=x,Os===n&&null!==n&&(Os=n=n.return);continue}break}}function Tu(){var e=Rs.current;return Rs.current=Po,null===e?Po:e}function Su(e,t){var n=Ps;Ps|=16;var r=Tu();for(Ds===e&&Ls===t||Eu(e,t);;)try{Cu();break}catch(i){Iu(e,i)}if(na(),Ps=n,Rs.current=r,null!==Os)throw Error(o(261));return Ds=null,Ls=0,js}function Cu(){for(;null!==Os;)Ru(Os)}function Nu(){for(;null!==Os&&!Ci();)Ru(Os)}function Ru(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Au(e):Os=t,As.current=null}function Au(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Os=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Os=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Os=t);Os=t=e}while(null!==t);0===js&&(js=5)}function Pu(e){var t=Wi();return Ki(99,Du.bind(null,e,t)),null}function Du(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Ds&&(Os=Ds=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,As.current=null,qr=Yt,mr(s=yr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,y=s,m=null;t:for(;;){for(var g;y!==u||0!==a&&3!==y.nodeType||(h=f+a),y!==c||0!==l&&3!==y.nodeType||(d=f+l),3===y.nodeType&&(f+=y.nodeValue.length),null!==(g=y.firstChild);)m=y,y=g;for(;;){if(y===s)break t;if(m===u&&++p===a&&(h=f),m===c&&++v===l&&(d=f),null!==(g=y.nextSibling))break;m=(y=m).parentNode}y=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Br={focusedElem:s,selectionRange:u},Yt=!1,lu=null,fu=!1,Ys=r;do{try{Ou()}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var b=Ys.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_s(Ys),Ys.flags&=-3;break;case 6:_s(Ys),Ys.flags&=-3,Ts(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ts(Ys.alternate,Ys);break;case 4:Ts(Ys.alternate,Ys);break;case 8:Is(s,u=Ys);var _=u.alternate;bs(u),null!==_&&bs(_)}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);if(w=Br,b=yr(),k=w.focusedElem,s=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&mr(k)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!w.extend&&_>s&&(u=s,s=_,_=u),u=pr(k,_),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!qr,Br=qr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&ms(k,Ys.alternate,Ys),128&x){b=void 0;var E=Ys.ref;if(null!==E){var I=Ys.stateNode;Ys.tag,b=I,"function"===typeof E?E(b):E.current=b}}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,ji(),Ps=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(yu(e,zi()),$s)throw $s=!1,e=Xs,Xs=null,e;return 0!==(8&Ps)||Qi(),null}function Ou(){for(;null!==Ys;){var e=Ys.alternate;fu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(fu=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,lu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ys(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ki(e,ju)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function ju(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Qi(),!0}function Uu(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(zt(e,1,t),yu(e,t))}function Vu(e,t){if(3===e.tag)Uu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Uu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))zt(n,1,i),yu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Ds===e&&(Ls&n)===n&&(4===js||3===js&&(62914560&Ls)===Ls&&500>zi()-Hs?Eu(e,0):zs|=n),yu(e,t)}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=Vs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(zt(e,t,n),yu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new zu(e,t,n,r)}function Hu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ku(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Hu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case I:s=8,i|=1;break;case T:return(e=Wu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case R:return(e=Wu(13,n,t,i)).type=R,e.elementType=R,e.lanes=a,e;case A:return(e=Wu(19,n,t,i)).elementType=A,e.lanes=a,e;case F:return Yu(n,i,a,t);case j:return(e=Wu(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case N:s=11;break e;case P:s=14;break e;case D:s=16,r=null;break e;case O:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function $u(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function Xu(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Bt(0),this.expirationTimes=Bt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if($e(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=bi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:mi(t.type)&&wi(t);break;case 4:Da(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,Bo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=yi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ya(t,r,s,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ko(null,t,r,!0,a,n)}else t.tag=0,jo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Hu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=Xi(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ho(null,t,i,e,n);break e;case 11:t=Uo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,Xi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ho(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),Ua=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else jo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),zo(e,t),jo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Jo(e,t,n);case 4:return Da(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):jo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Uo(e,t,r,i=t.elementType===r?i:Xi(r,i),n);case 7:return jo(e,t,t.pendingProps,n),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}jo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,jo(e,t,r,n),t.child;case 14:return a=Xi(i=t.type,t.pendingProps),Vo(e,t,i,a=Xi(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Xi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ko(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return Bo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));X(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},De=bu,Oe=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Ki(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Qi())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,yu(e,zi())}))}Qi()}(),Lu())},Me=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Ae,Pe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ei=fc}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Ki(99,e.bind(null,t))}finally{Ps=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function m(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=y.prototype;var k=g.prototype=new m;k.constructor=g,r(k,y.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(I,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var R={current:null};function A(){var e=R.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},t.Component=y,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return A().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,n){return A().useReducer(e,t,n)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(A){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return R()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var k={};u(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return m.prototype=g,u(_,"constructor",g),u(g,"constructor",m),m.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(E.prototype),u(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new E(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,y=null,m=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+g;try{y(!0,e)?w.postMessage(null):(v=!1,y=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){y=e,v||(v=!0,w.postMessage(null))},r=function(e,n){m=h((function(){e(t.unstable_now())}),n)},i=function(){d(m),m=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function E(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>I(o,n))void 0!==u&&0>I(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>I(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,R=3,A=!1,P=!1,D=!1;function O(e){for(var t=x(S);null!==t;){if(null===t.callback)E(S);else{if(!(t.startTime<=e))break;E(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(D=!1,O(e),!P)if(null!==x(T))P=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,D&&(D=!1,i()),A=!0;var a=R;try{for(O(n),N=x(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,R=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(T)&&E(T),O(n)}else E(T);N=x(T)}if(null!==N)var u=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,R=a,A=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||A||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return R},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(D?i():D=!0,r(L,o-s))):(e.sortIndex=u,_(T,e),P||A||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=R;return function(){var n=R;R=t;try{return e.apply(this,arguments)}finally{R=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return eo},SDK_VERSION:function(){return os},_DEFAULT_ENTRY_NAME:function(){return Go},_addComponent:function(){return Xo},_addOrOverwriteComponent:function(){return Jo},_apps:function(){return Yo},_clearComponents:function(){return ns},_components:function(){return $o},_getProvider:function(){return es},_registerComponent:function(){return Zo},_removeServiceInstance:function(){return ts},deleteApp:function(){return ls},getApp:function(){return us},getApps:function(){return cs},initializeApp:function(){return ss},onLog:function(){return ds},registerVersion:function(){return hs},setLogLevel:function(){return ps}});var t=n(791),r=n(164);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function u(e,t){if(null==e)return{};var n,r,i=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=n(694),l=n.n(c),f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},h=t.createContext(null);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}n(176);function p(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function v(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function y(e,n){return Object.keys(n).reduce((function(r,i){var a,o=r,u=o[p(i)],c=o[i],l=s(o,[p(i),i].map(v)),f=n[i],h=function(e,n,r){var i=(0,t.useRef)(void 0!==e),a=(0,t.useState)(n),o=a[0],s=a[1],u=void 0!==e,c=i.current;return i.current=u,!u&&c&&o!==n&&s(n),[u?e:o,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),s(e)}),[r])]}(c,u,e[f]),y=h[0],m=h[1];return d({},l,((a={})[i]=y,a[f]=m,a))}),e)}function m(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function g(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function k(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}m.__suppressDeprecationWarning=!0,g.__suppressDeprecationWarning=!0,k.__suppressDeprecationWarning=!0;var b=/-(.)/g;var w=n(184),_=["xxl","xl","lg","md","sm","xs"],x=t.createContext({prefixes:{},breakpoints:_});x.Consumer,x.Provider;function E(e,n){var r=(0,t.useContext)(x).prefixes;return e||r[n]||n}function I(){return(0,t.useContext)(x).breakpoints}var T=["className","bsPrefix","as"],S=function(e){return e[0].toUpperCase()+(t=e,t.replace(b,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function C(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.displayName,i=void 0===r?S(e):r,a=n.Component,s=n.defaultProps,c=t.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,s=t.as,c=void 0===s?a||"div":s,f=u(t,T),h=E(i,e);return(0,w.jsx)(c,o({ref:n,className:l()(r,h)},f))}));return c.defaultProps=s,c.displayName=i,c}var N=["bsPrefix","className","as"],R=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=u(e,N);n=E(n,"navbar-brand");var s=i||(a.href?"a":"span");return(0,w.jsx)(s,o(o({},a),{},{ref:t,className:l()(r,n)}))}));R.displayName="NavbarBrand";var A=R;function P(e){return e&&e.ownerDocument||document}function D(e,t){return function(e){var t=P(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var O=/([A-Z])/g;var L=/^ms-/;function M(e){return function(e){return e.replace(O,"-$1").toLowerCase()}(e).replace(L,"-ms-")}var F=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;var j=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(M(t))||D(e).getPropertyValue(M(t));Object.keys(t).forEach((function(i){var a=t[i];a||0===a?!function(e){return!(!e||!F.test(e))}(i)?n+=M(i)+": "+a+";":r+=i+"("+a+") ":e.style.removeProperty(M(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}var V=!1,q=t.createContext(null),B="unmounted",z="exited",W="entering",H="entered",K="exiting",G=function(e){var n,i;function a(t,n){var r;r=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(i=z,r.appearStatus=W):i=H:i=t.unmountOnExit||t.mountOnEnter?B:z,r.state={status:i},r.nextCallback=null,r}i=e,(n=a).prototype=Object.create(i.prototype),n.prototype.constructor=n,U(n,i),a.getDerivedStateFromProps=function(e,t){return e.in&&t.status===B?{status:z}:null};var o=a.prototype;return o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==W&&n!==H&&(t=W):n!==W&&n!==H||(t=K)}this.updateStatus(!1,t)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},o.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===W?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===z&&this.setState({status:B})},o.performEnter=function(e){var t=this,n=this.props.enter,i=this.context?this.context.isMounting:e,a=this.props.nodeRef?[i]:[r.findDOMNode(this),i],o=a[0],s=a[1],u=this.getTimeouts(),c=i?u.appear:u.enter;!e&&!n||V?this.safeSetState({status:H},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,s),this.safeSetState({status:W},(function(){t.props.onEntering(o,s),t.onTransitionEnd(c,(function(){t.safeSetState({status:H},(function(){t.props.onEntered(o,s)}))}))})))},o.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),i=this.props.nodeRef?void 0:r.findDOMNode(this);t&&!V?(this.props.onExit(i),this.safeSetState({status:K},(function(){e.props.onExiting(i),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:z},(function(){e.props.onExited(i)}))}))}))):this.safeSetState({status:z},(function(){e.props.onExited(i)}))},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},o.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:r.findDOMNode(this),i=null==e&&!this.props.addEndListener;if(n&&!i){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=a[0],s=a[1];this.props.addEndListener(o,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},o.render=function(){var e=this.state.status;if(e===B)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,s(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(q.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},a}(t.Component);function Q(){}G.contextType=q,G.propTypes={},G.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Q,onEntering:Q,onEntered:Q,onExit:Q,onExiting:Q,onExited:Q},G.UNMOUNTED=B,G.EXITED=z,G.ENTERING=W,G.ENTERED=H,G.EXITING=K;var Y=G,$=!("undefined"===typeof window||!window.document||!window.document.createElement),X=!1,J=!1;try{var Z={get passive(){return X=!0},get once(){return J=X=!0}};$&&(window.addEventListener("test",Z,Z),window.removeEventListener("test",Z,!0))}catch(bM){}var ee=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!J){var i=r.once,a=r.capture,o=n;!J&&i&&(o=n.__once||function e(r){this.removeEventListener(t,e,a),n.call(this,r)},n.__once=o),e.addEventListener(t,o,X?r:a)}e.addEventListener(t,n,r)};var te=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};var ne=function(e,t,n,r){return ee(e,t,n,r),function(){te(e,t,n,r)}};function re(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),a=ne(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),a()}}function ie(e,t,n,r){null==n&&(n=function(e){var t=j(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=re(e,n,r),a=ne(e,"transitionend",t);return function(){i(),a()}}function ae(e,t){var n=j(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function oe(e,t){var n=ae(e,"transitionDuration"),r=ae(e,"transitionDelay"),i=ie(e,(function(n){n.target===e&&(i(),t(n))}),n+r)}var se=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function ue(e){e.offsetHeight}var ce=function(e){return e&&"function"!==typeof e?function(t){e.current=t}:e};var le=function(e,n){return(0,t.useMemo)((function(){return function(e,t){var n=ce(e),r=ce(t);return function(e){n&&n(e),r&&r(e)}}(e,n)}),[e,n])};var fe,he=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children","childRef"],de=t.forwardRef((function(e,n){var i=e.onEnter,a=e.onEntering,s=e.onEntered,c=e.onExit,l=e.onExiting,f=e.onExited,h=e.addEndListener,d=e.children,p=e.childRef,v=u(e,he),y=(0,t.useRef)(null),m=le(y,p),g=function(e){var t;m((t=e)&&"setState"in t?r.findDOMNode(t):null!=t?t:null)},k=function(e){return function(t){e&&y.current&&e(y.current,t)}},b=(0,t.useCallback)(k(i),[i]),_=(0,t.useCallback)(k(a),[a]),x=(0,t.useCallback)(k(s),[s]),E=(0,t.useCallback)(k(c),[c]),I=(0,t.useCallback)(k(l),[l]),T=(0,t.useCallback)(k(f),[f]),S=(0,t.useCallback)(k(h),[h]);return(0,w.jsx)(Y,o(o({ref:n},v),{},{onEnter:b,onEntered:x,onEntering:_,onExit:E,onExited:T,onExiting:I,addEndListener:S,nodeRef:y,children:"function"===typeof d?function(e,t){return d(e,o(o({},t),{},{ref:g}))}:t.cloneElement(d,{ref:g})}))})),pe=de,ve=["onEnter","onEntering","onEntered","onExit","onExiting","className","children","dimension","getDimensionValue"],ye={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function me(e,t){var n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=ye[e];return n+parseInt(j(t,r[0]),10)+parseInt(j(t,r[1]),10)}var ge=(i(fe={},z,"collapse"),i(fe,K,"collapsing"),i(fe,W,"collapsing"),i(fe,H,"collapse show"),fe),ke={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,getDimensionValue:me},be=t.forwardRef((function(e,n){var r=e.onEnter,i=e.onEntering,a=e.onEntered,s=e.onExit,c=e.onExiting,f=e.className,h=e.children,d=e.dimension,p=void 0===d?"height":d,v=e.getDimensionValue,y=void 0===v?me:v,m=u(e,ve),g="function"===typeof p?p():p,k=(0,t.useMemo)((function(){return se((function(e){e.style[g]="0"}),r)}),[g,r]),b=(0,t.useMemo)((function(){return se((function(e){var t="scroll".concat(g[0].toUpperCase()).concat(g.slice(1));e.style[g]="".concat(e[t],"px")}),i)}),[g,i]),_=(0,t.useMemo)((function(){return se((function(e){e.style[g]=null}),a)}),[g,a]),x=(0,t.useMemo)((function(){return se((function(e){e.style[g]="".concat(y(g,e),"px"),ue(e)}),s)}),[s,y,g]),E=(0,t.useMemo)((function(){return se((function(e){e.style[g]=null}),c)}),[g,c]);return(0,w.jsx)(pe,o(o({ref:n,addEndListener:oe},m),{},{"aria-expanded":m.role?m.in:null,onEnter:k,onEntering:b,onEntered:_,onExit:x,onExiting:E,childRef:h.ref,children:function(e,n){return t.cloneElement(h,o(o({},n),{},{className:l()(f,h.props.className,ge[e],"width"===g&&"collapse-horizontal")}))}}))}));be.defaultProps=ke;var we=be,_e=t.createContext(null);_e.displayName="NavbarContext";var xe=_e,Ee=["children","bsPrefix"],Ie=t.forwardRef((function(e,n){var r=e.children,i=e.bsPrefix,a=u(e,Ee);i=E(i,"navbar-collapse");var s=(0,t.useContext)(xe);return(0,w.jsx)(we,o(o({in:!(!s||!s.expanded)},a),{},{children:(0,w.jsx)("div",{ref:n,className:i,children:r})}))}));Ie.displayName="NavbarCollapse";var Te=Ie;var Se=function(e){var n=(0,t.useRef)(e);return(0,t.useEffect)((function(){n.current=e}),[e]),n};function Ce(e){var n=Se(e);return(0,t.useCallback)((function(){return n.current&&n.current.apply(n,arguments)}),[n])}var Ne=["bsPrefix","className","children","label","as","onClick"],Re=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=e.label,c=e.as,f=void 0===c?"button":c,h=e.onClick,d=u(e,Ne);r=E(r,"navbar-toggler");var p=(0,t.useContext)(xe)||{},v=p.onToggle,y=p.expanded,m=Ce((function(e){h&&h(e),v&&v()}));return"button"===f&&(d.type="button"),(0,w.jsx)(f,o(o({},d),{},{ref:n,onClick:m,"aria-label":s,className:l()(i,r,!y&&"collapsed"),children:a||(0,w.jsx)("span",{className:"".concat(r,"-icon")})}))}));Re.displayName="NavbarToggle",Re.defaultProps={label:"Toggle navigation"};var Ae=Re;function Pe(e){if(Array.isArray(e))return e}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t){if(e){if("string"===typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function Le(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Me(e,t){return Pe(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||Oe(e,t)||Le()}function Fe(e){void 0===e&&(e=P());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(bM){return e.body}}function je(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Ue(e){var n=function(e){var n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((function(){return function(){return n.current()}}),[])}function Ve(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function qe(e){return function(e){if(Array.isArray(e))return De(e)}(e)||Ve(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function He(e){return"".concat("data-rr-ui-").concat(e)}var Ke=He("modal-open"),Ge=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.ownerDocument,r=t.handleContainerOverflow,i=void 0===r||r,a=t.isRTL,o=void 0!==a&&a;Be(this,e),this.handleContainerOverflow=i,this.isRTL=o,this.modals=[],this.ownerDocument=n}return We(e,[{key:"getScrollbarWidth",value:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}},{key:"getElement",value:function(){return(this.ownerDocument||document).body}},{key:"setModalAttributes",value:function(e){}},{key:"removeModalAttributes",value:function(e){}},{key:"setContainerStyle",value:function(e){var t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style=i({overflow:r.style.overflow},n,r.style[n]),e.scrollBarWidth&&(t[n]="".concat(parseInt(j(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Ke,""),j(r,t)}},{key:"reset",value:function(){var e=this;qe(this.modals).forEach((function(t){return e.remove(t)}))}},{key:"removeContainerStyle",value:function(e){var t=this.getElement();t.removeAttribute(Ke),Object.assign(t.style,e.style)}},{key:"add",value:function(e){var t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}(),Qe=Ge,Ye=(0,t.createContext)($?window:void 0);Ye.Provider;function $e(){return(0,t.useContext)(Ye)}var Xe=function(e,t){var n;return $?null==e?(t||P()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null):null};var Je,Ze=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function et(e){var n=$e(),r=e||function(e){return Je||(Je=new Qe({ownerDocument:null==e?void 0:e.document})),Je}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:function(){return r.add(i.current)},remove:function(){return r.remove(i.current)},isTopModal:function(){return r.isTopModal(i.current)},setDialogRef:(0,t.useCallback)((function(e){i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((function(e){i.current.backdrop=e}),[])})}var tt=(0,t.forwardRef)((function(e,n){var i=e.show,a=void 0!==i&&i,o=e.role,s=void 0===o?"dialog":o,u=e.className,c=e.style,l=e.children,f=e.backdrop,h=void 0===f||f,d=e.keyboard,p=void 0===d||d,v=e.onBackdropClick,y=e.onEscapeKeyDown,m=e.transition,g=e.backdropTransition,k=e.autoFocus,b=void 0===k||k,_=e.enforceFocus,x=void 0===_||_,E=e.restoreFocus,I=void 0===E||E,T=e.restoreFocusOptions,S=e.renderDialog,C=e.renderBackdrop,N=void 0===C?function(e){return(0,w.jsx)("div",Object.assign({},e))}:C,R=e.manager,A=e.container,P=e.onShow,D=e.onHide,O=void 0===D?function(){}:D,L=e.onExit,M=e.onExited,F=e.onExiting,j=e.onEnter,U=e.onEntering,V=e.onEntered,q=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Ze),B=function(e,n){var r=$e(),i=Me((0,t.useState)((function(){return Xe(e,null==r?void 0:r.document)})),2),a=i[0],o=i[1];if(!a){var s=Xe(e);s&&o(s)}return(0,t.useEffect)((function(){n&&a&&n(a)}),[n,a]),(0,t.useEffect)((function(){var t=Xe(e);t!==a&&o(t)}),[e,a]),a}(A),z=et(R),W=function(){var e=(0,t.useRef)(!0),n=(0,t.useRef)((function(){return e.current}));return(0,t.useEffect)((function(){return function(){e.current=!1}}),[]),n.current}(),H=function(e){var n=(0,t.useRef)(null);return(0,t.useEffect)((function(){n.current=e})),n.current}(a),K=Me((0,t.useState)(!a),2),G=K[0],Q=K[1],Y=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return z}),[z]),$&&!H&&a&&(Y.current=Fe()),m||a||G?a&&G&&Q(!1):Q(!0);var X=Ce((function(){if(z.add(),ie.current=ne(document,"keydown",te),re.current=ne(document,"focus",(function(){return setTimeout(Z)}),!0),P&&P(),b){var e=Fe(document);z.dialog&&e&&!je(z.dialog,e)&&(Y.current=e,z.dialog.focus())}})),J=Ce((function(){var e;(z.remove(),null==ie.current||ie.current(),null==re.current||re.current(),I)&&(null==(e=Y.current)||null==e.focus||e.focus(T),Y.current=null)}));(0,t.useEffect)((function(){a&&B&&X()}),[a,B,X]),(0,t.useEffect)((function(){G&&J()}),[G,J]),Ue((function(){J()}));var Z=Ce((function(){if(x&&W()&&z.isTopModal()){var e=Fe();z.dialog&&e&&!je(z.dialog,e)&&z.dialog.focus()}})),ee=Ce((function(e){e.target===e.currentTarget&&(null==v||v(e),!0===h&&O())})),te=Ce((function(e){p&&27===e.keyCode&&z.isTopModal()&&(null==y||y(e),e.defaultPrevented||O())})),re=(0,t.useRef)(),ie=(0,t.useRef)(),ae=m;if(!B||!(a||ae&&!G))return null;var oe=Object.assign({role:s,ref:z.setDialogRef,"aria-modal":"dialog"===s||void 0},q,{style:c,className:u,tabIndex:-1}),se=S?S(oe):(0,w.jsx)("div",Object.assign({},oe,{children:t.cloneElement(l,{role:"document"})}));ae&&(se=(0,w.jsx)(ae,{appear:!0,unmountOnExit:!0,in:!!a,onExit:L,onExiting:F,onExited:function(){Q(!0),null==M||M.apply(void 0,arguments)},onEnter:j,onEntering:U,onEntered:V,children:se}));var ue=null;if(h){var ce=g;ue=N({ref:z.setBackdropRef,onClick:ee}),ce&&(ue=(0,w.jsx)(ce,{appear:!0,in:!!a,children:ue}))}return(0,w.jsx)(w.Fragment,{children:r.createPortal((0,w.jsxs)(w.Fragment,{children:[ue,se]}),B)})}));tt.displayName="Modal";var nt,rt=Object.assign(tt,{Manager:Qe}),it=["className","children","transitionClasses"],at=(i(nt={},W,"show"),i(nt,H,"show"),nt),ot=t.forwardRef((function(e,n){var r=e.className,i=e.children,a=e.transitionClasses,s=void 0===a?{}:a,c=u(e,it),f=(0,t.useCallback)((function(e,t){ue(e),null==c.onEnter||c.onEnter(e,t)}),[c]);return(0,w.jsx)(pe,o(o({ref:n,addEndListener:oe},c),{},{onEnter:f,childRef:i.ref,children:function(e,n){return t.cloneElement(i,o(o({},n),{},{className:l()("fade",r,i.props.className,at[e],s[e])}))}}))}));ot.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ot.displayName="Fade";var st,ut=ot,ct=C("offcanvas-body"),lt=["bsPrefix","className","children"],ft=(i(st={},W,"show"),i(st,H,"show"),st),ht=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=u(e,lt);return r=E(r,"offcanvas"),(0,w.jsx)(pe,o(o({ref:n,addEndListener:oe},s),{},{childRef:a.ref,children:function(e,n){return t.cloneElement(a,o(o({},n),{},{className:l()(i,a.props.className,(e===W||e===K)&&"".concat(r,"-toggling"),ft[e])}))}}))}));ht.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1},ht.displayName="OffcanvasToggling";var dt=ht,pt=t.createContext({onHide:function(){}}),vt=n(7),yt=n.n(vt),mt=["className","variant"],gt={"aria-label":yt().string,onClick:yt().func,variant:yt().oneOf(["white"])},kt=t.forwardRef((function(e,t){var n=e.className,r=e.variant,i=u(e,mt);return(0,w.jsx)("button",o({ref:t,type:"button",className:l()("btn-close",r&&"btn-close-".concat(r),n)},i))}));kt.displayName="CloseButton",kt.propTypes=gt,kt.defaultProps={"aria-label":"Close"};var bt=kt,wt=["closeLabel","closeVariant","closeButton","onHide","children"],_t=t.forwardRef((function(e,n){var r=e.closeLabel,i=e.closeVariant,a=e.closeButton,s=e.onHide,c=e.children,l=u(e,wt),f=(0,t.useContext)(pt),h=Ce((function(){null==f||f.onHide(),null==s||s()}));return(0,w.jsxs)("div",o(o({ref:n},l),{},{children:[c,a&&(0,w.jsx)(bt,{"aria-label":r,variant:i,onClick:h})]}))}));_t.defaultProps={closeLabel:"Close",closeButton:!1};var xt=_t,Et=["bsPrefix","className"],It=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=u(e,Et);return n=E(n,"offcanvas-header"),(0,w.jsx)(xt,o(o({ref:t},i),{},{className:l()(r,n)}))}));It.displayName="OffcanvasHeader",It.defaultProps={closeLabel:"Close",closeButton:!1};var Tt=It,St=function(e){return t.forwardRef((function(t,n){return(0,w.jsx)("div",o(o({},t),{},{ref:n,className:l()(t.className,e)}))}))},Ct=C("offcanvas-title",{Component:St("h5")});function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Rt(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nt(e)););return e}function At(){return At="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=Rt(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},At.apply(this,arguments)}function Pt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}function Dt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(bM){return!1}}function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function Lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e,t){if(t&&("object"===Ot(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Lt(e)}function Ft(e){var t=Dt();return function(){var n,r=Nt(e);if(t){var i=Nt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Mt(this,n)}}var jt=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ut(e,t){return jt(e.querySelectorAll(t))}function Vt(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var qt,Bt=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",zt=".sticky-top",Wt=".navbar-toggler",Ht=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"adjustAndStore",value:function(e,t,n){var r=t.style[e];t.dataset[e]=r,j(t,i({},e,"".concat(parseFloat(j(t,e))+n,"px")))}},{key:"restore",value:function(e,t){var n=t.dataset[e];void 0!==n&&(delete t.dataset[e],j(t,i({},e,n)))}},{key:"setContainerStyle",value:function(e){var t=this;At(Nt(n.prototype),"setContainerStyle",this).call(this,e);var r,i,a=this.getElement();if(i="modal-open",(r=a).classList?r.classList.add(i):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,i)||("string"===typeof r.className?r.className=r.className+" "+i:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+i)),e.scrollBarWidth){var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Ut(a,Bt).forEach((function(n){return t.adjustAndStore(o,n,e.scrollBarWidth)})),Ut(a,zt).forEach((function(n){return t.adjustAndStore(s,n,-e.scrollBarWidth)})),Ut(a,Wt).forEach((function(n){return t.adjustAndStore(s,n,e.scrollBarWidth)}))}}},{key:"removeContainerStyle",value:function(e){var t=this;At(Nt(n.prototype),"removeContainerStyle",this).call(this,e);var r,i,a=this.getElement();i="modal-open",(r=a).classList?r.classList.remove(i):"string"===typeof r.className?r.className=Vt(r.className,i):r.setAttribute("class",Vt(r.className&&r.className.baseVal||"",i));var o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Ut(a,Bt).forEach((function(e){return t.restore(o,e)})),Ut(a,zt).forEach((function(e){return t.restore(s,e)})),Ut(a,Wt).forEach((function(e){return t.restore(s,e)}))}}]),n}(Qe);var Kt=Ht,Gt=["bsPrefix","className","children","aria-labelledby","placement","show","backdrop","keyboard","scroll","onEscapeKeyDown","onShow","onHide","container","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","onEntered","onExit","onExiting","onEnter","onEntering","onExited","backdropClassName","manager"];function Qt(e){return(0,w.jsx)(dt,o({},e))}function Yt(e){return(0,w.jsx)(ut,o({},e))}var $t=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.children,s=e["aria-labelledby"],c=e.placement,f=e.show,h=e.backdrop,d=e.keyboard,p=e.scroll,v=e.onEscapeKeyDown,y=e.onShow,m=e.onHide,g=e.container,k=e.autoFocus,b=e.enforceFocus,_=e.restoreFocus,x=e.restoreFocusOptions,I=e.onEntered,T=e.onExit,S=e.onExiting,C=e.onEnter,N=e.onEntering,R=e.onExited,A=e.backdropClassName,P=e.manager,D=u(e,Gt),O=(0,t.useRef)();r=E(r,"offcanvas");var L=((0,t.useContext)(xe)||{}).onToggle,M=Ce((function(){null==L||L(),null==m||m()})),F=(0,t.useMemo)((function(){return{onHide:M}}),[M]);var j=(0,t.useCallback)((function(e){return(0,w.jsx)("div",o(o({},e),{},{className:l()("".concat(r,"-backdrop"),A)}))}),[A,r]);return(0,w.jsx)(pt.Provider,{value:F,children:(0,w.jsx)(rt,{show:f,ref:n,backdrop:h,container:g,keyboard:d,autoFocus:k,enforceFocus:b&&!p,restoreFocus:_,restoreFocusOptions:x,onEscapeKeyDown:v,onShow:y,onHide:M,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C.apply(void 0,[e].concat(n))},onEntering:N,onEntered:I,onExit:T,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==R||R.apply(void 0,n)},manager:P||(p?(O.current||(O.current=new Kt({handleContainerOverflow:!1})),O.current):function(e){return qt||(qt=new Ht(e)),qt}()),transition:Qt,backdropTransition:Yt,renderBackdrop:j,renderDialog:function(e){return(0,w.jsx)("div",o(o(o({role:"dialog"},e),D),{},{className:l()(i,r,"".concat(r,"-").concat(c)),"aria-labelledby":s,children:a}))}})})}));$t.displayName="Offcanvas",$t.defaultProps={show:!1,backdrop:!0,keyboard:!0,scroll:!1,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,placement:"start"};var Xt=Object.assign($t,{Body:ct,Header:Tt,Title:Ct}),Jt=t.forwardRef((function(e,n){var r=(0,t.useContext)(xe);return(0,w.jsx)(Xt,o({ref:n,show:!(null==r||!r.expanded)},e))}));Jt.displayName="NavbarOffcanvas";var Zt=Jt,en=["bsPrefix","expand","variant","bg","fixed","sticky","className","as","expanded","onToggle","onSelect","collapseOnSelect"],tn=C("navbar-text",{Component:"span"}),nn=t.forwardRef((function(e,n){var r=y(e,{expanded:"onToggle"}),i=r.bsPrefix,a=r.expand,s=r.variant,c=r.bg,f=r.fixed,d=r.sticky,p=r.className,v=r.as,m=void 0===v?"nav":v,g=r.expanded,k=r.onToggle,b=r.onSelect,_=r.collapseOnSelect,x=u(r,en),I=E(i,"navbar"),T=(0,t.useCallback)((function(){null==b||b.apply(void 0,arguments),_&&g&&(null==k||k(!1))}),[b,_,g,k]);void 0===x.role&&"nav"!==m&&(x.role="navigation");var S="".concat(I,"-expand");"string"===typeof a&&(S="".concat(S,"-").concat(a));var C=(0,t.useMemo)((function(){return{onToggle:function(){return null==k?void 0:k(!g)},bsPrefix:I,expanded:!!g}}),[I,g,k]);return(0,w.jsx)(xe.Provider,{value:C,children:(0,w.jsx)(h.Provider,{value:T,children:(0,w.jsx)(m,o(o({ref:n},x),{},{className:l()(p,I,a&&S,s&&"".concat(I,"-").concat(s),c&&"bg-".concat(c),d&&"sticky-".concat(d),f&&"fixed-".concat(f))}))})})}));nn.defaultProps={expand:!0,variant:"light",collapseOnSelect:!1},nn.displayName="Navbar";var rn=Object.assign(nn,{Brand:A,Collapse:Te,Offcanvas:Zt,Text:tn,Toggle:Ae}),an=["bsPrefix","fluid","as","className"],on=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,a=void 0===i?"div":i,s=e.className,c=u(e,an),f=E(n,"container"),h="string"===typeof r?"-".concat(r):"-fluid";return(0,w.jsx)(a,o(o({ref:t},c),{},{className:l()(s,r?"".concat(f).concat(h):f)}))}));on.displayName="Container",on.defaultProps={fluid:!1};var sn=on;n(573);var un=t.createContext(null);un.displayName="NavContext";var cn=un,ln=t.createContext(null),fn=["as","disabled"];function hn(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.onClick,s=e.tabIndex,u=void 0===s?0:s,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var l={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},l];var f=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:f,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),f(e))}},l]}var dn=t.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,fn),a=Me(hn(Object.assign({tagName:n,disabled:r},i)),2),o=a[0],s=a[1].tagName;return(0,w.jsx)(s,Object.assign({},i,o,{ref:t}))}));dn.displayName="Button";var pn=dn,vn=["as","active","eventKey"];function yn(e){var n=e.key,r=e.onClick,i=e.active,a=e.id,o=e.role,s=e.disabled,u=(0,t.useContext)(h),c=(0,t.useContext)(cn),l=(0,t.useContext)(ln),f=i,d={role:o};if(c){o||"tablist"!==c.role||(d.role="tab");var p=c.getControllerId(null!=n?n:null),v=c.getControlledId(null!=n?n:null);d[He("event-key")]=n,d.id=p||a,!(f=null==i&&null!=n?c.activeKey===n:i)&&(null!=l&&l.unmountOnExit||null!=l&&l.mountOnEnter)||(d["aria-controls"]=v)}return"tab"===d.role&&(s&&(d.tabIndex=-1,d["aria-disabled"]=!0),f?d["aria-selected"]=f:d.tabIndex=-1),d.onClick=Ce((function(e){s||(null==r||r(e),null!=n&&u&&!e.isPropagationStopped()&&u(n,e))})),[d,{isActive:f}]}var mn=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?pn:n,i=e.active,a=e.eventKey,o=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,vn),s=Me(yn(Object.assign({key:f(a,o.href),active:i},o)),2),u=s[0],c=s[1];return u[He("active")]=c.isActive,(0,w.jsx)(r,Object.assign({},o,u,{ref:t}))}));mn.displayName="NavItem";var gn=mn,kn=["as","onSelect","activeKey","role","onKeyDown"];var bn=function(){},wn=He("event-key"),_n=t.forwardRef((function(e,n){var r,i,a=e.as,o=void 0===a?"div":a,s=e.onSelect,u=e.activeKey,c=e.role,l=e.onKeyDown,d=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,kn),p=(0,t.useReducer)((function(e){return!e}),!1)[1],v=(0,t.useRef)(!1),y=(0,t.useContext)(h),m=(0,t.useContext)(ln);m&&(c=c||"tablist",u=m.activeKey,r=m.getControlledId,i=m.getControllerId);var g=(0,t.useRef)(null),k=function(e){var t=g.current;if(!t)return null;var n=Ut(t,"[".concat(wn,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;var i=n.indexOf(r);if(-1===i)return null;var a=i+e;return a>=n.length&&(a=0),a<0&&(a=n.length-1),n[a]},b=function(e,t){null!=e&&(null==s||s(e,t),null==y||y(e,t))};(0,t.useEffect)((function(){if(g.current&&v.current){var e=g.current.querySelector("[".concat(wn,"][aria-selected=true]"));null==e||e.focus()}v.current=!1}));var _=le(n,g);return(0,w.jsx)(h.Provider,{value:b,children:(0,w.jsx)(cn.Provider,{value:{role:c,activeKey:f(u),getControlledId:r||bn,getControllerId:i||bn},children:(0,w.jsx)(o,Object.assign({},d,{onKeyDown:function(e){if(null==l||l(e),m){var t,n;switch(e.key){case"ArrowLeft":case"ArrowUp":t=k(-1);break;case"ArrowRight":case"ArrowDown":t=k(1);break;default:return}if(t)e.preventDefault(),b(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),v.current=!0,p()}},ref:_,role:c}))})})}));_n.displayName="Nav";var xn=Object.assign(_n,{Item:gn}),En=t.createContext(null);En.displayName="CardHeaderContext";var In=En,Tn=C("nav-item");var Sn="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product;"undefined"!==typeof document||Sn?t.useLayoutEffect:t.useEffect,new WeakMap;var Cn=["onKeyDown"];var Nn=t.forwardRef((function(e,t){var n,r=e.onKeyDown,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Cn),a=Me(hn(Object.assign({tagName:"a"},i)),1)[0],o=Ce((function(e){a.onKeyDown(e),null==r||r(e)}));return((n=i.href)&&"#"!==n.trim()||i.role)&&"button"!==i.role?(0,w.jsx)("a",Object.assign({ref:t},i,{onKeyDown:r})):(0,w.jsx)("a",Object.assign({ref:t},i,a,{onKeyDown:o}))}));Nn.displayName="Anchor";var Rn=Nn,An=["bsPrefix","className","as","active","eventKey"],Pn=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?Rn:i,s=e.active,c=e.eventKey,h=u(e,An);n=E(n,"nav-link");var d=Me(yn(o({key:f(c,h.href),active:s},h)),2),p=d[0],v=d[1];return(0,w.jsx)(a,o(o(o({},h),p),{},{ref:t,className:l()(r,n,h.disabled&&"disabled",v.isActive&&"active")}))}));Pn.displayName="NavLink",Pn.defaultProps={disabled:!1};var Dn=Pn,On=["as","bsPrefix","variant","fill","justify","navbar","navbarScroll","className","activeKey"],Ln=t.forwardRef((function(e,n){var r,a,s,c=y(e,{activeKey:"onSelect"}),f=c.as,h=void 0===f?"div":f,d=c.bsPrefix,p=c.variant,v=c.fill,m=c.justify,g=c.navbar,k=c.navbarScroll,b=c.className,_=c.activeKey,x=u(c,On),I=E(d,"nav"),T=!1,S=(0,t.useContext)(xe),C=(0,t.useContext)(In);return S?(a=S.bsPrefix,T=null==g||g):C&&(s=C.cardHeaderBsPrefix),(0,w.jsx)(xn,o({as:h,ref:n,activeKey:_,className:l()(b,(r={},i(r,I,!T),i(r,"".concat(a,"-nav"),T),i(r,"".concat(a,"-nav-scroll"),T&&k),i(r,"".concat(s,"-").concat(p),!!s),i(r,"".concat(I,"-").concat(p),!!p),i(r,"".concat(I,"-fill"),v),i(r,"".concat(I,"-justified"),m),r))},x))}));Ln.displayName="Nav",Ln.defaultProps={justify:!1,fill:!1};var Mn,Fn=Object.assign(Ln,{Item:Tn,Link:Dn});function jn(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(Mn||(Mn={}));var Un=function(e){return e};var Vn="beforeunload",qn="popstate";function Bn(e){e.preventDefault(),e.returnValue=""}function zn(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function Wn(){return Math.random().toString(36).substr(2,8)}function Hn(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function Kn(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Gn(e,t){if(!e)throw new Error(t)}var Qn=(0,t.createContext)(null);var Yn=(0,t.createContext)(null);var $n=(0,t.createContext)({outlet:null,matches:[]});function Xn(e){return function(e){var n=(0,t.useContext)($n).outlet;if(n)return(0,t.createElement)(ar.Provider,{value:e},n);return n}(e.context)}function Jn(e){Gn(!1)}function Zn(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,s=e.navigationType,u=void 0===s?Mn.Pop:s,c=e.navigator,l=e.static,f=void 0!==l&&l;nr()&&Gn(!1);var h=gr(r),d=(0,t.useMemo)((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=Kn(o));var p=o,v=p.pathname,y=void 0===v?"/":v,m=p.search,g=void 0===m?"":m,k=p.hash,b=void 0===k?"":k,w=p.state,_=void 0===w?null:w,x=p.key,E=void 0===x?"default":x,I=(0,t.useMemo)((function(){var e=yr(y,h);return null==e?null:{pathname:e,search:g,hash:b,state:_,key:E}}),[h,y,g,b,_,E]);return null==I?null:(0,t.createElement)(Qn.Provider,{value:d},(0,t.createElement)(Yn.Provider,{children:a,value:{location:I,navigationType:u}}))}function er(e){var n=e.children,r=e.location;return function(e,n){nr()||Gn(!1);var r=(0,t.useContext)($n).matches,i=r[r.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=rr();if(n){var c,l="string"===typeof n?Kn(n):n;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||Gn(!1),s=l}else s=u;var f=s.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=yr(("string"===typeof t?Kn(t):t).pathname||"/",n);if(null==r)return null;var i=ur(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=hr(i[o],r);return a}(e,{pathname:h});0;return dr(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:mr([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:mr([o,e.pathnameBase])})})),r)}(sr(n),r)}function tr(e){nr()||Gn(!1);var n=(0,t.useContext)(Qn),r=n.basename,i=n.navigator,a=or(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==r){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?Kn(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===s?r+(f?"/":""):mr([r,s])}return i.createHref({pathname:c,search:u,hash:o})}function nr(){return null!=(0,t.useContext)(Yn)}function rr(){return nr()||Gn(!1),(0,t.useContext)(Yn).location}function ir(){nr()||Gn(!1);var e=(0,t.useContext)(Qn),n=e.basename,r=e.navigator,i=(0,t.useContext)($n).matches,a=rr().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,t.useRef)(!1);(0,t.useEffect)((function(){s.current=!0}));var u=(0,t.useCallback)((function(e,t){if(void 0===t&&(t={}),s.current)if("number"!==typeof e){var i=vr(e,JSON.parse(o),a);"/"!==n&&(i.pathname=mr([n,i.pathname])),(t.replace?r.replace:r.push)(i,t.state)}else r.go(e)}),[n,r,o,a]);return u}var ar=(0,t.createContext)(null);function or(e){var n=(0,t.useContext)($n).matches,r=rr().pathname,i=JSON.stringify(n.map((function(e){return e.pathnameBase})));return(0,t.useMemo)((function(){return vr(e,JSON.parse(i),r)}),[e,i,r])}function sr(e){var n=[];return t.Children.forEach(e,(function(e){if((0,t.isValidElement)(e))if(e.type!==t.Fragment){e.type!==Jn&&Gn(!1);var r={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(r.children=sr(e.props.children)),n.push(r)}else n.push.apply(n,sr(e.props.children))})),n}function ur(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||Gn(!1),a.relativePath=a.relativePath.slice(r.length));var o=mr([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&Gn(!1),ur(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:fr(o,e.index),routesMeta:s})})),t}var cr=/^:\w+$/,lr=function(e){return"*"===e};function fr(e,t){var n=e.split("/"),r=n.length;return n.some(lr)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!lr(e)})).reduce((function(e,t){return e+(cr.test(t)?3:""===t?1:10)}),r)}function hr(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=pr({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:mr([i,l.pathname]),pathnameBase:gr(mr([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=mr([i,l.pathnameBase]))}return a}function dr(e,n){return void 0===n&&(n=[]),null==e?null:e.reduceRight((function(r,i,a){return(0,t.createElement)($n.Provider,{children:void 0!==i.route.element?i.route.element:r,value:{outlet:r,matches:n.concat(e.slice(0,a+1))}})}),null)}function pr(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=Me(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var s=o[0],u=s.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(DA){return e}}(c[n]||""),e}),{}),pathname:s,pathnameBase:u,pattern:e}}function vr(e,t,n){var r,i="string"===typeof e?Kn(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?Kn(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:kr(a),hash:br(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function yr(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var mr=function(e){return e.join("/").replace(/\/\/+/g,"/")},gr=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},kr=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},br=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function wr(){return wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wr.apply(this,arguments)}function _r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var xr=["onClick","reloadDocument","replace","state","target","to"],Er=["aria-current","caseSensitive","className","end","style","to","children"];function Ir(e){var n=e.basename,r=e.children,i=e.window,a=(0,t.useRef)();null==a.current&&(a.current=function(e){void 0===e&&(e={});var t=e.window,n=void 0===t?document.defaultView:t,r=n.history;function i(){var e=n.location,t=e.pathname,i=e.search,a=e.hash,o=r.state||{};return[o.idx,Un({pathname:t,search:i,hash:a,state:o.usr||null,key:o.key||"default"})]}var a=null;n.addEventListener(qn,(function(){if(a)f.call(a),a=null;else{var e=Mn.Pop,t=i(),n=t[0],r=t[1];if(f.length){if(null!=n){var o=u-n;o&&(a={action:e,location:r,retry:function(){g(-1*o)}},g(o))}}else m(e)}}));var o=Mn.Pop,s=i(),u=s[0],c=s[1],l=zn(),f=zn();function h(e){return"string"===typeof e?e:Hn(e)}function p(e,t){return void 0===t&&(t=null),Un(d({pathname:c.pathname,hash:"",search:""},"string"===typeof e?Kn(e):e,{state:t,key:Wn()}))}function v(e,t){return[{usr:e.state,key:e.key,idx:t},h(e)]}function y(e,t,n){return!f.length||(f.call({action:e,location:t,retry:n}),!1)}function m(e){o=e;var t=i();u=t[0],c=t[1],l.call({action:o,location:c})}function g(e){r.go(e)}null==u&&(u=0,r.replaceState(d({},r.state,{idx:u}),""));var k={get action(){return o},get location(){return c},createHref:h,push:function e(t,i){var a=Mn.Push,o=p(t,i);if(y(a,o,(function(){e(t,i)}))){var s=v(o,u+1),c=s[0],l=s[1];try{r.pushState(c,"",l)}catch(DA){n.location.assign(l)}m(a)}},replace:function e(t,n){var i=Mn.Replace,a=p(t,n);if(y(i,a,(function(){e(t,n)}))){var o=v(a,u),s=o[0],c=o[1];r.replaceState(s,"",c),m(i)}},go:g,back:function(){g(-1)},forward:function(){g(1)},listen:function(e){return l.push(e)},block:function(e){var t=f.push(e);return 1===f.length&&n.addEventListener(Vn,Bn),function(){t(),f.length||n.removeEventListener(Vn,Bn)}}};return k}({window:i}));var o=a.current,s=Me((0,t.useState)({action:o.action,location:o.location}),2),u=s[0],c=s[1];return(0,t.useLayoutEffect)((function(){return o.listen(c)}),[o]),(0,t.createElement)(Zn,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:o})}var Tr=(0,t.forwardRef)((function(e,n){var r=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=_r(e,xr),f=tr(c),h=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=ir(),u=rr(),c=or(e);return(0,t.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||Hn(u)===Hn(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,t.createElement)("a",wr({},l,{href:f,onClick:function(e){r&&r(e),e.defaultPrevented||i||h(e)},ref:n,target:u}))}));var Sr=(0,t.forwardRef)((function(e,n){var r=e["aria-current"],i=void 0===r?"page":r,a=e.caseSensitive,o=void 0!==a&&a,s=e.className,u=void 0===s?"":s,c=e.end,l=void 0!==c&&c,f=e.style,h=e.to,d=e.children,p=_r(e,Er),v=rr(),y=or(h),m=v.pathname,g=y.pathname;o||(m=m.toLowerCase(),g=g.toLowerCase());var k,b=m===g||!l&&m.startsWith(g)&&"/"===m.charAt(g.length),w=b?i:void 0;k="function"===typeof u?u({isActive:b}):[u,b?"active":null].filter(Boolean).join(" ");var _="function"===typeof f?f({isActive:b}):f;return(0,t.createElement)(Tr,wr({},p,{"aria-current":w,className:k,ref:n,style:_,to:h}),"function"===typeof d?d({isActive:b}):d)}));function Cr(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((function(t,n){var r=e[n];return t.concat(Array.isArray(r)?r.map((function(e){return[n,e]})):[[n,r]])}),[]))}var Nr=["bsPrefix","className","as"],Rr=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"div":i,s=u(e,Nr),c=E(n,"row"),f=I(),h="".concat(c,"-cols"),d=[];return f.forEach((function(e){var t,n=s[e];delete s[e],t=null!=n&&"object"===typeof n?n.cols:n;var r="xs"!==e?"-".concat(e):"";null!=t&&d.push("".concat(h).concat(r,"-").concat(t))})),(0,w.jsx)(a,o(o({ref:t},s),{},{className:l().apply(void 0,[r,c].concat(d))}))}));Rr.displayName="Row";var Ar=Rr,Pr=["as","bsPrefix","className"],Dr=["className"];var Or=t.forwardRef((function(e,t){var n=function(e){var t=e.as,n=e.bsPrefix,r=e.className,i=u(e,Pr);n=E(n,"col");var a=I(),s=[],c=[];return a.forEach((function(e){var t,r,a,o=i[e];delete i[e],"object"===typeof o&&null!=o?(t=o.span,r=o.offset,a=o.order):t=o;var u="xs"!==e?"-".concat(e):"";t&&s.push(!0===t?"".concat(n).concat(u):"".concat(n).concat(u,"-").concat(t)),null!=a&&c.push("order".concat(u,"-").concat(a)),null!=r&&c.push("offset".concat(u,"-").concat(r))})),[o(o({},i),{},{className:l().apply(void 0,[r].concat(s,c))}),{as:t,bsPrefix:n,spans:s}]}(e),r=Me(n,2),i=r[0],a=i.className,s=u(i,Dr),c=r[1],f=c.as,h=void 0===f?"div":f,d=c.bsPrefix,p=c.spans;return(0,w.jsx)(h,o(o({},s),{},{ref:t,className:l()(a,!p.length&&d)}))}));Or.displayName="Col";var Lr=Or,Mr=function(){return(0,w.jsxs)("section",{className:"cAbout p-5 transition",children:[(0,w.jsx)("h1",{className:"text-center",children:"Whazzah"}),(0,w.jsx)(sn,{fluid:!0,children:(0,w.jsxs)(Ar,{className:"g-2 justify-content-center pb-5",children:[(0,w.jsx)(Lr,{sm:"12",md:"5",children:(0,w.jsx)("img",{src:"/images/author.jpg",className:"author-image w-100 border"})}),(0,w.jsxs)(Lr,{sm:"12",md:"7",className:"d-flex flex-column justify-content-md-center border",children:[(0,w.jsx)("p",{className:"p-1 p-md-2",children:"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Dolorem expedita quae officiis ut dignissimos iure mollitia molestiae placeat rerum fuga, neque recusandae eveniet laudantium! Dolore eaque eius animi quod nostrum."}),(0,w.jsxs)("p",{className:"p-1 p-md-2",children:["Ullam esse suscipit laudantium quas consequatur deserunt blanditiis. Id cupiditate temporibus eius iste, harum repellendus tempora est sit eum veniam modi repellat, labore ab illum perspiciatis, doloremque facere voluptas consequuntur. Facere, cumque. Aut dolor exercitationem doloribus rerum ullam? Odio ex eaque asperiores ipsam harum, dolor iste? Dolorem assumenda voluptates, quasi dolores sequi maxime adipisci dolorum tempore labore? Dolorem, at enim.",(0,w.jsx)("br",{}),"Expedita illo a nemo quam obcaecati repudiandae, itaque ut veniam, enim aperiam unde iure fugiat molestiae maxime quae! Consectetur placeat sequi doloremque est vel ipsam sit perferendis? Omnis, odit enim!",(0,w.jsx)("br",{}),"Est, praesentium iste! Eligendi earum recusandae deserunt voluptatem quos facere autem expedita iure aliquid, cupiditate cum aliquam atque error. Est neque vero corrupti veniam animi voluptatem in doloribus assumenda rem.",(0,w.jsx)("br",{}),"Inventore explicabo facere nulla repellendus dicta in repudiandae sunt tenetur veniam maiores, ex quo nisi, excepturi a quia voluptates praesentium. Corporis aperiam quia impedit facilis quas! Earum nam libero harum."]})]})]})})]})},Fr=function(){return(0,w.jsx)("section",{children:(0,w.jsx)(Mr,{})})};function jr(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(DA){return void n(DA)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ur(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){jr(a,r,i,o,s,"next",e)}function s(e){jr(a,r,i,o,s,"throw",e)}o(void 0)}))}}function Vr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var qr=0;function Br(e){return"__private_"+qr+++"_"+e}var zr=n(757),Wr=n.n(zr),Hr=Br("articles"),Kr=function(){function e(){Be(this,e),Object.defineProperty(this,Hr,{writable:!0,value:void 0}),this.href="https://jsonplaceholder.typicode.com/posts"}return We(e,[{key:"articles",get:function(){}},{key:"isLoaded",value:function(){return!!Vr(this,Hr)[Hr]}},{key:"getById",value:function(e){var t;return null===(t=Vr(this,Hr)[Hr])||void 0===t?void 0:t.find((function(t){return t.id===e}))}},{key:"getAll",value:function(){return Vr(this,Hr)[Hr]}},{key:"load",value:function(){var e=Ur(Wr().mark((function e(){var t,n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Vr(this,Hr)[Hr]){e.next=8;break}return e.next=3,fetch(this.href);case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,Vr(this,Hr)[Hr]=n;case 8:return e.next=10,Vr(this,Hr)[Hr];case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAll();case 2:if(n=e.sent,t){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,n.filter((function(e){return!!e.name.toLowerCase().match(t)||null}))[0];case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Gr=function(){var e=parseInt(function(){var e=(0,t.useContext)($n).matches,n=e[e.length-1];return n?n.params:{}}().slug),n=Me((0,t.useState)(new Kr),2),r=n[0],i=(n[1],Me((0,t.useState)({}),2)),a=i[0],o=i[1],s=ir();return(0,t.useEffect)((function(){r.isLoaded()&&a.id===e||r.load().then((function(){return o(r.getById(e))}))}),[a,e]),(0,w.jsxs)("section",{className:"list",children:[(0,w.jsxs)("small",{className:"text-muted",children:[(0,w.jsx)(Tr,{className:"text-decoration-none",to:mM("home"),children:"Home"})," <",(0,w.jsx)(Tr,{className:"text-decoration-none",to:mM("articles"),onClick:function(){return s(-1)},children:"Articles"})," < article"]}),(0,w.jsxs)("div",{className:"text-center border p-5 m-5",children:[(0,w.jsx)("h1",{className:"h1 ",style:{textTransform:"uppercase"},children:a.title}),(0,w.jsx)("p",{className:"text",children:a.body})]})]})},Qr=["bsPrefix","show","closeLabel","closeVariant","className","children","variant","onClose","dismissible","transition"],Yr=St("h4");Yr.displayName="DivStyledAsH4";var $r=C("alert-heading",{Component:Yr}),Xr=C("alert-link",{Component:Rn}),Jr={variant:"primary",show:!0,transition:ut,closeLabel:"Close alert"},Zr=t.forwardRef((function(e,t){var n=y(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,a=n.closeLabel,s=n.closeVariant,c=n.className,f=n.children,h=n.variant,d=n.onClose,p=n.dismissible,v=n.transition,m=u(n,Qr),g=E(r,"alert"),k=Ce((function(e){d&&d(!1,e)})),b=!0===v?ut:v,_=(0,w.jsxs)("div",o(o({role:"alert"},b?void 0:m),{},{ref:t,className:l()(c,g,h&&"".concat(g,"-").concat(h),p&&"".concat(g,"-dismissible")),children:[p&&(0,w.jsx)(bt,{onClick:k,"aria-label":a,variant:s}),f]}));return b?(0,w.jsx)(b,o(o({unmountOnExit:!0},m),{},{ref:void 0,in:i,children:_})):i?_:null}));Zr.displayName="Alert",Zr.defaultProps=Jr;var ei=Object.assign(Zr,{Link:Xr,Heading:$r}),ti=["bsPrefix","className","variant","as"],ni=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.variant,a=e.as,s=void 0===a?"img":a,c=u(e,ti),f=E(n,"card-img");return(0,w.jsx)(s,o({ref:t,className:l()(i?"".concat(f,"-").concat(i):f,r)},c))}));ni.displayName="CardImg";var ri=ni,ii=["bsPrefix","className","as"],ai=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.as,s=void 0===a?"div":a,c=u(e,ii),f=E(r,"card-header"),h=(0,t.useMemo)((function(){return{cardHeaderBsPrefix:f}}),[f]);return(0,w.jsx)(In.Provider,{value:h,children:(0,w.jsx)(s,o(o({ref:n},c),{},{className:l()(i,f)}))})}));ai.displayName="CardHeader";var oi=ai,si=["bsPrefix","className","bg","text","border","body","children","as"],ui=St("h5"),ci=St("h6"),li=C("card-body"),fi=C("card-title",{Component:ui}),hi=C("card-subtitle",{Component:ci}),di=C("card-link",{Component:"a"}),pi=C("card-text",{Component:"p"}),vi=C("card-footer"),yi=C("card-img-overlay"),mi=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.bg,a=e.text,s=e.border,c=e.body,f=e.children,h=e.as,d=void 0===h?"div":h,p=u(e,si),v=E(n,"card");return(0,w.jsx)(d,o(o({ref:t},p),{},{className:l()(r,v,i&&"bg-".concat(i),a&&"text-".concat(a),s&&"border-".concat(s)),children:c?(0,w.jsx)(li,{children:f}):f}))}));mi.displayName="Card",mi.defaultProps={body:!1};var gi=Object.assign(mi,{Img:ri,Title:fi,Subtitle:hi,Body:li,Link:di,Text:pi,Header:oi,Footer:vi,ImgOverlay:yi}),ki=["as","bsPrefix","variant","size","active","className"],bi=t.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,a=e.size,s=e.active,c=e.className,f=u(e,ki),h=E(r,"btn"),d=Me(hn(o({tagName:n},f)),2),p=d[0],v=d[1].tagName;return(0,w.jsx)(v,o(o(o({},p),f),{},{ref:t,className:l()(c,h,s&&"active",i&&"".concat(h,"-").concat(i),a&&"".concat(h,"-").concat(a),f.href&&f.disabled&&"disabled")}))}));bi.displayName="Button",bi.defaultProps={variant:"primary",active:!1,disabled:!1};var wi=bi,_i=function(e){var t,n=e.cors,r=(n.t,n.b,n.title),i=n.body;return(0,w.jsx)("article",{className:"shadow article",style:{height:"100%",maxHeight:"50vh"},children:(0,w.jsx)(gi,{style:{height:"100%",position:"relative"},children:(0,w.jsxs)(Tr,{tabIndex:"-1",className:"text-decoration-none",to:mM("articles")+"/".concat(n.id,"-").concat(null===n||void 0===n||null===(t=n.title)||void 0===t?void 0:t.match(/^\w+\s\w+\s\w*/)[0].replace(/\s/g,"-")),children:[(0,w.jsxs)(gi.Body,{children:[(0,w.jsx)(gi.Title,{children:r}),(0,w.jsx)(gi.Text,{children:i.substr(0,18)+"..."})]}),(0,w.jsx)("div",{className:"position-absolute d-flex align-items-end justify-content-end p-2",style:{bottom:0,left:0,right:0,height:"40%",background:"linear-gradient(transparent, rgb(255, 255, 255) 60%)"},children:(0,w.jsxs)(wi,{variant:"outline-primary",className:"btn-hover",children:["Read more ",(0,w.jsx)("i",{className:"bi bi-chevron-right"})]})})]})})})},xi=function(e){var t=e.loaded,n=e.className,r=void 0===n?"text-dark":n,i=e.scale,a={transform:"scale(".concat(void 0===i?1:i,")")};return(0,w.jsx)("div",{className:["spinner","text-center",t&&"d-none"].join(" "),style:a,children:(0,w.jsx)("div",{className:["spinner-border",r].join(" "),role:"status",children:(0,w.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})},Ei=["active","disabled","className","style","activeLabel","children"],Ii=["children"],Ti=t.forwardRef((function(e,t){var n=e.active,r=e.disabled,i=e.className,a=e.style,s=e.activeLabel,c=e.children,f=u(e,Ei),h=n||r?"span":Rn;return(0,w.jsx)("li",{ref:t,style:a,className:l()(i,"page-item",{active:n,disabled:r}),children:(0,w.jsxs)(h,o(o({className:"page-link",disabled:r},f),{},{children:[c,n&&s&&(0,w.jsx)("span",{className:"visually-hidden",children:s})]}))})}));Ti.defaultProps={active:!1,disabled:!1,activeLabel:"(current)"},Ti.displayName="PageItem";var Si=Ti;function Ci(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;function r(e){var r=e.children,i=u(e,Ii);return(0,w.jsxs)(Ti,o(o({},i),{},{children:[(0,w.jsx)("span",{"aria-hidden":"true",children:r||t}),(0,w.jsx)("span",{className:"visually-hidden",children:n})]}))}return r.displayName=e,r}var Ni=Ci("First","\xab"),Ri=Ci("Prev","\u2039","Previous"),Ai=Ci("Ellipsis","\u2026","More"),Pi=Ci("Next","\u203a"),Di=Ci("Last","\xbb"),Oi=["bsPrefix","className","size"],Li=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.size,a=u(e,Oi),s=E(n,"pagination");return(0,w.jsx)("ul",o(o({ref:t},a),{},{className:l()(r,s,i&&"".concat(s,"-").concat(i))}))}));Li.displayName="Pagination";var Mi=Object.assign(Li,{First:Ni,Prev:Ri,Ellipsis:Ai,Item:Si,Next:Pi,Last:Di}),Fi=function(e){var t=e.pageCount,n=e.currentPage,r=e.onClick,i=e.displayNone;var a=function(e){return(parseInt(n)+e).toString()},o=t.toString();return(0,w.jsxs)(Mi,{onClick:function(e){e.preventDefault();var t=e.nativeEvent.path.find((function(e){return"A"===e.tagName}));t&&r(t.getAttribute("href"))},className:["justify-content-center",i&&"d-none"].join(" "),children:[(0,w.jsx)(Mi.First,{href:"1",disabled:1===n}),(0,w.jsx)(Mi.Prev,{href:a(-1),disabled:1===n}),n>4&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Mi.Item,{href:"1",children:"1"}),(0,w.jsx)(Mi.Item,{disabled:!0,children:"..."})]}),n>1&&(0,w.jsx)(Mi.Item,{href:a(-1),children:a(-1)}),(0,w.jsx)(Mi.Item,{href:n,active:!0,children:n}),n<t&&(0,w.jsx)(Mi.Item,{href:a(1),children:a(1)}),n<t-4&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(Mi.Item,{disabled:!0,children:"..."}),(0,w.jsx)(Mi.Item,{href:o,disabled:n===t,children:t})]}),(0,w.jsx)(Mi.Next,{href:a(1),disabled:n===t}),(0,w.jsx)(Mi.Last,{href:o,disabled:n===t})]})},ji=["as","className","type","tooltip"],Ui={type:yt().string,tooltip:yt().bool,as:yt().elementType},Vi=t.forwardRef((function(e,t){var n=e.as,r=void 0===n?"div":n,i=e.className,a=e.type,s=void 0===a?"valid":a,c=e.tooltip,f=void 0!==c&&c,h=u(e,ji);return(0,w.jsx)(r,o(o({},h),{},{ref:t,className:l()(i,"".concat(s,"-").concat(f?"tooltip":"feedback"))}))}));Vi.displayName="Feedback",Vi.propTypes=Ui;var qi=Vi,Bi=t.createContext({}),zi=["id","bsPrefix","className","type","isValid","isInvalid","as"],Wi=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.className,s=e.type,c=void 0===s?"checkbox":s,f=e.isValid,h=void 0!==f&&f,d=e.isInvalid,p=void 0!==d&&d,v=e.as,y=void 0===v?"input":v,m=u(e,zi),g=(0,t.useContext)(Bi).controlId;return i=E(i,"form-check-input"),(0,w.jsx)(y,o(o({},m),{},{ref:n,type:c,id:r||g,className:l()(a,i,h&&"is-valid",p&&"is-invalid")}))}));Wi.displayName="FormCheckInput";var Hi=Wi,Ki=["bsPrefix","className","htmlFor"],Gi=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.htmlFor,s=u(e,Ki),c=(0,t.useContext)(Bi).controlId;return r=E(r,"form-check-label"),(0,w.jsx)("label",o(o({},s),{},{ref:n,htmlFor:a||c,className:l()(i,r)}))}));Gi.displayName="FormCheckLabel";var Qi=Gi;var Yi=["id","bsPrefix","bsSwitchPrefix","inline","disabled","isValid","isInvalid","feedbackTooltip","feedback","feedbackType","className","style","title","type","label","children","as"],$i=t.forwardRef((function(e,n){var r=e.id,i=e.bsPrefix,a=e.bsSwitchPrefix,s=e.inline,c=void 0!==s&&s,f=e.disabled,h=void 0!==f&&f,d=e.isValid,p=void 0!==d&&d,v=e.isInvalid,y=void 0!==v&&v,m=e.feedbackTooltip,g=void 0!==m&&m,k=e.feedback,b=e.feedbackType,_=e.className,x=e.style,I=e.title,T=void 0===I?"":I,S=e.type,C=void 0===S?"checkbox":S,N=e.label,R=e.children,A=e.as,P=void 0===A?"input":A,D=u(e,Yi);i=E(i,"form-check"),a=E(a,"form-switch");var O=(0,t.useContext)(Bi).controlId,L=(0,t.useMemo)((function(){return{controlId:r||O}}),[O,r]),M=!R&&null!=N&&!1!==N||function(e,n){return t.Children.toArray(e).some((function(e){return t.isValidElement(e)&&e.type===n}))}(R,Qi),F=(0,w.jsx)(Hi,o(o({},D),{},{type:"switch"===C?"checkbox":C,ref:n,isValid:p,isInvalid:y,disabled:h,as:P}));return(0,w.jsx)(Bi.Provider,{value:L,children:(0,w.jsx)("div",{style:x,className:l()(_,M&&i,c&&"".concat(i,"-inline"),"switch"===C&&a),children:R||(0,w.jsxs)(w.Fragment,{children:[F,M&&(0,w.jsx)(Qi,{title:T,children:N}),k&&(0,w.jsx)(qi,{type:b,tooltip:g,children:k})]})})})}));$i.displayName="FormCheck";var Xi=Object.assign($i,{Input:Hi,Label:Qi}),Ji=(n(391),["bsPrefix","type","size","htmlSize","id","className","isValid","isInvalid","plaintext","readOnly","as"]),Zi=t.forwardRef((function(e,n){var r,a,s=e.bsPrefix,c=e.type,f=e.size,h=e.htmlSize,d=e.id,p=e.className,v=e.isValid,y=void 0!==v&&v,m=e.isInvalid,g=void 0!==m&&m,k=e.plaintext,b=e.readOnly,_=e.as,x=void 0===_?"input":_,I=u(e,Ji),T=(0,t.useContext)(Bi).controlId;(s=E(s,"form-control"),k)?r=i({},"".concat(s,"-plaintext"),!0):(i(a={},s,!0),i(a,"".concat(s,"-").concat(f),f),r=a);return(0,w.jsx)(x,o(o({},I),{},{type:c,size:h,ref:n,readOnly:b,id:d||T,className:l()(p,r,y&&"is-valid",g&&"is-invalid","color"===c&&"".concat(s,"-color"))}))}));Zi.displayName="FormControl";var ea=Object.assign(Zi,{Feedback:qi}),ta=C("form-floating"),na=["controlId","as"],ra=t.forwardRef((function(e,n){var r=e.controlId,i=e.as,a=void 0===i?"div":i,s=u(e,na),c=(0,t.useMemo)((function(){return{controlId:r}}),[r]);return(0,w.jsx)(Bi.Provider,{value:c,children:(0,w.jsx)(a,o(o({},s),{},{ref:n}))})}));ra.displayName="FormGroup";var ia=ra,aa=["as","bsPrefix","column","visuallyHidden","className","htmlFor"],oa=t.forwardRef((function(e,n){var r=e.as,i=void 0===r?"label":r,a=e.bsPrefix,s=e.column,c=e.visuallyHidden,f=e.className,h=e.htmlFor,d=u(e,aa),p=(0,t.useContext)(Bi).controlId;a=E(a,"form-label");var v="col-form-label";"string"===typeof s&&(v="".concat(v," ").concat(v,"-").concat(s));var y=l()(f,a,c&&"visually-hidden",s&&v);return h=h||p,s?(0,w.jsx)(Lr,o({ref:n,as:"label",className:y,htmlFor:h},d)):(0,w.jsx)(i,o({ref:n,className:y,htmlFor:h},d))}));oa.displayName="FormLabel",oa.defaultProps={column:!1,visuallyHidden:!1};var sa=oa,ua=["bsPrefix","className","id"],ca=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.className,a=e.id,s=u(e,ua),c=(0,t.useContext)(Bi).controlId;return r=E(r,"form-range"),(0,w.jsx)("input",o(o({},s),{},{type:"range",ref:n,className:l()(i,r),id:a||c}))}));ca.displayName="FormRange";var la=ca,fa=["bsPrefix","size","htmlSize","className","isValid","isInvalid","id"],ha=t.forwardRef((function(e,n){var r=e.bsPrefix,i=e.size,a=e.htmlSize,s=e.className,c=e.isValid,f=void 0!==c&&c,h=e.isInvalid,d=void 0!==h&&h,p=e.id,v=u(e,fa),y=(0,t.useContext)(Bi).controlId;return r=E(r,"form-select"),(0,w.jsx)("select",o(o({},v),{},{size:a,ref:n,className:l()(s,r,i&&"".concat(r,"-").concat(i),f&&"is-valid",d&&"is-invalid"),id:p||y}))}));ha.displayName="FormSelect";var da=ha,pa=["bsPrefix","className","as","muted"],va=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,a=void 0===i?"small":i,s=e.muted,c=u(e,pa);return n=E(n,"form-text"),(0,w.jsx)(a,o(o({},c),{},{ref:t,className:l()(r,n,s&&"text-muted")}))}));va.displayName="FormText";var ya=va,ma=t.forwardRef((function(e,t){return(0,w.jsx)(Xi,o(o({},e),{},{ref:t,type:"switch"}))}));ma.displayName="Switch";var ga=Object.assign(ma,{Input:Xi.Input,Label:Xi.Label}),ka=["bsPrefix","className","children","controlId","label"],ba=t.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.children,a=e.controlId,s=e.label,c=u(e,ka);return n=E(n,"form-floating"),(0,w.jsxs)(ia,o(o({ref:t,className:l()(r,n),controlId:a},c),{},{children:[i,(0,w.jsx)("label",{htmlFor:a,children:s})]}))}));ba.displayName="FloatingLabel";var wa=ba,_a=["className","validated","as"],xa={_ref:yt().any,validated:yt().bool,as:yt().elementType},Ea=t.forwardRef((function(e,t){var n=e.className,r=e.validated,i=e.as,a=void 0===i?"form":i,s=u(e,_a);return(0,w.jsx)(a,o(o({},s),{},{ref:t,className:l()(n,r&&"was-validated")}))}));Ea.displayName="Form",Ea.propTypes=xa;var Ia=Object.assign(Ea,{Group:ia,Control:ea,Floating:ta,Check:Xi,Switch:ga,Label:sa,Text:ya,Range:la,Select:da,FloatingLabel:wa}),Ta=function(e){var n=e.onInputChange,r=e.value,i="Type your search... !",a=Me((0,t.useState)(!1),2),o=a[0],s=a[1];return(0,t.useEffect)((function(){return s(""!==r)}),[r]),(0,w.jsx)("section",{className:"marginSearchBar",children:(0,w.jsx)(Ia,{className:"my-3",children:(0,w.jsx)(Ia.Group,{children:(0,w.jsxs)(wa,{controlId:"searchInput",label:i,children:[o&&(0,w.jsx)(wi,{variant:"outline-secondary",tabIndex:"2",onClick:function(){n("")},style:{position:"absolute",right:"10px",top:"50%",transform:"translate(0, -50%)"},children:"Clear"}),(0,w.jsx)(Ia.Control,{type:"text",placeholder:i,tabIndex:"1",value:r,onChange:function(e){n(e.target.value)}})]})})})})},Sa=function(e){var n=e.searchbarOff,r=e.pagination,i=e.max,a=Me((0,t.useState)(new Kr),1)[0],s=Me((0,t.useState)([]),2),u=s[0],c=s[1],l=Me((0,t.useState)([]),2),f=l[0],h=l[1],d=Me((0,t.useState)("col"),1)[0],p={list:[12,8,8],col:[12,6,3]},v="number"===typeof parseInt(r)&&!!r,y=Me((0,t.useState)(0),2),m=y[0],g=y[1],k=function(e){var n=(0,t.useRef)(Cr(e)),r=rr(),i=(0,t.useMemo)((function(){var e,t=Cr(r.search),i=jn(n.current.keys());try{var a=function(){var r=e.value;t.has(r)||n.current.getAll(r).forEach((function(e){t.append(r,e)}))};for(i.s();!(e=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return t}),[r.search]),a=ir();return[i,(0,t.useCallback)((function(e,t){a("?"+Cr(e),t)}),[a])]}({search:"",page:0}),b=Me(k,2),_=b[0],x=b[1],E=Me((0,t.useState)(_.get("search")),2),I=E[0],T=E[1],S=Me((0,t.useState)(_.get("page")),2),C=S[0],N=S[1];function R(e){var t=(+(0===+C?1:+C)-1)*r;return e.slice(t,t+r)}return(0,t.useEffect)((function(){if(u.length>1){var e=u,t={};""!==I.trim()&&(e=e.filter((function(e){return e.title.includes(I)})),t.search=I),g(Math.ceil(e.length/r)),v&&(e.length>r&&(t.page=C),e=R(e)),x(t),h(e)}}),[I,C]),(0,t.useEffect)((function(){a.isLoaded()||a.load().then((function(e){e.forEach((function(e){return e.body=e.id+" "+e.title})),c(e);var t=qe(e);i&&i>0&&(t=t.splice(0,i)),""!==I.trim()&&(t=t.filter((function(e){return e.title.includes(_.get("search"))}))),v&&(0==_.get("page")&&(N(1),x(o({},{search:I,page:C}))),g(Math.ceil(t.length/r)),t=R(t)),h(t)}))}),[u]),(0,w.jsxs)("section",{children:[!n&&(0,w.jsx)(Ta,{value:I,onInputChange:function(e){T(e),1!==C&&N(1)}}),(0,w.jsxs)(Ar,{className:"g-2 m-4",children:[f.map((function(e,t){return(0,w.jsx)(Lr,{xs:p[d][0],md:p[d][1],lg:p[d][2],style:{height:"220px"},children:(0,w.jsx)(_i,{cors:e,order:t})},t)})),!f.length&&!I.length&&(0,w.jsx)(xi,{className:"text-primary",scale:"2"}),!f.length&&I.length&&(0,w.jsxs)(ei,{children:['No thing likes " ',I,' " found !']})]}),(0,w.jsx)(Fi,{displayNone:!r||1===m,currentPage:+_.get("page"),pageCount:m,rootLink:mM("articles"),onClick:function(e){x({page:e,search:I}),N(e>0?e:1)}})]})},Ca=function(){var e=rr(),n=Me((0,t.useState)(!0),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){i(e.pathname===mM("articles"))}),[e.pathname]),(0,w.jsxs)("section",{className:"articlesList p-5 text-center transition",children:[r&&(0,w.jsx)("h1",{className:"h1",children:"Last Articles"}),(0,w.jsx)(Xn,{}),r&&(0,w.jsx)(Sa,{pagination:8})]})},Na=function(){return(0,w.jsx)("footer",{className:"text-white py-4 bg-secondary footer-custom",children:(0,w.jsx)("div",{className:"container",children:(0,w.jsxs)("nav",{className:"row justify-content-center",children:[(0,w.jsxs)("ul",{className:"col-12 col-md-3 list-unstyled text-center",children:[(0,w.jsx)("li",{className:"font-weight-bold mb-2 text-center",children:"React Blog"}),(0,w.jsx)("li",{className:"nav-item",children:(0,w.jsx)(Tr,{to:mM("articles"),className:"nav-link text-reset",children:"Articles"})}),(0,w.jsx)("li",{className:"nav-item",children:(0,w.jsx)(Tr,{to:mM("about"),className:"nav-link text-reset text-center",children:"About Us"})})]}),(0,w.jsxs)("ul",{className:"col-12 col-md-3 list-unstyled text-center",children:[(0,w.jsx)("li",{className:"font-weight-bold mb-2 text-center",children:"Our Policies"}),(0,w.jsx)("li",{className:"nav-item",children:(0,w.jsx)(Tr,{to:"#",className:"text-reset nav-link",children:"Terms of Service"})}),(0,w.jsx)("li",{className:"nav-item",children:(0,w.jsx)(Tr,{to:"#",className:"text-reset text-center nav-link",children:"Privacy"})})]}),(0,w.jsxs)("ul",{className:"col-12 col-md-3 list-unstyled",children:[(0,w.jsx)("li",{className:"text-center list-unstyled mb-2",children:"Follow Us"}),(0,w.jsxs)("li",{className:"d-flex justify-content-evenly",children:[(0,w.jsx)("i",{className:"bi bi-facebook"}),(0,w.jsx)("i",{className:"bi bi-instagram"}),(0,w.jsx)("i",{className:"bi bi-twitter"}),(0,w.jsx)("i",{className:"bi bi-youtube"})]})]}),(0,w.jsx)("div",{className:"container",children:(0,w.jsxs)("p",{className:"text-center mb-0 mt-2",children:["\xa9 ",(new Date).getFullYear()," REACT BLOG"]})})]})})})},Ra=function(){return(0,w.jsxs)("main",{className:"app",children:[(0,w.jsx)(gM,{}),(0,w.jsx)("div",{className:"main-min-height",children:(0,w.jsx)(Xn,{})}),(0,w.jsx)(Na,{})]})};function Aa(e,t,n){return Aa=Dt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&U(i,n.prototype),i},Aa.apply(null,arguments)}function Pa(e){var t="function"===typeof Map?new Map:void 0;return Pa=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Aa(e,arguments,Nt(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),U(n,e)},Pa(e)}var Da=!1,Oa=!1,La="${JSCORE_VERSION}",Ma=function(e,t){if(!e)throw Fa(t)},Fa=function(e){return new Error("Firebase Database ("+La+") INTERNAL ASSERT FAILED: "+e)},ja=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ua={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(ja(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Va=function(e){var t=ja(e);return Ua.encodeByteArray(t,!0)},qa=function(e){return Va(e).replace(/\./g,"")},Ba=function(e){try{return Ua.decodeString(e,!0)}catch(bM){console.error("base64Decode failed: ",bM)}return null};function za(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=za(e[n],t[n]));return e}var Wa=function(){function e(){var t=this;Be(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return We(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ha(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[qa(JSON.stringify({alg:"none",type:"JWT"})),qa(JSON.stringify(a)),""].join(".")}function Ka(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ga(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ka())}function Qa(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(bM){return!1}}function Ya(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function $a(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Xa(){var e=Ka();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ja(){return!0===Da||!0===Oa}function Za(){return"object"===typeof indexedDB}var eo=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Lt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Lt(a),to.prototype.create),a}return We(n)}(Pa(Error)),to=function(){function e(t,n,r){Be(this,e),this.service=t,this.serviceName=n,this.errors=r}return We(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?no(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new eo(n,a,t);return o}}]),e}();function no(e,t){return e.replace(ro,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ro=/\{\$([^}]+)}/g;function io(e){return JSON.parse(e)}function ao(e){return JSON.stringify(e)}var oo=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=io(Ba(a[0])||""),n=io(Ba(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(bM){}return{header:t,claims:n,data:r,signature:i}};function so(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function uo(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function co(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function lo(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function fo(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(ho(s)&&ho(u)){if(!fo(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ho(e){return null!==e&&"object"===typeof e}function po(e){for(var t=[],n=function(){var e=Me(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function vo(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Me(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function yo(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var mo=function(){function e(){Be(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return We(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function go(e,t){var n=new ko(e,t);return n.subscribe.bind(n)}var ko=function(){function e(t,n){var r=this;Be(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return We(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=jn(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=bo),void 0===r.error&&(r.error=bo),void 0===r.complete&&(r.complete=bo);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(bM){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(bM){"undefined"!==typeof console&&console.error&&console.error(bM)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function bo(){}function wo(e,t){return"".concat(e," failed: ").concat(t," argument ")}var _o=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function xo(e){return e&&e._delegate?e._delegate:e}function Eo(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Io=function(){function e(t){Be(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return We(e,[{key:"transaction",value:function(e,t){return new To(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new So(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),To=function(){function e(t){var n=this;Be(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return We(e,[{key:"objectStore",value:function(e){return new So(this._transaction.objectStore(e))}}]),e}(),So=function(){function e(t){Be(this,e),this._store=t}return We(e,[{key:"index",value:function(e){return new Co(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new Co(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Eo(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Eo(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Eo(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Eo(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),Co=function(){function e(t){Be(this,e),this._index=t}return We(e,[{key:"get",value:function(e){return Eo(this._index.get(e),"Error reading from IndexedDB")}}]),e}();var No=function(){function e(t,n,r){Be(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return We(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Ro="[DEFAULT]",Ao=function(){function e(t,n){Be(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return We(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Wa;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(bM){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(bM){if(r)return null;throw bM}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ro})}catch(bM){}var t,n=jn(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=Me(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(bM){}}}catch(u){n.e(u)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ro;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ur(zr.mark((function e(){var t;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(qe(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),qe(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ro;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ro;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=jn(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var s=Me(i.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(XT){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Ro?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(XT){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ro;return this.component?this.component.multipleInstances?e:Ro:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Po,Do,Oo=function(){function e(t){Be(this,e),this.name=t,this.providers=new Map}return We(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ao(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Lo=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Do||(Do={}));var Mo,Fo,jo={debug:Do.DEBUG,verbose:Do.VERBOSE,info:Do.INFO,warn:Do.WARN,error:Do.ERROR,silent:Do.SILENT},Uo=Do.INFO,Vo=(i(Po={},Do.DEBUG,"log"),i(Po,Do.VERBOSE,"log"),i(Po,Do.INFO,"info"),i(Po,Do.WARN,"warn"),i(Po,Do.ERROR,"error"),Po),qo=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Vo[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Bo=function(){function e(t){Be(this,e),this.name=t,this._logLevel=Uo,this._logHandler=qo,this._userLogHandler=null,Lo.push(this)}return We(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Do))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?jo[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Do.DEBUG].concat(t)),this._logHandler.apply(this,[this,Do.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Do.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Do.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Do.INFO].concat(t)),this._logHandler.apply(this,[this,Do.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Do.WARN].concat(t)),this._logHandler.apply(this,[this,Do.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Do.ERROR].concat(t)),this._logHandler.apply(this,[this,Do.ERROR].concat(t))}}]),e}();var zo=function(){function e(t){Be(this,e),this.container=t}return We(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Wo="@firebase/app",Ho="0.7.19",Ko=new Bo("@firebase/app"),Go="[DEFAULT]",Qo=(i(Mo={},Wo,"fire-core"),i(Mo,"@firebase/app-compat","fire-core-compat"),i(Mo,"@firebase/analytics","fire-analytics"),i(Mo,"@firebase/analytics-compat","fire-analytics-compat"),i(Mo,"@firebase/app-check","fire-app-check"),i(Mo,"@firebase/app-check-compat","fire-app-check-compat"),i(Mo,"@firebase/auth","fire-auth"),i(Mo,"@firebase/auth-compat","fire-auth-compat"),i(Mo,"@firebase/database","fire-rtdb"),i(Mo,"@firebase/database-compat","fire-rtdb-compat"),i(Mo,"@firebase/functions","fire-fn"),i(Mo,"@firebase/functions-compat","fire-fn-compat"),i(Mo,"@firebase/installations","fire-iid"),i(Mo,"@firebase/installations-compat","fire-iid-compat"),i(Mo,"@firebase/messaging","fire-fcm"),i(Mo,"@firebase/messaging-compat","fire-fcm-compat"),i(Mo,"@firebase/performance","fire-perf"),i(Mo,"@firebase/performance-compat","fire-perf-compat"),i(Mo,"@firebase/remote-config","fire-rc"),i(Mo,"@firebase/remote-config-compat","fire-rc-compat"),i(Mo,"@firebase/storage","fire-gcs"),i(Mo,"@firebase/storage-compat","fire-gcs-compat"),i(Mo,"@firebase/firestore","fire-fst"),i(Mo,"@firebase/firestore-compat","fire-fst-compat"),i(Mo,"fire-js","fire-js"),i(Mo,"firebase","fire-js-all"),Mo),Yo=new Map,$o=new Map;function Xo(e,t){try{e.container.addComponent(t)}catch(bM){Ko.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),bM)}}function Jo(e,t){e.container.addOrOverwriteComponent(t)}function Zo(e){var t=e.name;if($o.has(t))return Ko.debug("There were multiple attempts to register component ".concat(t,".")),!1;$o.set(t,e);var n,r=jn(Yo.values());try{for(r.s();!(n=r.n()).done;){Xo(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function es(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ts(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Go;es(e,t).clearInstance(n)}function ns(){$o.clear()}var rs=(i(Fo={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(Fo,"bad-app-name","Illegal App name: '{$appName}"),i(Fo,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(Fo,"app-deleted","Firebase App named '{$appName}' already deleted"),i(Fo,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(Fo,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(Fo,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),i(Fo,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),i(Fo,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),i(Fo,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Fo),is=new to("app","Firebase",rs),as=function(){function e(t,n,r){var i=this;Be(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",(function(){return i}),"PUBLIC"))}return We(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw is.create("app-deleted",{appName:this._name})}}]),e}(),os="9.6.9";function ss(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Go,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw is.create("bad-app-name",{appName:String(i)});var a=Yo.get(i);if(a){if(fo(e,a.options)&&fo(r,a.config))return a;throw is.create("duplicate-app",{appName:i})}var o,s=new Oo(i),u=jn($o.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new as(e,r,s);return Yo.set(i,l),l}function us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Go,t=Yo.get(e);if(!t)throw is.create("no-app",{appName:e});return t}function cs(){return Array.from(Yo.values())}function ls(e){return fs.apply(this,arguments)}function fs(){return(fs=Ur(zr.mark((function e(t){var n;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Yo.has(n)){e.next=6;break}return Yo.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t,n){var r,i=null!==(r=Qo[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ko.warn(s.join(" "))}Zo(new No("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ds(e,t){if(null!==e&&"function"!==typeof e)throw is.create("invalid-log-argument");!function(e,t){var n,r=jn(Lo);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=jo[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Do[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ps(e){var t;t=e,Lo.forEach((function(e){e.setLogLevel(t)}))}var vs="firebase-heartbeat-store",ys=null;function ms(){var e,t,n;return ys||(ys=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(vs)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new Io(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new Io(a.result),e.oldVersion,e.newVersion,new To(a.transaction))}}catch(bM){i("Error opening indexedDB: ".concat(bM.message))}}))).catch((function(e){throw is.create("storage-open",{originalErrorMessage:e.message})}))),ys}function gs(e){return ks.apply(this,arguments)}function ks(){return ks=Ur(zr.mark((function e(t){var n;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ms();case 3:return n=e.sent,e.abrupt("return",n.transaction(vs).objectStore(vs).get(_s(t)));case 7:throw e.prev=7,e.t0=e.catch(0),is.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ks.apply(this,arguments)}function bs(e,t){return ws.apply(this,arguments)}function ws(){return ws=Ur(zr.mark((function e(t,n){var r,i,a;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ms();case 3:return r=e.sent,i=r.transaction(vs,"readwrite"),a=i.objectStore(vs),e.next=8,a.put(n,_s(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),is.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ws.apply(this,arguments)}function _s(e){return"".concat(e.name,"!").concat(e.options.appId)}var xs=function(){function e(t){var n=this;Be(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Cs(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return We(e,[{key:"triggerHeartbeat",value:function(){var e=Ur(zr.mark((function e(){var t,n,r;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Es(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ur(zr.mark((function e(){var t,n,r,i,a;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Es(),n=Is(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=qa(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Es(){return(new Date).toISOString().substring(0,10)}function Is(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=jn(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Ns(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Ns(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Ts,Ss,Cs=function(){function e(t){Be(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return We(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ur(zr.mark((function e(){return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Za()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(DA){t(DA)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ur(zr.mark((function e(){var t;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,gs(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ur(zr.mark((function e(t){var n,r;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",bs(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ur(zr.mark((function e(t){var n,r;return zr.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",bs(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(qe(r.heartbeats),qe(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Ns(e){return qa(JSON.stringify({version:2,heartbeats:e})).length}Ts="",Zo(new No("platform-logger",(function(e){return new zo(e)}),"PRIVATE")),Zo(new No("heartbeat",(function(e){return new xs(e)}),"PRIVATE")),hs(Wo,Ho,Ts),hs(Wo,Ho,"esm2017"),hs("fire-js","");var Rs=function(){function e(t,n){var r=this;Be(this,e),this._delegate=t,this.firebase=n,Xo(t,new No("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return We(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ls(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Go;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Xo(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Jo(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),As=(i(Ss={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(Ss,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ss),Ps=new to("app-compat","Firebase",As);var Ds=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ss(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(so(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:hs,setLogLevel:ps,onLog:ds,apps:null,SDK_VERSION:os,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Zo(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ps.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&za(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!so(n,e=e||Go))throw Ps.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Rs);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){za(n,e)},createSubscribe:go,ErrorFactory:to,deepExtend:za}),n}(),Os=new Bo("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Os.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Ls=self.firebase.SDK_VERSION;Ls&&Ls.indexOf("LITE")>=0&&Os.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ms=Ds;!function(e){hs("@firebase/app-compat","0.1.20",e)}();Ms.registerVersion("firebase","9.6.9","app-compat");hs("firebase","9.6.9","app");function Fs(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var js;Object.create;var Us="facebook.com",Vs="github.com",qs="google.com",Bs="password",zs="twitter.com",Ws="EMAIL_SIGNIN",Hs="PASSWORD_RESET",Ks="RECOVER_EMAIL",Gs="REVERT_SECOND_FACTOR_ADDITION",Qs="VERIFY_AND_CHANGE_EMAIL",Ys="VERIFY_EMAIL";function $s(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Xs=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Js=$s,Zs=new to("auth","Firebase",$s()),eu=new Bo("@firebase/auth");function tu(e){if(eu.logLevel<=Do.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];eu.error.apply(eu,["Auth (".concat(os,"): ").concat(e)].concat(n))}}function nu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw ou.apply(void 0,[e].concat(n))}function ru(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ou.apply(void 0,[e].concat(n))}function iu(e,t,n){var r=Object.assign(Object.assign({},Js()),i({},t,n));return new to("auth","Firebase",r).create(t,{appName:e.name})}function au(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&nu(e,"argument-error"),iu(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function ou(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=qe(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(qe(o)))}return Zs.create.apply(Zs,[e].concat(n))}function su(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw ou.apply(void 0,[t].concat(r))}}function uu(e){var t="INTERNAL ASSERTION FAILED: "+e;throw tu(t),new Error(t)}function cu(e,t){e||uu(t)}var lu=new Map;function fu(e){cu(e instanceof Function,"Expected a class definition");var t=lu.get(e);return t?(cu(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,lu.set(e,t),t)}function hu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function du(){return"http:"===pu()||"https:"===pu()}function pu(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var vu=function(){function e(t,n){Be(this,e),this.shortDelay=t,this.longDelay=n,cu(n>t,"Short delay should be less than long delay!"),this.isMobile=Ga()||$a()}return We(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(du()||Ya()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function yu(e,t){cu(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var mu=function(){function e(){Be(this,e)}return We(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void uu("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void uu("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void uu("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),gu=(i(js={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(js,"MISSING_CUSTOM_TOKEN","internal-error"),i(js,"INVALID_IDENTIFIER","invalid-email"),i(js,"MISSING_CONTINUE_URI","internal-error"),i(js,"INVALID_PASSWORD","wrong-password"),i(js,"MISSING_PASSWORD","internal-error"),i(js,"EMAIL_EXISTS","email-already-in-use"),i(js,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(js,"INVALID_IDP_RESPONSE","invalid-credential"),i(js,"INVALID_PENDING_TOKEN","invalid-credential"),i(js,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(js,"MISSING_REQ_TYPE","internal-error"),i(js,"EMAIL_NOT_FOUND","user-not-found"),i(js,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(js,"EXPIRED_OOB_CODE","expired-action-code"),i(js,"INVALID_OOB_CODE","invalid-action-code"),i(js,"MISSING_OOB_CODE","internal-error"),i(js,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(js,"INVALID_ID_TOKEN","invalid-user-token"),i(js,"TOKEN_EXPIRED","user-token-expired"),i(js,"USER_NOT_FOUND","user-token-expired"),i(js,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(js,"INVALID_CODE","invalid-verification-code"),i(js,"INVALID_SESSION_INFO","invalid-verification-id"),i(js,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(js,"MISSING_SESSION_INFO","missing-verification-id"),i(js,"SESSION_EXPIRED","code-expired"),i(js,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(js,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(js,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(js,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(js,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(js,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(js,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(js,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(js,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(js,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(js,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),js),ku=new vu(3e4,6e4);function bu(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function wu(e,t,n,r){return _u.apply(this,arguments)}function _u(){return _u=Ur(Wr().mark((function e(t,n,r,i){var a,o=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",xu(t,a,Ur(Wr().mark((function e(){var a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=po(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",mu.fetch()(Su(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),_u.apply(this,arguments)}function xu(e,t,n){return Eu.apply(this,arguments)}function Eu(){return(Eu=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},gu),n),e.prev=2,a=new Cu(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Nu(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=Me(c,2),f=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Nu(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==f){e.next=25;break}throw Nu(t,"email-already-in-use",s);case 25:if(d=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=30;break}throw iu(t,d,h);case 30:nu(t,d);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof eo)){e.next=37;break}throw e.t0;case 37:nu(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function Iu(e,t,n,r){return Tu.apply(this,arguments)}function Tu(){return Tu=Ur(Wr().mark((function e(t,n,r,i){var a,o,s=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,wu(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&nu(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Tu.apply(this,arguments)}function Su(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?yu(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Cu=function(){function e(t){var n=this;Be(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ru(n.auth,"network-request-failed"))}),ku.get())}))}return We(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Nu(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ru(e,t,r);return i.customData._tokenResponse=n,i}function Ru(e,t){return Au.apply(this,arguments)}function Au(){return(Au=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pu(e,t){return Du.apply(this,arguments)}function Du(){return(Du=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ou(e,t){return Lu.apply(this,arguments)}function Lu(){return(Lu=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mu(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(bM){}}function Fu(){return Fu=Ur(Wr().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=xo(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,su((a=Uu(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Mu(ju(a.auth_time)),issuedAtTime:Mu(ju(a.iat)),expirationTime:Mu(ju(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function ju(e){return 1e3*Number(e)}function Uu(e){var t=Me(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return tu("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ba(r);return a?JSON.parse(a):(tu("Failed to decode base64 JWT payload"),null)}catch(bM){return tu("Caught error parsing JWT payload as JSON",bM),null}}function Vu(e,t){return qu.apply(this,arguments)}function qu(){return qu=Ur(Wr().mark((function e(t,n){var r=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof eo&&Bu(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),qu.apply(this,arguments)}function Bu(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var zu=function(){function e(t){Be(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return We(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Wu=function(){function e(t,n){Be(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return We(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Mu(this.lastLoginAt),this.creationTime=Mu(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Hu(e){return Ku.apply(this,arguments)}function Ku(){return Ku=Ur(Wr().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Vu(t,Ou(r,{idToken:i}));case 6:su(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Yu(o.providerUserInfo):[],u=Qu(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Wu(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(){return(Gu=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=xo(t),e.next=3,Hu(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qu(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(qe(n),qe(t))}function Yu(e){return e.map((function(e){var t=e.providerId,n=Fs(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function $u(e,t){return Xu.apply(this,arguments)}function Xu(){return(Xu=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xu(t,{},Ur(Wr().mark((function e(){var r,i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=po({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Su(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",mu.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ju=function(){function e(){Be(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return We(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){su(e.idToken,"internal-error"),su("undefined"!==typeof e.idToken,"internal-error"),su("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Uu(e);return su(t,"internal-error"),su("undefined"!==typeof t.exp,"internal-error"),su("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ur(Wr().mark((function e(t){var n,r=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],su(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$u(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return uu("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(su("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(su("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(su("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Zu(e,t){su("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ec=function(){function e(t){Be(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Fs(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?qe(a.providerData):[],this.metadata=new Wu(a.createdAt||void 0,a.lastLoginAt||void 0)}return We(e,[{key:"getIdToken",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vu(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(su(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Fu.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Gu.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(su(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){su(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ur(Wr().mark((function e(t){var n,r,i=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Hu(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Vu(this,Ru(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;su(k&&x,t,"internal-error");var E=Ju.fromJSON(this.name,x);su("string"===typeof k,t,"internal-error"),Zu(f,t.name),Zu(h,t.name),su("boolean"===typeof b,t,"internal-error"),su("boolean"===typeof w,t,"internal-error"),Zu(d,t.name),Zu(p,t.name),Zu(v,t.name),Zu(y,t.name),Zu(m,t.name),Zu(g,t.name);var I=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:E,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(I.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(I._redirectEventId=y),I}},{key:"_fromIdTokenResponse",value:function(){var t=Ur(Wr().mark((function t(n,r){var i,a,o,s=arguments;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ju).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Hu(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),tc=function(){function e(){Be(this,e),this.type="NONE",this.storage={}}return We(e,[{key:"_isAvailable",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();tc.type="NONE";var nc=tc;function rc(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ic=function(){function e(t,n,r){Be(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=rc(this.userKey,a.apiKey,o),this.fullPersistenceKey=rc("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return We(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ec._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ur(Wr().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(fu(nc),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||fu(nc),s=rc(i,n.config.apiKey,n.name),u=null,c=jn(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=ec._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ac(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cc(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oc(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fc(t))return"Blackberry";if(hc(t))return"Webos";if(sc(t))return"Safari";if((t.includes("chrome/")||uc(t))&&!t.includes("edge/"))return"Chrome";if(lc(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function oc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/firefox\//i.test(e)}function sc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/crios\//i.test(e)}function cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/iemobile/i.test(e)}function lc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/android/i.test(e)}function fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/blackberry/i.test(e)}function hc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/webos/i.test(e)}function dc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/iphone|ipad|ipod/i.test(e)}function pc(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return dc(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function vc(){return Xa()&&10===document.documentMode}function yc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return dc(e)||lc(e)||hc(e)||fc(e)||/windows phone/i.test(e)||cc(e)}function mc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ac(Ka());break;case"Worker":t="".concat(ac(Ka()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(os,"/").concat(r)}var gc=function(){function e(t,n,r){Be(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new bc(this),this.idTokenSubscription=new bc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zs,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return We(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=fu(t)),this._initializationPromise=this.queue(Ur(Wr().mark((function r(){var i,a;return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ic.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ur(Wr().mark((function e(t){var n,r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return su(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hu(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?xo(t):null)&&su(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ur(Wr().mark((function e(t){var n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&su(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(fu(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new to("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return su(n=t&&fu(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ic.create(this,[fu(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ur(Wr().mark((function e(t){var n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return su(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return su(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mc(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kc(e){return xo(e)}var bc=function(){function e(t){var n=this;Be(this,e),this.auth=t,this.observer=null,this.addObserver=go((function(e){return n.observer=e}))}return We(e,[{key:"next",get:function(){return su(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function wc(e,t,n){var r=kc(e);su(r._canInitEmulator,r,"emulator-config-failed"),su(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=_c(t),o=function(e){var t=_c(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:xc(r.substr(a.length+1))}}var o=Me(r.split(":"),2);return{host:o[0],port:xc(o[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(a,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function _c(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function xc(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ec=function(){function e(t,n){Be(this,e),this.providerId=t,this.signInMethod=n}return We(e,[{key:"toJSON",value:function(){return uu("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return uu("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return uu("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return uu("not implemented")}}]),e}();function Ic(e,t){return Tc.apply(this,arguments)}function Tc(){return(Tc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:resetPassword",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sc(e,t){return Cc.apply(this,arguments)}function Cc(){return(Cc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nc(e,t){return Rc.apply(this,arguments)}function Rc(){return(Rc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:update",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ac(e,t){return Pc.apply(this,arguments)}function Pc(){return(Pc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithPassword",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dc(e,t){return Oc.apply(this,arguments)}function Oc(){return(Oc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:sendOobCode",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lc(e,t){return Mc.apply(this,arguments)}function Mc(){return(Mc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fc(e,t){return jc.apply(this,arguments)}function jc(){return(jc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uc(e,t){return Vc.apply(this,arguments)}function Vc(){return(Vc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qc(e,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Dc(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zc(e,t){return Wc.apply(this,arguments)}function Wc(){return(Wc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithEmailLink",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hc(e,t){return Kc.apply(this,arguments)}function Kc(){return(Kc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithEmailLink",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Gc=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Be(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return We(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ac(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",zc(t,{email:this._email,oobCode:this._password}));case 5:nu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sc(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Hc(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:nu(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ec);function Qc(e,t){return Yc.apply(this,arguments)}function Yc(){return(Yc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithIdp",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $c=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return We(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Qc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qc(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=po(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):nu("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Fs(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ec);function Xc(e,t){return Jc.apply(this,arguments)}function Jc(){return(Jc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:sendVerificationCode",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(){return(Zc=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithPhoneNumber",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function el(){return(el=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Iu(t,"POST","/v1/accounts:signInWithPhoneNumber",bu(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Nu(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tl=i({},"USER_NOT_FOUND","user-not-found");function nl(){return(nl=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithPhoneNumber",bu(t,r),tl));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rl=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this,"phone","phone")).params=e,r}return We(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Zc.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return el.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return nl.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ec);var il=function(){function e(t){var n,r,i,a,o,s;Be(this,e);var u=vo(yo(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);su(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return We(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=vo(yo(e)).link,n=t?vo(yo(t)).deep_link_id:null,r=vo(yo(e)).deep_link_id;return(r?vo(yo(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(XT){return null}}}]),e}();var al=function(){function e(){Be(this,e),this.providerId=e.PROVIDER_ID}return We(e,null,[{key:"credential",value:function(e,t){return Gc._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=il.parseLink(t);return su(n,"argument-error"),Gc._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();al.PROVIDER_ID="password",al.EMAIL_PASSWORD_SIGN_IN_METHOD="password",al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ol=function(){function e(t){Be(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return We(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),sl=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.apply(this,arguments)).scopes=[],e}return We(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return qe(this.scopes)}}]),n}(ol),ul=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return su(e.idToken||e.accessToken,"argument-error"),$c._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return su("providerId"in t&&"signInMethod"in t,"argument-error"),$c._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(bM){return null}}}]),n}(sl),cl=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.call(this,"facebook.com")}return We(n,null,[{key:"credential",value:function(e){return $c._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(XT){return null}}}]),n}(sl);cl.FACEBOOK_SIGN_IN_METHOD="facebook.com",cl.PROVIDER_ID="facebook.com";var ll=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return We(n,null,[{key:"credential",value:function(e,t){return $c._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(XT){return null}}}]),n}(sl);ll.GOOGLE_SIGN_IN_METHOD="google.com",ll.PROVIDER_ID="google.com";var fl=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.call(this,"github.com")}return We(n,null,[{key:"credential",value:function(e){return $c._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(XT){return null}}}]),n}(sl);fl.GITHUB_SIGN_IN_METHOD="github.com",fl.PROVIDER_ID="github.com";var hl=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return We(n,[{key:"_getIdTokenResponse",value:function(e){return Qc(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qc(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qc(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ec),dl=function(e){Pt(n,e);var t=Ft(n);function n(e){return Be(this,n),su(e.startsWith("saml."),"argument-error"),t.call(this,e)}return We(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=hl.fromJSON(e);return su(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return hl._create(r,n)}catch(bM){return null}}}]),n}(ol),pl=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.call(this,"twitter.com")}return We(n,null,[{key:"credential",value:function(e,t){return $c._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(XT){return null}}}]),n}(sl);function vl(e,t){return yl.apply(this,arguments)}function yl(){return(yl=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signUp",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}pl.TWITTER_SIGN_IN_METHOD="twitter.com",pl.PROVIDER_ID="twitter.com";var ml=function(){function e(t){Be(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return We(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ur(Wr().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ec._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=gl(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ur(Wr().mark((function t(n,r,i){var a;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=gl(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function gl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function kl(){return kl=Ur(Wr().mark((function e(t){var n,r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kc(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ml({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,vl(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ml._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),kl.apply(this,arguments)}var bl=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a){var o,s;return Be(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(Lt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return We(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(eo);function wl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw bl._fromErrorAndOperation(e,n,t,r);throw n}))}function _l(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function xl(e,t){return El.apply(this,arguments)}function El(){return El=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,Sl(!0,r,n);case 3:return e.t0=Pu,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=_l(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),El.apply(this,arguments)}function Il(e,t){return Tl.apply(this,arguments)}function Tl(){return Tl=Ur(Wr().mark((function e(t,n){var r,i,a=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Vu,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ml._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Tl.apply(this,arguments)}function Sl(e,t,n){return Cl.apply(this,arguments)}function Cl(){return(Cl=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hu(n);case 2:i=_l(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",su(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nl(e,t){return Rl.apply(this,arguments)}function Rl(){return Rl=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Vu(t,wl(i,a,n,t),r);case 6:return su((o=e.sent).idToken,i,"internal-error"),su(s=Uu(o.idToken),i,"internal-error"),u=s.sub,su(t.uid===u,i,"user-mismatch"),e.abrupt("return",ml._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&nu(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Rl.apply(this,arguments)}function Al(e,t){return Pl.apply(this,arguments)}function Pl(){return Pl=Ur(Wr().mark((function e(t,n){var r,i,a,o,s=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,wl(t,i,n);case 4:return a=e.sent,e.next=7,ml._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Dl(e,t){return Ol.apply(this,arguments)}function Ol(){return(Ol=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Al(kc(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ll(e,t){return Ml.apply(this,arguments)}function Ml(){return(Ml=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,Sl(!1,r,n.providerId);case 3:return e.abrupt("return",Il(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fl(e,t){return jl.apply(this,arguments)}function jl(){return(jl=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nl(xo(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ul(e,t){return Vl.apply(this,arguments)}function Vl(){return(Vl=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Iu(t,"POST","/v1/accounts:signInWithCustomToken",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ql(){return(ql=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kc(t),e.next=3,Ul(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ml._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bl=function(){function e(t,n){Be(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return We(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?zl._fromServerResponse(e,t):nu(e,"internal-error")}}]),e}(),zl=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return We(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Bl);function Wl(e,t,n){var r;su((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),su("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(su(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(su(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Hl(){return(Hl=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),a={requestType:"PASSWORD_RESET",email:n},r&&Wl(i,a,r),e.next=5,Fc(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kl(){return(Kl=Ur(Wr().mark((function e(t,n,r){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(xo(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gl(){return(Gl=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(xo(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ql(e,t){return Yl.apply(this,arguments)}function Yl(){return(Yl=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,Ic(r,{oobCode:n});case 3:i=e.sent,su(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return su(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:su(i.mfaInfo,r,"internal-error");case 13:su(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Bl._fromServerResponse(kc(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $l(){return($l=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ql(xo(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xl(e,t,n){return Jl.apply(this,arguments)}function Jl(){return(Jl=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kc(t),e.next=3,vl(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ml._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zl(){return(Zl=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),a={requestType:"EMAIL_SIGNIN",email:n},su(r.handleCodeInApp,i,"argument-error"),r&&Wl(i,a,r),e.next=6,Uc(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ef(){return(ef=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),su((a=al.credentialWithLink(n,r||hu()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Dl(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tf(e,t){return nf.apply(this,arguments)}function nf(){return(nf=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:createAuthUri",bu(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rf(){return(rf=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=du()?hu():"http://localhost",i={identifier:n,continueUri:r},e.next=4,tf(xo(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function af(){return(af=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xo(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Wl(r.auth,a,n),e.next=8,Lc(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function of(){return(of=Ur(Wr().mark((function e(t,n,r){var i,a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Wl(i.auth,o,r),e.next=8,qc(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sf(e,t){return uf.apply(this,arguments)}function uf(){return(uf=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wu(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cf(){return(cf=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u,c;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=xo(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Vu(a,sf(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lf(e,t,n){return ff.apply(this,arguments)}function ff(){return(ff=Ur(Wr().mark((function e(t,n,r){var i,a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Vu(t,Sc(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hf=We((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Be(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),df=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a){var o;return Be(this,n),(o=t.call(this,e,r,i)).username=a,o}return We(n)}(hf),pf=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"facebook.com",r)}return We(n)}(hf),vf=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return We(n)}(df),yf=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"google.com",r)}return We(n)}(hf),mf=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){return Be(this,n),t.call(this,e,"twitter.com",r,i)}return We(n)}(df);function gf(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Uu(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new hf(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new pf(a,i);case"github.com":return new vf(a,i);case"google.com":return new yf(a,i);case"twitter.com":return new mf(a,i,e.screenName||null);case"custom":case"anonymous":return new hf(a,null);default:return new hf(a,r,i)}}(n)}var kf=function(){function e(t,n){Be(this,e),this.type=t,this.credential=n}return We(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),bf=function(){function e(t,n,r){Be(this,e),this.session=t,this.hints=n,this.signInResolver=r}return We(e,[{key:"resolveSignIn",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=kc(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Bl._fromServerResponse(r,e)}));su(i.mfaPendingCredential,r,"internal-error");var o=kf._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ur(Wr().mark((function e(t){var a,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ml._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return su(n.user,r,"internal-error"),e.abrupt("return",ml._forOperation(n.user,n.operationType,s));case 17:nu(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function wf(e,t){return wu(e,"POST","/v2/accounts/mfaEnrollment:start",bu(e,t))}var _f=function(){function e(t){var n=this;Be(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Bl._fromServerResponse(t.auth,e)})))}))}return We(e,[{key:"getSession",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=kf,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Vu(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ur(Wr().mark((function e(t){var n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Vu(this.user,wu(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",bu(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),xf=new WeakMap;var Ef="__sak",If=function(){function e(t,n){Be(this,e),this.storageRetriever=t,this.type=n}return We(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch(XT){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Tf=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ka();return sc(e)||dc(e)}()&&function(){try{return!(!window||window===window.top)}catch(bM){return!1}}(),e.fallbackToPolling=yc(),e._shouldAllowMigration=!0,e}return We(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vc()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ur(Wr().mark((function e(t,r){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ur(Wr().mark((function e(t){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(If);Tf.type="LOCAL";var Sf=Tf,Cf=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return We(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(If);Cf.type="SESSION";var Nf=Cf;function Rf(e){return Promise.all(e.map(function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Af=function(){function e(t){Be(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return We(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ur(Wr().mark((function e(t){var n,r,i,a,o,s,u,c;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Rf(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Pf(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Af.receivers=[];var Df=function(){function e(t){Be(this,e),this.target=t,this.handlers=new Set}return We(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Pf("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Of(){return window}function Lf(){return"undefined"!==typeof Of().WorkerGlobalScope&&"function"===typeof Of().importScripts}function Mf(){return Ff.apply(this,arguments)}function Ff(){return(Ff=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function jf(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Uf="firebaseLocalStorageDb",Vf="firebaseLocalStorage",qf="fbase_key",Bf=function(){function e(t){Be(this,e),this.request=t}return We(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function zf(e,t){return e.transaction([Vf],t?"readwrite":"readonly").objectStore(Vf)}function Wf(){var e=indexedDB.deleteDatabase(Uf);return new Bf(e).toPromise()}function Hf(){var e=indexedDB.open(Uf,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Vf,{keyPath:qf})}catch(bM){n(bM)}})),e.addEventListener("success",Ur(Wr().mark((function n(){var r;return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Vf)){n.next=12;break}return r.close(),n.next=5,Wf();case 5:return n.t0=t,n.next=8,Hf();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Kf(e,t,n){return Gf.apply(this,arguments)}function Gf(){return Gf=Ur(Wr().mark((function e(t,n,r){var a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=zf(t,!0).put((i(a={},qf,n),i(a,"value",r),a)),e.abrupt("return",new Bf(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),Gf.apply(this,arguments)}function Qf(e,t){return Yf.apply(this,arguments)}function Yf(){return Yf=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zf(t,!1).get(n),e.next=3,new Bf(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Yf.apply(this,arguments)}function $f(e,t){var n=zf(e,!0).delete(t);return new Bf(n).toPromise()}var Xf=function(){function e(){Be(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return We(e,[{key:"_openDb",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Hf();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lf()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ur(Wr().mark((function e(){var t=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Af._getInstance(Lf()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ur(Wr().mark((function e(n,r){var i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mf();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Df(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&jf()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Hf();case 5:return t=e.sent,e.next=8,Kf(t,Ef,"1");case 8:return e.next=10,$f(t,Ef);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ur(Wr().mark((function e(t,n){var r=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Kf(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Qf(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ur(Wr().mark((function e(t){var n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return $f(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=zf(e,!1).getAll();return new Bf(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=jn(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Xf.type="LOCAL";var Jf=Xf;function Zf(e,t){return wu(e,"POST","/v2/accounts/mfaSignIn:start",bu(e,t))}function eh(e){return th.apply(this,arguments)}function th(){return(th=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wu(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nh(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ru("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function rh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ih=1e12,ah=function(){function e(t){Be(this,e),this.auth=t,this.counter=ih,this._widgets=new Map}return We(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new oh(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ih;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ih;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ih,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),oh=function(){function e(t,n,r){var i=this;Be(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;su(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return We(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(bM){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(bM){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var sh=rh("rcb"),uh=new vu(3e4,6e4),ch="https://www.google.com/recaptcha/api.js?",lh=function(){function e(){Be(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Of().grecaptcha}return We(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return su(fh(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Of().grecaptcha):new Promise((function(r,i){var a=Of().setTimeout((function(){i(ru(e,"network-request-failed"))}),uh.get());Of()[sh]=function(){Of().clearTimeout(a),delete Of()[sh];var o=Of().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ru(e,"internal-error"))},nh("".concat(ch,"?").concat(po({onload:sh,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ru(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Of().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function fh(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var hh=function(){function e(){Be(this,e)}return We(e,[{key:"load",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ah(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),dh="recaptcha",ph={theme:"light",type:"image"},vh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},ph),r=arguments.length>2?arguments[2]:void 0;Be(this,e),this.parameters=n,this.type=dh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kc(r),this.isInvisible="invisible"===this.parameters.size,su("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;su(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hh:new lh,this.validateStartingState()}return We(e,[{key:"verify",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(bM){return Promise.reject(bM)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){su(!this.parameters.sitekey,this.auth,"argument-error"),su(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),su("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Of()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){su(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ur(Wr().mark((function e(){var t,n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return su(du()&&!Lf(),this.auth,"internal-error"),e.next=3,yh();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,eh(this.auth);case 8:su(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return su(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function yh(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var mh=function(){function e(t,n){Be(this,e),this.verificationId=t,this.onConfirmation=n}return We(e,[{key:"confirm",value:function(e){var t=rl._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function gh(){return(gh=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kc(t),e.next=3,_h(i,n,xo(r));case 3:return a=e.sent,e.abrupt("return",new mh(a,(function(e){return Dl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kh(e,t,n){return bh.apply(this,arguments)}function bh(){return(bh=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),e.next=3,Sl(!1,i,"phone");case 3:return e.next=5,_h(i.auth,n,xo(r));case 5:return a=e.sent,e.abrupt("return",new mh(a,(function(e){return Ll(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wh(){return(wh=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=xo(t),e.next=3,_h(i.auth,n,xo(r));case 3:return a=e.sent,e.abrupt("return",new mh(a,(function(e){return Fl(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _h(e,t,n){return xh.apply(this,arguments)}function xh(){return xh=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,su("string"===typeof a,t,"argument-error"),su(r.type===dh,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return su("enroll"===s.type,t,"internal-error"),e.next=13,wf(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return su("signin"===s.type,t,"internal-error"),su(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Zf(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Xc(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),xh.apply(this,arguments)}function Eh(){return(Eh=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Il(xo(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ih=function(){function e(t){Be(this,e),this.providerId=e.PROVIDER_ID,this.auth=kc(t)}return We(e,[{key:"verifyPhoneNumber",value:function(e,t){return _h(this.auth,e,xo(t))}}],[{key:"credential",value:function(e,t){return rl._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?rl._fromTokenResponse(n,r):null}}]),e}();function Th(e,t){return t?fu(t):(su(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ih.PROVIDER_ID="phone",Ih.PHONE_SIGN_IN_METHOD="phone";var Sh=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this,"custom","custom")).params=e,r}return We(n,[{key:"_getIdTokenResponse",value:function(e){return Qc(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Qc(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Qc(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ec);function Ch(e){return Al(e.auth,new Sh(e),e.bypassAuthState)}function Nh(e){var t=e.auth,n=e.user;return su(n,t,"internal-error"),Nl(n,new Sh(e),e.bypassAuthState)}function Rh(e){return Ah.apply(this,arguments)}function Ah(){return(Ah=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,su(r=t.user,n,"internal-error"),e.abrupt("return",Il(r,new Sh(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ph=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Be(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return We(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ur(Wr().mark((function t(n,r){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ur(Wr().mark((function e(t){var n,r,i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ch;case"linkViaPopup":case"linkViaRedirect":return Rh;case"reauthViaPopup":case"reauthViaRedirect":return Nh;default:nu(this.auth,"internal-error")}}},{key:"resolve",value:function(e){cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){cu(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Dh=new vu(2e3,1e4);function Oh(e,t,n){return Lh.apply(this,arguments)}function Lh(){return(Lh=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kc(t),au(t,n,ol),a=Th(i,r),o=new Uh(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mh(){return(Mh=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return au((i=xo(t)).auth,n,ol),a=Th(i.auth,r),o=new Uh(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(e,t,n){return jh.apply(this,arguments)}function jh(){return(jh=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return au((i=xo(t)).auth,n,ol),a=Th(i.auth,r),o=new Uh(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uh=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a,o){var s;return Be(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Lt(s),s}return We(n,[{key:"executeNotNull",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return su(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ur(Wr().mark((function e(){var t,n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cu(1===this.filter.length,"Popup operations only handle one event"),t=Pf(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ru(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ru(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ru(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Dh.get())}()}}]),n}(Ph);Uh.currentPopupAction=null;var Vh=new Map,qh=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Be(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return We(n,[{key:"execute",value:function(){var e=Ur(Wr().mark((function e(){var t,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Vh.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Bh(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,At(Nt(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Vh.set(this.auth._key(),t);case 21:return this.bypassAuthState||Vh.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ur(Wr().mark((function e(t){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",At(Nt(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",At(Nt(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ph);function Bh(e,t){return zh.apply(this,arguments)}function zh(){return(zh=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gh(n),i=Kh(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wh(e,t){return Hh.apply(this,arguments)}function Hh(){return(Hh=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Kh(t)._set(Gh(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kh(e){return fu(e._redirectPersistence)}function Gh(e){return rc("pendingRedirect",e.config.apiKey,e.name)}function Qh(e,t,n){return function(e,t,n){return Yh.apply(this,arguments)}(e,t,n)}function Yh(){return(Yh=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=kc(t),au(t,n,ol),a=Th(i,r),e.next=5,Wh(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $h(e,t,n){return function(e,t,n){return Xh.apply(this,arguments)}(e,t,n)}function Xh(){return(Xh=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return au((i=xo(t)).auth,n,ol),a=Th(i.auth,r),e.next=5,Wh(a,i.auth);case 5:return e.next=7,id(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jh(e,t,n){return function(e,t,n){return Zh.apply(this,arguments)}(e,t,n)}function Zh(){return(Zh=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return au((i=xo(t)).auth,n,ol),a=Th(i.auth,r),e.next=5,Sl(!1,i,n.providerId);case 5:return e.next=7,Wh(a,i.auth);case 7:return e.next=9,id(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ed(e,t){return td.apply(this,arguments)}function td(){return(td=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(t)._initializationPromise;case 2:return e.abrupt("return",nd(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nd(e,t){return rd.apply(this,arguments)}function rd(){return rd=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=kc(t),a=Th(i,n),o=new qh(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),rd.apply(this,arguments)}function id(e){return ad.apply(this,arguments)}function ad(){return(ad=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Pf("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var od=function(){function e(t){Be(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return We(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ud(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ud(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ru(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(sd(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(sd(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function sd(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ud(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function cd(e){return ld.apply(this,arguments)}function ld(){return ld=Ur(Wr().mark((function e(t){var n,r=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",wu(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ld.apply(this,arguments)}var fd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hd=/^https?/;function dd(){return(dd=Ur(Wr().mark((function e(t){var n,r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cd(t);case 4:n=e.sent,r=n.authorizedDomains,i=jn(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!pd(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:nu(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function pd(e){var t=hu(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!hd.test(r))return!1;if(fd.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var vd=new vu(3e4,6e4);function yd(){var e=Of().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=qe(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var md=null;function gd(e){return md=md||function(e){return new Promise((function(t,n){var r,i,a;function o(){yd(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){yd(),n(ru(e,"network-request-failed"))},timeout:vd.get()})}if(null===(i=null===(r=Of().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Of().gapi)||void 0===a?void 0:a.load)){var s=rh("iframefcb");return Of()[s]=function(){gapi.load?o():n(ru(e,"network-request-failed"))},nh("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw md=null,e}))}(e),md}var kd=new vu(5e3,15e3),bd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _d(e){var t=e.config;su(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?yu(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:os},i=wd.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(po(r).slice(1))}function xd(e){return Ed.apply(this,arguments)}function Ed(){return Ed=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gd(t);case 2:return n=e.sent,su(r=Of().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:_d(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bd,dontclear:!0},(function(e){return new Promise(function(){var n=Ur(Wr().mark((function n(r,i){var a,o,s;return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Of().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ru(t,"network-request-failed"),o=Of().setTimeout((function(){i(a)}),kd.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ed.apply(this,arguments)}var Id={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Td="_blank",Sd="http://localhost",Cd=function(){function e(t){Be(this,e),this.window=t,this.associatedEvent=null}return We(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(bM){}}}]),e}();function Nd(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},Id),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Ka().toLowerCase();n&&(s=uc(c)?Td:n),oc(c)&&(t=t||Sd,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=Me(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(pc(c)&&"_self"!==s)return Rd(t||"",s),new Cd(null);var f=window.open(t||"",s,l);su(f,e,"popup-blocked");try{f.focus()}catch(bM){}return new Cd(f)}function Rd(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Ad="__/auth/handler",Pd="emulator/auth/handler";function Dd(e,t,n,r,i,a){su(e.config.authDomain,e,"auth-domain-config-required"),su(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:os,eventId:i};if(t instanceof ol){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",co(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(a||{});s<u.length;s++){var c=Me(u[s],2),l=c[0],f=c[1];o[l]=f}}if(t instanceof sl){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ad);return yu(t,Pd)}(e),"?").concat(po(d).slice(1))}var Od="webStorageSupport",Ld=function(){function e(){Be(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Nf,this._completeRedirectFn=nd}return We(e,[{key:"_openPopup",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){var a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return cu(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Dd(t,n,r,hu(),i),e.abrupt("return",Nd(t,o,Pf()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Dd(t,n,r,hu(),i),Of().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(cu(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xd(t);case 2:return n=e.sent,r=new od(t),n.register("authEvent",(function(e){return su(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Od,{type:Od},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),nu(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return dd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return yc()||sc()||dc()}}]),e}(),Md=Ld,Fd=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this,"phone")).credential=e,r}return We(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return wu(e,"POST","/v2/accounts/mfaEnrollment:finalize",bu(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return wu(e,"POST","/v2/accounts/mfaSignIn:finalize",bu(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Be(this,e),this.factorId=t}return We(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return uu("unexpected MultiFactorSessionType")}}}]),e}()),jd=function(){function e(){Be(this,e)}return We(e,null,[{key:"assertion",value:function(e){return Fd._fromCredential(e)}}]),e}();jd.FACTOR_ID="phone";var Ud,Vd="@firebase/auth",qd="0.19.10",Bd=function(){function e(t){Be(this,e),this.auth=t,this.internalListeners=new Map}return We(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){su(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function zd(){return window}Ud="Browser",Zo(new No("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){su(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),su(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Ud,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mc(Ud)},i=new gc(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(fu);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Zo(new No("auth-internal",(function(e){return function(e){return new Bd(e)}(kc(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),hs(Vd,qd,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ud)),hs(Vd,qd,"esm2017");function Wd(e,t,n){return Hd.apply(this,arguments)}function Hd(){return Hd=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zd(),o=a.BuildInfo,cu(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Xd(n.sessionId);case 4:return s=e.sent,u={},dc()?u.ibi=o.packageName:lc()?u.apn=o.packageName:nu(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Dd(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Kd(){return(Kd=Ur(Wr().mark((function e(t){var n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zd(),r=n.BuildInfo,i={},dc()?i.iosBundleId=r.packageName:lc()?i.androidPackageName=r.packageName:nu(t,"operation-not-supported-in-this-environment"),e.next=5,cd(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gd(e){var t=zd().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Qd(e,t,n){return Yd.apply(this,arguments)}function Yd(){return Yd=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zd(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(ru(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),lc()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Yd.apply(this,arguments)}function $d(e){var t,n,r,i,a,o,s,u,c,l,f=zd();su("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),su("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),su("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),su("function"===typeof(null===(u=null===(s=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),su("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Xd(e){return Jd.apply(this,arguments)}function Jd(){return(Jd=Ur(Wr().mark((function e(t){var n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zd(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(e){if(cu(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var ep=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return We(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),At(Nt(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(od);function tp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:op(),postBody:null,tenantId:e.tenantId,error:ru(e,"no-auth-event")}}function np(e,t){return sp()._set(up(e),t)}function rp(e){return ip.apply(this,arguments)}function ip(){return(ip=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sp()._get(up(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,sp()._remove(up(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ap(e,t){var n,r,i=function(e){var t=cp(e),n=t.link?decodeURIComponent(t.link):void 0,r=cp(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return cp(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=cp(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(bM){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?ru(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function op(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function sp(){return fu(Sf)}function up(e){return rc("authEvent",e.config.apiKey,e.name)}function cp(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=Pe(t=n)||Ve(t)||Oe(t)||Le();r[0];return vo(r.slice(1).join("?"))}var lp=function(){function e(){Be(this,e),this._redirectPersistence=Nf,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=nd}return We(e,[{key:"_initialize",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new ep(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){nu(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){var a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $d(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Vh.clear(),e.next=10,this._originValidation(t);case 10:return o=tp(t,r,i),e.next=13,np(t,o);case 13:return e.next=15,Wd(t,o,n);case 15:return s=e.sent,e.next=18,Gd(s);case 18:return u=e.sent,e.abrupt("return",Qd(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Kd.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=zd(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rp(e);case 2:t.onEvent(hp());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Ur(Wr().mark((function n(r){var i,a;return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,rp(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ap(i,r.url)),t.onEvent(a||hp());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");zd().handleOpenURL=function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(bM){console.error(bM)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),fp=lp;function hp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ru("no-auth-event")}}function dp(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function pp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return!("file:"!==dp()&&"ionic:"!==dp()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function vp(){return Xa()&&11===(null===document||void 0===document?void 0:document.documentMode)}function yp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return/Edge\/\d+/.test(e)}function mp(){try{var e=self.localStorage,t=Pf();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka();return vp()||yp(e)}()||Za()}catch(bM){return gp()&&Za()}return!1}function gp(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function kp(){return("http:"===dp()||"https:"===dp()||Ya()||pp())&&!($a()||Qa())&&mp()&&!gp()}function bp(){return pp()&&"undefined"!==typeof document}function wp(){return _p.apply(this,arguments)}function _p(){return(_p=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(bp()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xp={LOCAL:"local",NONE:"none",SESSION:"session"},Ep=su,Ip="persistence";function Tp(e,t){Ep(Object.values(xp).includes(t),e,"invalid-persistence-type"),$a()?Ep(t!==xp.SESSION,e,"unsupported-persistence-type"):Qa()?Ep(t===xp.NONE,e,"unsupported-persistence-type"):gp()?Ep(t===xp.NONE||t===xp.LOCAL&&Za(),e,"unsupported-persistence-type"):Ep(t===xp.NONE||mp(),e,"unsupported-persistence-type")}function Sp(e){return Cp.apply(this,arguments)}function Cp(){return(Cp=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Np(),r=rc(Ip,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(bM){return null}}var Rp=su,Ap=function(){function e(){Be(this,e),this.browserResolver=fu(Md),this.cordovaResolver=fu(fp),this.underlyingResolver=null,this._redirectPersistence=Nf,this._completeRedirectFn=nd}return We(e,[{key:"_initialize",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return bp()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Rp(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wp();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Pp(e){return e.unwrap()}function Dp(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new jp(e,function(e,t){var n,r=xo(e),i=t;return su(t.customData.operationType,r,"argument-error"),su(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),bf._fromError(r,i)}(e,t));else if(r){var i=Op(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Op(e){var t=(e instanceof eo?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof eo)&&"temporaryProof"in t&&"phoneNumber"in t)return Ih.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Bs)return null;switch(r){case qs:n=ll;break;case Us:n=cl;break;case Vs:n=fl;break;case zs:n=pl;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?hl._create(r,s):$c._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new ul(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof eo?n.credentialFromError(e):n.credentialFromResult(e)}function Lp(e,t){return t.catch((function(t){throw t instanceof eo&&Dp(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Op(t)),additionalUserInfo:gf(e),user:Up.getOrCreate(r)}}))}function Mp(e,t){return Fp.apply(this,arguments)}function Fp(){return(Fp=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Lp(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jp=function(){function e(t,n){Be(this,e),this.resolver=n,this.auth=t.wrapped()}return We(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Lp(Pp(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Up=function(){function e(t){Be(this,e),this._delegate=t,this.multiFactor=function(e){var t=xo(e);return xf.has(t)||xf.set(t,_f._fromUser(t)),xf.get(t)}(t)}return We(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lp(this.auth,Ll(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Mp(this.auth,kh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lp(this.auth,Fh(this._delegate,t,Ap)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sp(kc(this.auth));case 2:return e.abrupt("return",Jh(this._delegate,t,Ap));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lp(this.auth,Fl(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Mp(this.auth,function(e,t,n){return wh.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Lp(this.auth,function(e,t,n){return Mh.apply(this,arguments)}(this._delegate,e,Ap))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sp(kc(this.auth));case 2:return e.abrupt("return",$h(this._delegate,t,Ap));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return af.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xl(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return lf(xo(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return lf(xo(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Eh.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return cf.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return of.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Up.USER_MAP=new WeakMap;var Vp=su,qp=function(){function e(t,n){if(Be(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Vp(r,"invalid-api-key",{appName:t.name}),Vp(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ap:void 0;this._delegate=n.initialize({options:{persistence:zp(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Xs),this.linkUnderlyingAuth()}return We(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Up.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){wc(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Gl.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ql(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Kl.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lp(this._delegate,Xl(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return rf.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=il.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vp(kp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ed(this._delegate,Ap);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Lp(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){kc(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Bp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Bp(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Zl.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Hl.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tp(this._delegate,t),e.t0=t,e.next=e.t0===xp.SESSION?4:e.t0===xp.LOCAL?6:e.t0===xp.NONE?11:13;break;case 4:return n=Nf,e.abrupt("break",14);case 6:return e.next=8,fu(Jf)._isAvailable();case 8:return r=e.sent,n=r?Jf:Sf,e.abrupt("break",14);case 11:return n=nc,e.abrupt("break",14);case 13:return e.abrupt("return",nu("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Lp(this._delegate,function(e){return kl.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Lp(this._delegate,Dl(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Lp(this._delegate,function(e,t){return ql.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Lp(this._delegate,function(e,t,n){return Dl(xo(e),al.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Lp(this._delegate,function(e,t,n){return ef.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Mp(this._delegate,function(e,t,n){return gh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vp(kp(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Lp(this._delegate,Oh(this._delegate,t,Ap)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Vp(kp(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Sp(this._delegate);case 3:return e.abrupt("return",Qh(this._delegate,t,Ap));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return $l.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Bp(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Up.getOrCreate(e))},error:t,complete:n}}function zp(e,t){var n=function(e,t){var n=Np();if(!n)return[];var r=rc(Ip,e,t);switch(n.getItem(r)){case xp.NONE:return[nc];case xp.LOCAL:return[Jf,Nf];case xp.SESSION:return[Nf];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Jf)||n.push(Jf),"undefined"!==typeof window)for(var r=0,i=[Sf,Nf];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(nc)||n.push(nc),n}qp.Persistence=xp;var Wp=function(){function e(){Be(this,e),this.providerId="phone",this._delegate=new Ih(Pp(Ms.auth()))}return We(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Ih.credential(e,t)}}]),e}();Wp.PHONE_SIGN_IN_METHOD=Ih.PHONE_SIGN_IN_METHOD,Wp.PROVIDER_ID=Ih.PROVIDER_ID;var Hp,Kp=su,Gp=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ms.app();Be(this,e),Kp(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new vh(t,n,i.auth()),this.type=this._delegate.type}return We(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Hp=Ms).INTERNAL.registerComponent(new No("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new qp(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ws,PASSWORD_RESET:Hs,RECOVER_EMAIL:Ks,REVERT_SECOND_FACTOR_ADDITION:Gs,VERIFY_AND_CHANGE_EMAIL:Qs,VERIFY_EMAIL:Ys}},EmailAuthProvider:al,FacebookAuthProvider:cl,GithubAuthProvider:fl,GoogleAuthProvider:ll,OAuthProvider:ul,SAMLAuthProvider:dl,PhoneAuthProvider:Wp,PhoneMultiFactorGenerator:jd,RecaptchaVerifier:Gp,TwitterAuthProvider:pl,Auth:qp,AuthCredential:Ec,Error:eo}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Hp.registerVersion("@firebase/auth-compat","0.2.10");var Qp,Yp="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},$p={},Xp=Xp||{},Jp=Yp||self;function Zp(){}function ev(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function tv(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var nv="closure_uid_"+(1e9*Math.random()>>>0),rv=0;function iv(e,t,n){return e.call.apply(e.bind,arguments)}function av(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ov(e,t,n){return(ov=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?iv:av).apply(null,arguments)}function sv(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function uv(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function cv(){this.s=this.s,this.o=this.o}var lv={};cv.prototype.s=!1,cv.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,nv)&&e[nv]||(e[nv]=++rv)}(this);delete lv[e]}},cv.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var fv=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},hv=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function dv(e){return Array.prototype.concat.apply([],arguments)}function pv(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function vv(e){return/^[\s\xa0]*$/.test(e)}var yv,mv=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function gv(e,t){return-1!=e.indexOf(t)}function kv(e,t){return e<t?-1:e>t?1:0}e:{var bv=Jp.navigator;if(bv){var wv=bv.userAgent;if(wv){yv=wv;break e}}yv=""}function _v(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xv(e){var t={};for(var n in e)t[n]=e[n];return t}var Ev="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Iv(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Ev.length;a++)n=Ev[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Tv(e){return Tv[" "](e),e}Tv[" "]=Zp;var Sv,Cv=gv(yv,"Opera"),Nv=gv(yv,"Trident")||gv(yv,"MSIE"),Rv=gv(yv,"Edge"),Av=Rv||Nv,Pv=gv(yv,"Gecko")&&!(gv(yv.toLowerCase(),"webkit")&&!gv(yv,"Edge"))&&!(gv(yv,"Trident")||gv(yv,"MSIE"))&&!gv(yv,"Edge"),Dv=gv(yv.toLowerCase(),"webkit")&&!gv(yv,"Edge");function Ov(){var e=Jp.document;return e?e.documentMode:void 0}e:{var Lv="",Mv=function(){var e=yv;return Pv?/rv:([^\);]+)(\)|;)/.exec(e):Rv?/Edge\/([\d\.]+)/.exec(e):Nv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Dv?/WebKit\/(\S+)/.exec(e):Cv?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Mv&&(Lv=Mv?Mv[1]:""),Nv){var Fv=Ov();if(null!=Fv&&Fv>parseFloat(Lv)){Sv=String(Fv);break e}}Sv=Lv}var jv,Uv={};function Vv(){return function(e){var t=Uv;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=mv(String(Sv)).split("."),n=mv("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=kv(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||kv(0==a[2].length,0==o[2].length)||kv(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Jp.document&&Nv){var qv=Ov();jv=qv||(parseInt(Sv,10)||void 0)}else jv=void 0;var Bv=jv,zv=function(){if(!Jp.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jp.addEventListener("test",Zp,t),Jp.removeEventListener("test",Zp,t)}catch(n){}return e}();function Wv(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Hv(e,t){if(Wv.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Pv){e:{try{Tv(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Kv[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Hv.Z.h.call(this)}}Wv.prototype.h=function(){this.defaultPrevented=!0},uv(Hv,Wv);var Kv={2:"touch",3:"pen",4:"mouse"};Hv.prototype.h=function(){Hv.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Gv="closure_listenable_"+(1e6*Math.random()|0),Qv=0;function Yv(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qv,this.ca=this.fa=!1}function $v(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Xv(e){this.src=e,this.g={},this.h=0}function Jv(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=fv(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&($v(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Zv(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Xv.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Zv(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Yv(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var ey="closure_lm_"+(1e6*Math.random()|0),ty={};function ny(e,t,n,r,i){if(r&&r.once)return iy(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)ny(e,t[a],n,r,i);return null}return n=fy(n),e&&e[Gv]?e.N(t,n,tv(r)?!!r.capture:!!r,i):ry(e,t,n,!1,r,i)}function ry(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=tv(i)?!!i.capture:!!i,s=cy(e);if(s||(e[ey]=s=new Xv(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=uy;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zv||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sy(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function iy(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)iy(e,t[a],n,r,i);return null}return n=fy(n),e&&e[Gv]?e.O(t,n,tv(r)?!!r.capture:!!r,i):ry(e,t,n,!0,r,i)}function ay(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)ay(e,t[a],n,r,i);else r=tv(r)?!!r.capture:!!r,n=fy(n),e&&e[Gv]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Zv(a=e.g[t],n,r,i))&&($v(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=cy(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Zv(t,n,r,i)),(n=-1<e?t[e]:null)&&oy(n))}function oy(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Gv])Jv(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sy(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=cy(t))?(Jv(n,e),0==n.h&&(n.src=null,t[ey]=null)):$v(e)}}}function sy(e){return e in ty?ty[e]:ty[e]="on"+e}function uy(e,t){if(e.ca)e=!0;else{t=new Hv(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&oy(e),e=n.call(r,t)}return e}function cy(e){return(e=e[ey])instanceof Xv?e:null}var ly="__closure_events_fn_"+(1e9*Math.random()>>>0);function fy(e){return"function"===typeof e?e:(e[ly]||(e[ly]=function(t){return e.handleEvent(t)}),e[ly])}function hy(){cv.call(this),this.i=new Xv(this),this.P=this,this.I=null}function dy(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Wv(t,e);else if(t instanceof Wv)t.target=t.target||e;else{var i=t;Iv(t=new Wv(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=py(o,r,!0,t)&&i}if(i=py(o=t.g=e,r,!0,t)&&i,i=py(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=py(o=t.g=n[a],r,!1,t)&&i}function py(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Jv(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}uv(hy,cv),hy.prototype[Gv]=!0,hy.prototype.removeEventListener=function(e,t,n,r){ay(this,e,t,n,r)},hy.prototype.M=function(){if(hy.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)$v(n[r]);delete t.g[e],t.h--}}this.I=null},hy.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},hy.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var vy=Jp.JSON.stringify;function yy(){var e=Ey,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var my,gy=function(){function e(){Be(this,e),this.h=this.g=null}return We(e,[{key:"add",value:function(e,t){var n=ky.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ky=new(function(){function e(t,n){Be(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return We(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new by}),(function(e){return e.reset()})),by=function(){function e(){Be(this,e),this.next=this.g=this.h=null}return We(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function wy(e){Jp.setTimeout((function(){throw e}),0)}function _y(e,t){my||function(){var e=Jp.Promise.resolve(void 0);my=function(){e.then(Iy)}}(),xy||(my(),xy=!0),Ey.add(e,t)}var xy=!1,Ey=new gy;function Iy(){for(var e;e=yy();){try{e.h.call(e.g)}catch(n){wy(n)}var t=ky;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}xy=!1}function Ty(e,t){hy.call(this),this.h=e||1,this.g=t||Jp,this.j=ov(this.kb,this),this.l=Date.now()}function Sy(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Cy(e,t,n){if("function"===typeof e)n&&(e=ov(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ov(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jp.setTimeout(e,t||0)}function Ny(e){e.g=Cy((function(){e.g=null,e.i&&(e.i=!1,Ny(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}uv(Ty,hy),(Qp=Ty.prototype).da=!1,Qp.S=null,Qp.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),dy(this,"tick"),this.da&&(Sy(this),this.start()))}},Qp.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qp.M=function(){Ty.Z.M.call(this),Sy(this),delete this.g};var Ry=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return We(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ny(this)}},{key:"M",value:function(){At(Nt(n.prototype),"M",this).call(this),this.g&&(Jp.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(cv);function Ay(e){cv.call(this),this.h=e,this.g={}}uv(Ay,cv);var Py=[];function Dy(e,t,n,r){Array.isArray(n)||(n&&(Py[0]=n.toString()),n=Py);for(var i=0;i<n.length;i++){var a=ny(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Oy(e){_v(e.g,(function(e,t){this.g.hasOwnProperty(t)&&oy(e)}),e),e.g={}}function Ly(){this.g=!0}function My(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return vy(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}Ay.prototype.M=function(){Ay.Z.M.call(this),Oy(this)},Ay.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ly.prototype.Aa=function(){this.g=!1},Ly.prototype.info=function(){};var Fy={},jy=null;function Uy(){return jy=jy||new hy}function Vy(e){Wv.call(this,Fy.Ma,e)}function qy(e){var t=Uy();dy(t,new Vy(t,e))}function By(e,t){Wv.call(this,Fy.STAT_EVENT,e),this.stat=t}function zy(e){var t=Uy();dy(t,new By(t,e))}function Wy(e,t){Wv.call(this,Fy.Na,e),this.size=t}function Hy(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jp.setTimeout((function(){e()}),t)}Fy.Ma="serverreachability",uv(Vy,Wv),Fy.STAT_EVENT="statevent",uv(By,Wv),Fy.Na="timingevent",uv(Wy,Wv);var Ky={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Gy={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qy(){}function Yy(e){return e.h||(e.h=e.i())}function $y(){}Qy.prototype.h=null;var Xy,Jy={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Zy(){Wv.call(this,"d")}function em(){Wv.call(this,"c")}function tm(){}function nm(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Ay(this),this.P=im,e=Av?125:void 0,this.W=new Ty(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new rm}function rm(){this.i=null,this.g="",this.h=!1}uv(Zy,Wv),uv(em,Wv),uv(tm,Qy),tm.prototype.g=function(){return new XMLHttpRequest},tm.prototype.i=function(){return{}},Xy=new tm;var im=45e3,am={},om={};function sm(e,t,n){e.K=1,e.v=Rm(Em(t)),e.s=n,e.U=!0,um(e,null)}function um(e,t){e.F=Date.now(),hm(e),e.A=Em(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),zm(n.h,"t",r),e.C=0,n=e.l.H,e.h=new rm,e.g=Hg(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ry(ov(e.Ia,e,e.g),e.O)),Dy(e.V,e.g,"readystatechange",e.gb),t=e.H?xv(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),qy(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function cm(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function lm(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=fm(e,n))==om){4==t&&(e.o=4,zy(14),i=!1),My(e.j,e.m,null,"[Incomplete Response]");break}if(r==am){e.o=4,zy(15),My(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}My(e.j,e.m,r,null),mm(e,r)}cm(e)&&r!=om&&r!=am&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,zy(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Fg(t),t.L=!0,zy(11))):(My(e.j,e.m,n,"[Invalid Chunked Response]"),ym(e),vm(e))}function fm(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?om:(n=Number(t.substring(n,r)),isNaN(n)?am:(r+=1)+n>t.length?om:(t=t.substr(r,n),e.C=r+n,t))}function hm(e){e.Y=Date.now()+e.P,dm(e,e.P)}function dm(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Hy(ov(e.eb,e),t)}function pm(e){e.B&&(Jp.clearTimeout(e.B),e.B=null)}function vm(e){0==e.l.G||e.I||Vg(e.l,e)}function ym(e){pm(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Sy(e.W),Oy(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function mm(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Xm(n.i,e)))if(n.I=e.N,!e.J&&Xm(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Ug(n),Cg(n)}Mg(n),zy(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Hy(ov(n.ab,n),6e3));if(1>=$m(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Bg(n,11)}else if((e.J||n.g==e)&&Ug(n),!vv(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(gv(l,"spdy")||gv(l,"quic")||gv(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Jm(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Nm(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Wg(r,r.H?r.la:null,r.W),d.J){Zm(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(pm(p),hm(p)),r.g=d}else Lg(r);0<n.l.length&&Ag(n)}else"stop"!=a[0]&&"close"!=a[0]||Bg(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Bg(n,7):Sg(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}qy(4)}catch(a){}}function gm(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ev(e)||"string"===typeof e)hv(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(ev(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(ev(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function km(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof km)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function bm(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];wm(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)wm(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function wm(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Qp=nm.prototype).setTimeout=function(e){this.P=e},Qp.gb=function(e){e=e.target;var t=this.L;t&&3==_g(e)?t.l():this.Ia(e)},Qp.Ia=function(e){try{if(e==this.g)e:{var t=_g(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Av||this.g&&(this.h.h||this.g.ga()||xg(this.g)))){this.I||4!=t||7==n||qy(8==n||0>=r?3:2),pm(this);var i=this.g.ba();this.N=i;t:if(cm(this)){var a=xg(this.g);e="";var o=a.length,s=4==_g(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ym(this),vm(this);var u="";break t}this.h.i=new Jp.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vv(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,zy(12),ym(this),vm(this);break e}My(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,mm(this,i)}this.U?(lm(this,t,u),Av&&this.i&&3==t&&(Dy(this.V,this.W,"tick",this.fb),this.W.start())):(My(this.j,this.m,u,null),mm(this,u)),4==t&&ym(this),this.i&&!this.I&&(4==t?Vg(this.l,this):(this.i=!1,hm(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,zy(12)):(this.o=0,zy(13)),ym(this),vm(this)}}}catch(t){}},Qp.fb=function(){if(this.g){var e=_g(this.g),t=this.g.ga();this.C<t.length&&(pm(this),lm(this,e,t),this.i&&4!=e&&hm(this))}},Qp.cancel=function(){this.I=!0,ym(this)},Qp.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(qy(3),zy(17)),ym(this),this.o=2,vm(this)):dm(this,this.Y-e)},(Qp=km.prototype).R=function(){bm(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Qp.T=function(){return bm(this),this.g.concat()},Qp.get=function(e,t){return wm(this.h,e)?this.h[e]:t},Qp.set=function(e,t){wm(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Qp.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var _m=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function xm(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof xm){this.g=void 0!==t?t:e.g,Im(this,e.j),this.s=e.s,Tm(this,e.i),Sm(this,e.m),this.l=e.l,t=e.h;var n=new Um;n.i=t.i,t.g&&(n.g=new km(t.g),n.h=t.h),Cm(this,n),this.o=e.o}else e&&(n=String(e).match(_m))?(this.g=!!t,Im(this,n[1]||"",!0),this.s=Am(n[2]||""),Tm(this,n[3]||"",!0),Sm(this,n[4]),this.l=Am(n[5]||"",!0),Cm(this,n[6]||"",!0),this.o=Am(n[7]||"")):(this.g=!!t,this.h=new Um(null,this.g))}function Em(e){return new xm(e)}function Im(e,t,n){e.j=n?Am(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Tm(e,t,n){e.i=n?Am(t,!0):t}function Sm(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cm(e,t,n){t instanceof Um?(e.h=t,function(e,t){t&&!e.j&&(Vm(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(qm(this,t),zm(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Pm(t,Fm)),e.h=new Um(t,e.g))}function Nm(e,t,n){e.h.set(t,n)}function Rm(e){return Nm(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Am(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pm(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Dm),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Dm(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}xm.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pm(t,Om,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pm(t,Om,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pm(n,"/"==n.charAt(0)?Mm:Lm,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pm(n,jm)),e.join("")};var Om=/[#\/\?@]/g,Lm=/[#\?:]/g,Mm=/[#\?]/g,Fm=/[#\?@]/g,jm=/#/g;function Um(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vm(e){e.g||(e.g=new km,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function qm(e,t){Vm(e),t=Wm(e,t),wm(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,wm((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&bm(e)))}function Bm(e,t){return Vm(e),t=Wm(e,t),wm(e.g.h,t)}function zm(e,t,n){qm(e,t),0<n.length&&(e.i=null,e.g.set(Wm(e,t),pv(n)),e.h+=n.length)}function Wm(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qp=Um.prototype).add=function(e,t){Vm(this),this.i=null,e=Wm(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qp.forEach=function(e,t){Vm(this),this.g.forEach((function(n,r){hv(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Qp.T=function(){Vm(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Qp.R=function(e){Vm(this);var t=[];if("string"===typeof e)Bm(this,e)&&(t=dv(t,this.g.get(Wm(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=dv(t,e[n])}return t},Qp.set=function(e,t){return Vm(this),this.i=null,Bm(this,e=Wm(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qp.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Qp.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Hm=We((function e(t,n){Be(this,e),this.h=t,this.g=n}));function Km(e){this.l=e||Qm,Jp.PerformanceNavigationTiming?e=0<(e=Jp.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jp.g&&Jp.g.Ea&&Jp.g.Ea()&&Jp.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Gm,Qm=10;function Ym(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $m(e){return e.h?1:e.g?e.g.size:0}function Xm(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jm(e,t){e.g?e.g.add(t):e.h=t}function Zm(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eg(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=jn(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return pv(e.i)}function tg(){}function ng(){this.g=new tg}function rg(e,t,n){var r=n||"";try{gm(e,(function(e,n){var i=e;tv(e)&&(i=vy(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(bM){throw t.push(r+"type="+encodeURIComponent("_badmap")),bM}}function ig(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function ag(e){this.l=e.$b||null,this.j=e.ib||!1}function og(e,t){hy.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=sg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Km.prototype.cancel=function(){if(this.i=eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=jn(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},tg.prototype.stringify=function(e){return Jp.JSON.stringify(e,void 0)},tg.prototype.parse=function(e){return Jp.JSON.parse(e,void 0)},uv(ag,Qy),ag.prototype.g=function(){return new og(this.l,this.j)},ag.prototype.i=(Gm={},function(){return Gm}),uv(og,hy);var sg=0;function ug(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function cg(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lg(e)}function lg(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qp=og.prototype).open=function(e,t){if(this.readyState!=sg)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lg(this)},Qp.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Jp).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Qp.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cg(this)),this.readyState=sg},Qp.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lg(this)),this.g&&(this.readyState=3,lg(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Jp.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ug(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Qp.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?cg(this):lg(this),3==this.readyState&&ug(this)}},Qp.Ua=function(e){this.g&&(this.response=this.responseText=e,cg(this))},Qp.Ta=function(e){this.g&&(this.response=e,cg(this))},Qp.ha=function(){this.g&&cg(this)},Qp.setRequestHeader=function(e,t){this.v.append(e,t)},Qp.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qp.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(og.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var fg=Jp.JSON.parse;function hg(e){hy.call(this),this.headers=new km,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=dg,this.K=this.L=!1}uv(hg,hy);var dg="",pg=/^https?$/i,vg=["POST","PUT"];function yg(e){return"content-type"==e.toLowerCase()}function mg(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gg(e),bg(e)}function gg(e){e.D||(e.D=!0,dy(e,"complete"),dy(e,"error"))}function kg(e){if(e.h&&"undefined"!=typeof Xp&&(!e.C[1]||4!=_g(e)||2!=e.ba()))if(e.v&&4==_g(e))Cy(e.Fa,0,e);else if(dy(e,"readystatechange"),4==_g(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(_m)[1]||null;if(!a&&Jp.self&&Jp.self.location){var o=Jp.self.location.protocol;a=o.substr(0,o.length-1)}i=!pg.test(a?a.toLowerCase():"")}t=i}if(t)dy(e,"complete"),dy(e,"success");else{e.m=6;try{var s=2<_g(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",gg(e)}}finally{bg(e)}}}function bg(e,t){if(e.g){wg(e);var n=e.g,r=e.C[0]?Zp:null;e.g=null,e.C=null,t||dy(e,"ready");try{n.onreadystatechange=r}catch(bM){}}}function wg(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Jp.clearTimeout(e.A),e.A=null)}function _g(e){return e.g?e.g.readyState:0}function xg(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case dg:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Eg(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return _v(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Nm(e,t,n))}function Ig(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tg(e){this.za=0,this.l=[],this.h=new Ly,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ig("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ig("baseRetryDelayMs",5e3,e),this.$a=Ig("retryDelaySeedMs",1e4,e),this.Ya=Ig("forwardChannelMaxRetries",2,e),this.ra=Ig("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Km(e&&e.concurrentRequestLimit),this.Ca=new ng,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Sg(e){if(Ng(e),3==e.G){var t=e.V++,n=Em(e.F);Nm(n,"SID",e.J),Nm(n,"RID",t),Nm(n,"TYPE","terminate"),Dg(e,n),(t=new nm(e,e.h,t,void 0)).K=2,t.v=Rm(Em(n)),n=!1,Jp.navigator&&Jp.navigator.sendBeacon&&(n=Jp.navigator.sendBeacon(t.v.toString(),"")),!n&&Jp.Image&&((new Image).src=t.v,n=!0),n||(t.g=Hg(t.l,null),t.g.ea(t.v)),t.F=Date.now(),hm(t)}zg(e)}function Cg(e){e.g&&(Fg(e),e.g.cancel(),e.g=null)}function Ng(e){Cg(e),e.u&&(Jp.clearTimeout(e.u),e.u=null),Ug(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Jp.clearTimeout(e.m),e.m=null)}function Rg(e,t){e.l.push(new Hm(e.Za++,t)),3==e.G&&Ag(e)}function Ag(e){Ym(e.i)||e.m||(e.m=!0,_y(e.Ha,e),e.C=0)}function Pg(e,t){var n;n=t?t.m:e.V++;var r=Em(e.F);Nm(r,"SID",e.J),Nm(r,"RID",n),Nm(r,"AID",e.U),Dg(e,r),e.o&&e.s&&Eg(r,e.o,e.s),n=new nm(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Og(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Jm(e.i,n),sm(n,r,t)}function Dg(e,t){e.j&&gm({},(function(e,n){Nm(t,n,e)}))}function Og(e,t,n){n=Math.min(e.l.length,n);var r=e.j?ov(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{rg(l,o,"req"+c+"_")}catch(kk){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Lg(e){e.g||e.u||(e.Y=1,_y(e.Ga,e),e.A=0)}function Mg(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Hy(ov(e.Ga,e),qg(e,e.A)),e.A++,!0)}function Fg(e){null!=e.B&&(Jp.clearTimeout(e.B),e.B=null)}function jg(e){e.g=new nm(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Em(e.oa);Nm(t,"RID","rpc"),Nm(t,"SID",e.J),Nm(t,"CI",e.N?"0":"1"),Nm(t,"AID",e.U),Dg(e,t),Nm(t,"TYPE","xmlhttp"),e.o&&e.s&&Eg(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Rm(Em(t)),n.s=null,n.U=!0,um(n,e)}function Ug(e){null!=e.v&&(Jp.clearTimeout(e.v),e.v=null)}function Vg(e,t){var n=null;if(e.g==t){Ug(e),Fg(e),e.g=null;var r=2}else{if(!Xm(e.i,t))return;n=t.D,Zm(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;dy(r=Uy(),new Wy(r,n,t,i)),Ag(e)}else Lg(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!($m(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Hy(ov(e.Ha,e,t),qg(e,e.C)),e.C++,!0))}(e,t)||2==r&&Mg(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Bg(e,5);break;case 4:Bg(e,10);break;case 3:Bg(e,6);break;default:Bg(e,2)}}function qg(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Bg(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=ov(e.jb,e);n||(n=new xm("//www.google.com/images/cleardot.gif"),Jp.location&&"http"==Jp.location.protocol||Im(n,"https"),Rm(n)),function(e,t){var n=new Ly;if(Jp.Image){var r=new Image;r.onload=sv(ig,n,r,"TestLoadImage: loaded",!0,t),r.onerror=sv(ig,n,r,"TestLoadImage: error",!1,t),r.onabort=sv(ig,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=sv(ig,n,r,"TestLoadImage: timeout",!1,t),Jp.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else zy(2);e.G=0,e.j&&e.j.va(t),zg(e),Ng(e)}function zg(e){e.G=0,e.I=-1,e.j&&(0==eg(e.i).length&&0==e.l.length||(e.i.i.length=0,pv(e.l),e.l.length=0),e.j.ua())}function Wg(e,t,n){var r=function(e){return e instanceof xm?Em(e):new xm(e,void 0)}(n);if(""!=r.i)t&&Tm(r,t+"."+r.i),Sm(r,r.m);else{var i=Jp.location;r=function(e,t,n,r){var i=new xm(null,void 0);return e&&Im(i,e),t&&Tm(i,t),n&&Sm(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&_v(e.aa,(function(e,t){Nm(r,t,e)})),t=e.D,n=e.sa,t&&n&&Nm(r,t,n),Nm(r,"VER",e.ma),Dg(e,r),r}function Hg(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new hg(new ag({ib:!0})):new hg(e.qa)).L=e.H,t}function Kg(){}function Gg(){if(Nv&&!(10<=Number(Bv)))throw Error("Environmental error: no available transport.")}function Qg(e,t){hy.call(this),this.g=new Tg(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!vv(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vv(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Xg(this)}function Yg(e){Zy.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function $g(){em.call(this),this.status=1}function Xg(e){this.g=e}(Qp=hg.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xy.g(),this.C=this.u?Yy(this.u):Yy(Xy),this.g.onreadystatechange=ov(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void mg(this,a)}e=n||"";var i=new km(this.headers);r&&gm(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=yg,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Jp.FormData&&e instanceof Jp.FormData,!(0<=fv(vg,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{wg(this),0<this.B&&((this.K=function(e){return Nv&&Vv()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ov(this.pa,this)):this.A=Cy(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){mg(this,a)}},Qp.pa=function(){"undefined"!=typeof Xp&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,dy(this,"timeout"),this.abort(8))},Qp.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,dy(this,"complete"),dy(this,"abort"),bg(this))},Qp.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bg(this,!0)),hg.Z.M.call(this)},Qp.Fa=function(){this.s||(this.F||this.v||this.l?kg(this):this.cb())},Qp.cb=function(){kg(this)},Qp.ba=function(){try{return 2<_g(this)?this.g.status:-1}catch(Gm){return-1}},Qp.ga=function(){try{return this.g?this.g.responseText:""}catch(Gm){return""}},Qp.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),fg(t)}},Qp.Da=function(){return this.m},Qp.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qp=Tg.prototype).ma=8,Qp.G=1,Qp.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Qp.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new nm(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Iv(n=xv(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Og(this,t,r),Nm(i=Em(this.F),"RID",e),Nm(i,"CVER",22),this.D&&Nm(i,"X-HTTP-Session-Id",this.D),Dg(this,i),this.o&&n&&Eg(i,this.o,n),Jm(this.i,t),this.Ra&&Nm(i,"TYPE","init"),this.ja?(Nm(i,"$req",r),Nm(i,"SID","null"),t.$=!0,sm(t,i,null)):sm(t,i,r),this.G=2}}else 3==this.G&&(e?Pg(this,e):0==this.l.length||Ym(this.i)||Pg(this))},Qp.Ga=function(){if(this.u=null,jg(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Hy(ov(this.bb,this),e)}},Qp.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zy(10),Cg(this),jg(this))},Qp.ab=function(){null!=this.v&&(this.v=null,Cg(this),Mg(this),zy(19))},Qp.jb=function(e){e?(this.h.info("Successfully pinged google.com"),zy(2)):(this.h.info("Failed to ping google.com"),zy(1))},(Qp=Kg.prototype).xa=function(){},Qp.wa=function(){},Qp.va=function(){},Qp.ua=function(){},Qp.Oa=function(){},Gg.prototype.g=function(e,t){return new Qg(e,t)},uv(Qg,hy),Qg.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),_y(ov(e.hb,e,t))),zy(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Wg(e,null,e.W),Ag(e)},Qg.prototype.close=function(){Sg(this.g)},Qg.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Rg(this.g,t)}else this.v?((t={}).__data__=vy(e),Rg(this.g,t)):Rg(this.g,e)},Qg.prototype.M=function(){this.g.j=null,delete this.j,Sg(this.g),delete this.g,Qg.Z.M.call(this)},uv(Yg,Zy),uv($g,em),uv(Xg,Kg),Xg.prototype.xa=function(){dy(this.g,"a")},Xg.prototype.wa=function(e){dy(this.g,new Yg(e))},Xg.prototype.va=function(e){dy(this.g,new $g(e))},Xg.prototype.ua=function(){dy(this.g,"b")},Gg.prototype.createWebChannel=Gg.prototype.g,Qg.prototype.send=Qg.prototype.u,Qg.prototype.open=Qg.prototype.m,Qg.prototype.close=Qg.prototype.close,Ky.NO_ERROR=0,Ky.TIMEOUT=8,Ky.HTTP_ERROR=6,Gy.COMPLETE="complete",$y.EventType=Jy,Jy.OPEN="a",Jy.CLOSE="b",Jy.ERROR="c",Jy.MESSAGE="d",hy.prototype.listen=hy.prototype.N,hg.prototype.listenOnce=hg.prototype.O,hg.prototype.getLastError=hg.prototype.La,hg.prototype.getLastErrorCode=hg.prototype.Da,hg.prototype.getStatus=hg.prototype.ba,hg.prototype.getResponseJson=hg.prototype.Qa,hg.prototype.getResponseText=hg.prototype.ga,hg.prototype.send=hg.prototype.ea;var Jg=$p.createWebChannelTransport=function(){return new Gg},Zg=$p.getStatEventTarget=function(){return Uy()},ek=$p.ErrorCode=Ky,tk=$p.EventType=Gy,nk=$p.Event=Fy,rk=$p.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ik=$p.FetchXmlHttpFactory=ag,ak=$p.WebChannel=$y,ok=$p.XhrIo=hg,sk="@firebase/firestore",uk=function(){function e(t){Be(this,e),this.uid=t}return We(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();uk.UNAUTHENTICATED=new uk(null),uk.GOOGLE_CREDENTIALS=new uk("google-credentials-uid"),uk.FIRST_PARTY=new uk("first-party-uid"),uk.MOCK_USER=new uk("mock-user");var ck="9.6.9",lk=new Bo("@firebase/firestore");function fk(){return lk.logLevel}function hk(e){if(lk.logLevel<=Do.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vk);lk.debug.apply(lk,["Firestore (".concat(ck,"): ").concat(e)].concat(qe(i)))}}function dk(e){if(lk.logLevel<=Do.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vk);lk.error.apply(lk,["Firestore (".concat(ck,"): ").concat(e)].concat(qe(i)))}}function pk(e){if(lk.logLevel<=Do.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(vk);lk.warn.apply(lk,["Firestore (".concat(ck,"): ").concat(e)].concat(qe(i)))}}function vk(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function yk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ck,") INTERNAL ASSERTION FAILED: ")+e;throw dk(t),new Error(t)}function mk(e,t){e||yk()}function gk(e,t){return e}var kk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bk=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return We(n)}(eo),wk=We((function e(){var t=this;Be(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),_k=We((function e(t,n){Be(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),xk=function(){function e(){Be(this,e)}return We(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uk.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Ek=function(){function e(t){Be(this,e),this.token=t,this.changeListener=null}return We(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ik=function(){function e(t){Be(this,e),this.t=t,this.currentUser=uk.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return We(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new wk;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new wk,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){hk("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(hk("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new wk)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(hk("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(mk("string"==typeof n.accessToken),new _k(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return mk(null===e||"string"==typeof e),new uk(e)}}]),e}(),Tk=We((function e(t,n,r){Be(this,e),this.type="FirstParty",this.user=uk.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Sk=function(){function e(t,n,r){Be(this,e),this.h=t,this.l=n,this.m=r}return We(e,[{key:"getToken",value:function(){return Promise.resolve(new Tk(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uk.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ck=We((function e(t){Be(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Nk=function(){function e(t){Be(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return We(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&hk("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,hk("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){hk("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):hk("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(mk("string"==typeof t.token),e.p=t.token,new Ck(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Rk=function(){function e(t,n){var r=this;Be(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return We(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Ak(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Rk.A=-1;var Pk=function(){function e(){Be(this,e)}return We(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Ak(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Dk(e,t){return e<t?-1:e>t?1:0}function Ok(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Lk(e){return e+"\0"}var Mk=function(){function e(t,n){if(Be(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new bk(kk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bk(kk.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bk(kk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bk(kk.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return We(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Dk(this.nanoseconds,e.nanoseconds):Dk(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Fk=function(){function e(t){Be(this,e),this.timestamp=t}return We(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Mk(0,0))}}]),e}();function jk(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Uk(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Vk(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var qk=function(){function e(t,n,r){Be(this,e),void 0===n?n=0:n>t.length&&yk(),void 0===r?r=t.length-n:r>t.length-n&&yk(),this.segments=t,this.offset=n,this.len=r}return We(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Bk=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new bk(kk.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,qe(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qk),zk=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Wk=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return zk.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new bk(kk.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new bk(kk.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new bk(kk.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new bk(kk.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(qk),Hk=function(){function e(t){Be(this,e),this.fields=t,t.sort(Wk.comparator)}return We(e,[{key:"covers",value:function(e){var t,n=jn(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ok(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var Kk=function(e){function t(e){Be(this,t),this.binaryString=e}return We(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Dk(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Kk.EMPTY_BYTE_STRING=new Kk("");var Gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qk(e){if(mk(!!e),"string"==typeof e){var t=0,n=Gk.exec(e);if(mk(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Yk(e.seconds),nanos:Yk(e.nanos)}}function Yk(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $k(e){return"string"==typeof e?Kk.fromBase64String(e):Kk.fromUint8Array(e)}function Xk(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jk(e){var t=e.mapValue.fields.__previous_value__;return Xk(t)?Jk(t):t}function Zk(e){var t=Qk(e.mapValue.fields.__local_write_time__.timestampValue);return new Mk(t.seconds,t.nanos)}var eb=We((function e(t,n,r,i,a,o,s,u){Be(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),tb=function(){function e(t,n){Be(this,e),this.projectId=t,this.database=n||"(default)"}return We(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function nb(e){return null==e}function rb(e){return 0===e&&1/e==-1/0}function ib(e){return"number"==typeof e&&Number.isInteger(e)&&!rb(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ab=function(){function e(t){Be(this,e),this.path=t}return We(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Bk.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Bk.fromString(t))}},{key:"fromName",value:function(t){return new e(Bk.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Bk.emptyPath())}},{key:"comparator",value:function(e,t){return Bk.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Bk(t.slice()))}}]),e}(),ob={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sb={nullValue:"NULL_VALUE"};function ub(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xk(e)?4:_b(e)?9:10:yk()}function cb(e,t){if(e===t)return!0;var n=ub(e);if(n!==ub(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zk(e).isEqual(Zk(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Qk(e.timestampValue),r=Qk(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $k(e.bytesValue).isEqual($k(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Yk(e.geoPointValue.latitude)===Yk(t.geoPointValue.latitude)&&Yk(e.geoPointValue.longitude)===Yk(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Yk(e.integerValue)===Yk(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Yk(e.doubleValue),r=Yk(t.doubleValue);return n===r?rb(n)===rb(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ok(e.arrayValue.values||[],t.arrayValue.values||[],cb);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(jk(n)!==jk(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cb(n[i],r[i])))return!1;return!0}(e,t);default:return yk()}}function lb(e,t){return void 0!==(e.values||[]).find((function(e){return cb(e,t)}))}function fb(e,t){if(e===t)return 0;var n=ub(e),r=ub(t);if(n!==r)return Dk(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dk(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Yk(e.integerValue||e.doubleValue),r=Yk(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hb(e.timestampValue,t.timestampValue);case 4:return hb(Zk(e),Zk(t));case 5:return Dk(e.stringValue,t.stringValue);case 6:return function(e,t){var n=$k(e),r=$k(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Dk(n[i],r[i]);if(0!==a)return a}return Dk(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Dk(Yk(e.latitude),Yk(t.latitude));return 0!==n?n:Dk(Yk(e.longitude),Yk(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=fb(n[i],r[i]);if(a)return a}return Dk(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=Dk(r[o],a[o]);if(0!==s)return s;var u=fb(n[r[o]],i[a[o]]);if(0!==u)return u}return Dk(r.length,a.length)}(e.mapValue,t.mapValue);default:throw yk()}}function hb(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Dk(e,t);var n=Qk(e),r=Qk(t),i=Dk(n.seconds,r.seconds);return 0!==i?i:Dk(n.nanos,r.nanos)}function db(e){return pb(e)}function pb(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Qk(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?$k(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ab.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=jn(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=pb(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=jn(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(pb(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):yk();var t,n}function vb(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function yb(e){return!!e&&"integerValue"in e}function mb(e){return!!e&&"arrayValue"in e}function gb(e){return!!e&&"nullValue"in e}function kb(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function bb(e){return!!e&&"mapValue"in e}function wb(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Uk(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=wb(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=wb(e.arrayValue.values[r]);return n}return Object.assign({},e)}function _b(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xb(e,t){return void 0===e?t:void 0===t||fb(e,t)>0?e:t}function Eb(e,t){return void 0===e?t:void 0===t||fb(e,t)<0?e:t}var Ib=function(){function e(t){Be(this,e),this.value=t}return We(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!bb(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=wb(t)}},{key:"setAll",value:function(e){var t=this,n=Wk.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=wb(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());bb(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cb(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];bb(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Uk(t,(function(t,n){return e[t]=n}));var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(wb(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Tb(e){var t=[];return Uk(e.fields,(function(e,n){var r=new Wk([e]);if(bb(n)){var i=Tb(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=jn(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new Hk(t)}var Sb=function(){function e(t,n,r,i,a,o){Be(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return We(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ib.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ib.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Fk.min(),Fk.min(),Ib.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Fk.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Fk.min(),Ib.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Fk.min(),Ib.empty(),2)}}]),e}(),Cb=We((function e(t,n,r,i){Be(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Nb(e){return e.fields.find((function(e){return 2===e.kind}))}function Rb(e){return e.fields.filter((function(e){return 2!==e.kind}))}Cb.UNKNOWN_ID=-1;var Ab=We((function e(t,n){Be(this,e),this.fieldPath=t,this.kind=n})),Pb=function(){function e(t,n){Be(this,e),this.sequenceNumber=t,this.offset=n}return We(e,null,[{key:"empty",value:function(){return new e(0,Db.min())}}]),e}(),Db=function(){function e(t,n,r){Be(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return We(e,null,[{key:"min",value:function(){return new e(Fk.min(),ab.empty(),-1)}}]),e}(),Ob=We((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Be(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function Lb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new Ob(e,t,n,r,i,a,o)}function Mb(e){var t=gk(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+db(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),nb(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return db(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return db(e)})).join(",")),t.P=n}return t.P}function Fb(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Xb(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!cb(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Zb(e.startAt,t.startAt)&&Zb(e.endAt,t.endAt)}function jb(e){return ab.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ub(e,t){return e.filters.filter((function(e){return e instanceof Vb&&e.field.isEqual(t)}))}var Vb=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return We(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(fb(t,this.value)):null!==t&&ub(this.value)===ub(t)&&this.v(fb(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return yk()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new qb(e,t,r):"array-contains"===t?new Hb(e,r):"in"===t?new Kb(e,r):"not-in"===t?new Gb(e,r):"array-contains-any"===t?new Qb(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new Bb(e,n):new zb(e,n)}}]),n}(function(){return We((function e(){Be(this,e)}))}()),qb=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this,e,r,i)).key=ab.fromName(i.referenceValue),a}return We(n,[{key:"matches",value:function(e){var t=ab.comparator(e.key,this.key);return this.v(t)}}]),n}(Vb),Bb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,"in",r)).keys=Wb("in",r),i}return We(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vb),zb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,"not-in",r)).keys=Wb("not-in",r),i}return We(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Vb);function Wb(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ab.fromName(e.referenceValue)}))}var Hb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"array-contains",r)}return We(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return mb(t)&&lb(t.arrayValue,this.value)}}]),n}(Vb),Kb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"in",r)}return We(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&lb(this.value.arrayValue,t)}}]),n}(Vb),Gb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"not-in",r)}return We(n,[{key:"matches",value:function(e){if(lb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!lb(this.value.arrayValue,t)}}]),n}(Vb),Qb=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,"array-contains-any",r)}return We(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!mb(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return lb(t.value.arrayValue,e)}))}}]),n}(Vb),Yb=We((function e(t,n){Be(this,e),this.position=t,this.inclusive=n})),$b=We((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Be(this,e),this.field=t,this.dir=n}));function Xb(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Jb(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ab.comparator(ab.fromName(o.referenceValue),n.key):fb(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Zb(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cb(e.position[n],t.position[n]))return!1;return!0}var ew=We((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Be(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function tw(e,t,n,r,i,a,o,s){return new ew(e,t,n,r,i,a,o,s)}function nw(e){return new ew(e)}function rw(e){return!nb(e.limit)&&"F"===e.limitType}function iw(e){return!nb(e.limit)&&"L"===e.limitType}function aw(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ow(e){var t,n=jn(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function sw(e){return null!==e.collectionGroup}function uw(e){var t=gk(e);if(null===t.D){t.D=[];var n=ow(t),r=aw(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new $b(n)),t.D.push(new $b(Wk.keyField(),"asc"));else{var i,a=!1,o=jn(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new $b(Wk.keyField(),u))}}}return t.D}function cw(e){var t=gk(e);if(!t.C)if("F"===t.limitType)t.C=Lb(t.path,t.collectionGroup,uw(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=jn(uw(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new $b(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new Yb(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new Yb(t.startAt.position,!t.startAt.inclusive):null;t.C=Lb(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function lw(e,t,n){return new ew(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function fw(e,t){return Fb(cw(e),cw(t))&&e.limitType===t.limitType}function hw(e){return"".concat(Mb(cw(e)),"|lt:").concat(e.limitType)}function dw(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(db(t.value));var t})).join(", "),"]")),nb(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return db(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return db(e)})).join(",")),"Target(".concat(t,")")}(cw(e)),"; limitType=").concat(e.limitType,")")}function pw(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ab.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=jn(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=jn(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Jb(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,uw(e),t))&&!(e.endAt&&!function(e,t,n){var r=Jb(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,uw(e),t))}(e,t)}function vw(e){return function(t,n){var r,i=!1,a=jn(uw(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=yw(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function yw(e,t,n){var r=e.field.isKeyField()?ab.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fb(r,i):yk()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return yk()}}function mw(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rb(t)?"-0":t}}function gw(e){return{integerValue:""+e}}function kw(e,t){return ib(t)?gw(t):mw(e,t)}var bw=We((function e(){Be(this,e),this._=void 0}));function ww(e,t,n){return e instanceof Ew?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Iw?Tw(e,t):e instanceof Sw?Cw(e,t):function(e,t){var n=xw(e,t),r=Rw(n)+Rw(e.k);return yb(n)&&yb(e.k)?gw(r):mw(e.M,r)}(e,t)}function _w(e,t,n){return e instanceof Iw?Tw(e,t):e instanceof Sw?Cw(e,t):n}function xw(e,t){return e instanceof Nw?yb(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ew=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n)}(bw),Iw=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).elements=e,r}return We(n)}(bw);function Tw(e,t){var n,r=Aw(t),i=jn(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return cb(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sw=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).elements=e,r}return We(n)}(bw);function Cw(e,t){var n,r=Aw(t),i=jn(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!cb(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Nw=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).M=e,i.k=r,i}return We(n)}(bw);function Rw(e){return Yk(e.integerValue||e.doubleValue)}function Aw(e){return mb(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Pw=We((function e(t,n){Be(this,e),this.field=t,this.transform=n}));var Dw=We((function e(t,n){Be(this,e),this.version=t,this.transformResults=n})),Ow=function(){function e(t,n){Be(this,e),this.updateTime=t,this.exists=n}return We(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Lw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Mw=We((function e(){Be(this,e)}));function Fw(e,t,n){e instanceof Bw?function(e,t,n){var r=e.value.clone(),i=Hw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof zw?function(e,t,n){if(Lw(e.precondition,t)){var r=Hw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Ww(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jw(e,t,n){e instanceof Bw?function(e,t,n){if(Lw(e.precondition,t)){var r=e.value.clone(),i=Kw(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(qw(t),r).setHasLocalMutations()}}(e,t,n):e instanceof zw?function(e,t,n){if(Lw(e.precondition,t)){var r=Kw(e.fieldTransforms,n,t),i=t.data;i.setAll(Ww(e)),i.setAll(r),t.convertToFoundDocument(qw(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){Lw(e.precondition,t)&&t.convertToNoDocument(Fk.min())}(e,t)}function Uw(e,t){var n,r=null,i=jn(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=xw(a.transform,o||null);null!=s&&(null==r&&(r=Ib.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function Vw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ok(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Iw&&t instanceof Iw||e instanceof Sw&&t instanceof Sw?Ok(e.elements,t.elements,cb):e instanceof Nw&&t instanceof Nw?cb(e.k,t.k):e instanceof Ew&&t instanceof Ew}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function qw(e){return e.isFoundDocument()?e.version:Fk.min()}var Bw=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Be(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return We(n)}(Mw),zw=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Be(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return We(n)}(Mw);function Ww(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Hw(e,t,n){var r=new Map;mk(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,_w(o,s,n[i]))}return r}function Kw(e,t,n){var r,i=new Map,a=jn(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,ww(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Gw,Qw,Yw=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return We(n)}(Mw),$w=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return We(n)}(Mw),Xw=We((function e(t){Be(this,e),this.count=t}));function Jw(e){switch(e){default:return yk();case kk.CANCELLED:case kk.UNKNOWN:case kk.DEADLINE_EXCEEDED:case kk.RESOURCE_EXHAUSTED:case kk.INTERNAL:case kk.UNAVAILABLE:case kk.UNAUTHENTICATED:return!1;case kk.INVALID_ARGUMENT:case kk.NOT_FOUND:case kk.ALREADY_EXISTS:case kk.PERMISSION_DENIED:case kk.FAILED_PRECONDITION:case kk.ABORTED:case kk.OUT_OF_RANGE:case kk.UNIMPLEMENTED:case kk.DATA_LOSS:return!0}}function Zw(e){if(void 0===e)return dk("GRPC error has no .code"),kk.UNKNOWN;switch(e){case Gw.OK:return kk.OK;case Gw.CANCELLED:return kk.CANCELLED;case Gw.UNKNOWN:return kk.UNKNOWN;case Gw.DEADLINE_EXCEEDED:return kk.DEADLINE_EXCEEDED;case Gw.RESOURCE_EXHAUSTED:return kk.RESOURCE_EXHAUSTED;case Gw.INTERNAL:return kk.INTERNAL;case Gw.UNAVAILABLE:return kk.UNAVAILABLE;case Gw.UNAUTHENTICATED:return kk.UNAUTHENTICATED;case Gw.INVALID_ARGUMENT:return kk.INVALID_ARGUMENT;case Gw.NOT_FOUND:return kk.NOT_FOUND;case Gw.ALREADY_EXISTS:return kk.ALREADY_EXISTS;case Gw.PERMISSION_DENIED:return kk.PERMISSION_DENIED;case Gw.FAILED_PRECONDITION:return kk.FAILED_PRECONDITION;case Gw.ABORTED:return kk.ABORTED;case Gw.OUT_OF_RANGE:return kk.OUT_OF_RANGE;case Gw.UNIMPLEMENTED:return kk.UNIMPLEMENTED;case Gw.DATA_LOSS:return kk.DATA_LOSS;default:return yk()}}(Qw=Gw||(Gw={}))[Qw.OK=0]="OK",Qw[Qw.CANCELLED=1]="CANCELLED",Qw[Qw.UNKNOWN=2]="UNKNOWN",Qw[Qw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qw[Qw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qw[Qw.NOT_FOUND=5]="NOT_FOUND",Qw[Qw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qw[Qw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qw[Qw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qw[Qw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qw[Qw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qw[Qw.ABORTED=10]="ABORTED",Qw[Qw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qw[Qw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qw[Qw.INTERNAL=13]="INTERNAL",Qw[Qw.UNAVAILABLE=14]="UNAVAILABLE",Qw[Qw.DATA_LOSS=15]="DATA_LOSS";var e_=function(){function e(t,n){Be(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return We(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=Me(r.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){i.e(u)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Uk(this.inner,(function(t,n){var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=Me(r.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){i.e(u)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return Vk(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),t_=function(){function e(t,n){Be(this,e),this.comparator=t,this.root=n||r_.EMPTY}return We(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,r_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,r_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new n_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new n_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new n_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new n_(this.root,e,this.comparator,!0)}}]),e}(),n_=function(){function e(t,n,r,i){Be(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return We(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),r_=function(){function e(t,n,r,i,a){Be(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return We(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw yk();if(this.right.isRed())throw yk();var e=this.left.check();if(e!==this.right.check())throw yk();return e+(this.isRed()?0:1)}}]),e}();r_.EMPTY=null,r_.RED=!0,r_.BLACK=!1,r_.EMPTY=new(function(){function e(){Be(this,e),this.size=0}return We(e,[{key:"key",get:function(){throw yk()}},{key:"value",get:function(){throw yk()}},{key:"color",get:function(){throw yk()}},{key:"left",get:function(){throw yk()}},{key:"right",get:function(){throw yk()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new r_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var i_=function(){function e(t){Be(this,e),this.comparator=t,this.data=new t_(this.comparator)}return We(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new a_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new a_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),a_=function(){function e(t){Be(this,e),this.iter=t}return We(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function o_(e){return e.hasNext()?e.getNext():void 0}var s_=new t_(ab.comparator);function u_(){return s_}var c_=new t_(ab.comparator);function l_(){return c_}function f_(){return new e_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var h_=new t_(ab.comparator),d_=new i_(ab.comparator);function p_(){for(var e=d_,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var v_=new i_(Dk);function y_(){return v_}var m_=function(){function e(t,n,r,i,a){Be(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return We(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,g_.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Fk.min(),r,y_(),u_(),p_())}}]),e}(),g_=function(){function e(t,n,r,i,a){Be(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return We(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Kk.EMPTY_BYTE_STRING,n,p_(),p_(),p_())}}]),e}(),k_=We((function e(t,n,r,i){Be(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.$=i})),b_=We((function e(t,n){Be(this,e),this.targetId=t,this.F=n})),w_=We((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Kk.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Be(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),__=function(){function e(){Be(this,e),this.B=0,this.L=I_(),this.q=Kk.EMPTY_BYTE_STRING,this.U=!1,this.K=!0}return We(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.q}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.q=e)}},{key:"H",value:function(){var e=p_(),t=p_(),n=p_();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:yk()}})),new g_(this.q,this.U,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=I_()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.U=!0}}]),e}(),x_=function(){function e(t){Be(this,e),this.nt=t,this.st=new Map,this.it=u_(),this.rt=E_(),this.ot=new i_(Dk)}return We(e,[{key:"at",value:function(e){var t,n=jn(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.ct(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var i,a=jn(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.$)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:yk()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(jb(i))if(0===n){var a=new ab(i.path);this.ct(t,a,Sb.newNoDocument(a,Fk.min()))}else mk(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&jb(a.target)){var o=new ab(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Sb.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=p_();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new m_(e,n,this.ot,this.it,r);return this.it=u_(),this.rt=E_(),this.ot=new i_(Dk),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new __,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new i_(Dk),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||hk("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new __),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function E_(){return new t_(ab.comparator)}function I_(){return new t_(ab.comparator)}var T_={asc:"ASCENDING",desc:"DESCENDING"},S_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C_=We((function e(t,n){Be(this,e),this.databaseId=t,this.N=n}));function N_(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function R_(e,t){return e.N?t.toBase64():t.toUint8Array()}function A_(e,t){return N_(e,t.toTimestamp())}function P_(e){return mk(!!e),Fk.fromTimestamp(function(e){var t=Qk(e);return new Mk(t.seconds,t.nanos)}(e))}function D_(e,t){return function(e){return new Bk(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function O_(e){var t=Bk.fromString(e);return mk(rx(t)),t}function L_(e,t){return D_(e.databaseId,t.path)}function M_(e,t){var n=O_(t);if(n.get(1)!==e.databaseId.projectId)throw new bk(kk.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bk(kk.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ab(V_(n))}function F_(e,t){return D_(e.databaseId,t)}function j_(e){var t=O_(e);return 4===t.length?Bk.emptyPath():V_(t)}function U_(e){return new Bk(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function V_(e){return mk(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function q_(e,t,n){return{name:L_(e,t),fields:n.value.mapValue.fields}}function B_(e,t,n){var r=M_(e,t.name),i=P_(t.updateTime),a=new Ib({mapValue:{fields:t.fields}}),o=Sb.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function z_(e,t){return"found"in t?function(e,t){mk(!!t.found),t.found.name,t.found.updateTime;var n=M_(e,t.found.name),r=P_(t.found.updateTime),i=new Ib({mapValue:{fields:t.found.fields}});return Sb.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){mk(!!t.missing),mk(!!t.readTime);var n=M_(e,t.missing),r=P_(t.readTime);return Sb.newNoDocument(n,r)}(e,t):yk()}function W_(e,t){var n;if(t instanceof Bw)n={update:q_(e,t.key,t.value)};else if(t instanceof Yw)n={delete:L_(e,t.key)};else if(t instanceof zw)n={update:q_(e,t.key,t.data),updateMask:nx(t.fieldMask)};else{if(!(t instanceof $w))return yk();n={verify:L_(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ew)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Iw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Sw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nw)return{fieldPath:t.field.canonicalString(),increment:n.k};throw yk()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:A_(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:yk()}(e,t.precondition)),n}function H_(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Ow.updateTime(P_(e.updateTime)):void 0!==e.exists?Ow.exists(e.exists):Ow.none()}(t.currentDocument):Ow.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)mk("REQUEST_TIME"===t.setToServerValue),n=new Ew;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Iw(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Sw(i)}else"increment"in t?n=new Nw(e,t.increment):yk();var a=Wk.fromServerFormat(t.fieldPath);return new Pw(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=M_(e,t.update.name),a=new Ib({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Hk(t.map((function(e){return Wk.fromServerFormat(e)})))}(t.updateMask);return new zw(i,a,o,n,r)}return new Bw(i,a,n,r)}if(t.delete){var s=M_(e,t.delete);return new Yw(s,n)}if(t.verify){var u=M_(e,t.verify);return new $w(u,n)}return yk()}function K_(e,t){return{documents:[F_(e,t.path)]}}function G_(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=F_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=F_(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(kb(e.value))return{unaryFilter:{field:J_(e.field),op:"IS_NAN"}};if(gb(e.value))return{unaryFilter:{field:J_(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kb(e.value))return{unaryFilter:{field:J_(e.field),op:"IS_NOT_NAN"}};if(gb(e.value))return{unaryFilter:{field:J_(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:J_(e.field),op:X_(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:J_(e.field),direction:$_(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||nb(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Q_(e){var t=j_(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mk(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Y_(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new $b(Z_(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return nb(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Yb(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Yb(n,t)}(n.endAt)),tw(t,i,s,o,u,"F",c,l)}function Y_(e){return e?void 0!==e.unaryFilter?[tx(e)]:void 0!==e.fieldFilter?[ex(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Y_(e)})).reduce((function(e,t){return e.concat(t)})):yk():[]}function $_(e){return T_[e]}function X_(e){return S_[e]}function J_(e){return{fieldPath:e.canonicalString()}}function Z_(e){return Wk.fromServerFormat(e.fieldPath)}function ex(e){return Vb.create(Z_(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return yk()}}(e.fieldFilter.op),e.fieldFilter.value)}function tx(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Z_(e.unaryFilter.field);return Vb.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Z_(e.unaryFilter.field);return Vb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Z_(e.unaryFilter.field);return Vb.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Z_(e.unaryFilter.field);return Vb.create(i,"!=",{nullValue:"NULL_VALUE"});default:return yk()}}function nx(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function rx(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ix(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=ox(t)),t=ax(e.get(n),t);return ox(t)}function ax(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function ox(e){return e+"\x01\x01"}function sx(e){var t=e.length;if(mk(t>=2),2===t)return mk("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Bk.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&yk(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:yk()}a=o+2}return new Bk(r)}var ux=["userId","batchId"];function cx(e,t){return[e,ix(t)]}function lx(e,t,n){return[e,ix(t),n]}var fx={},hx=["parentPath","readTime"],dx=["canonicalId","targetId"],px=["targetId","path"],vx=["path","targetId"],yx=["collectionId","parent"],mx=["indexId","uid"],gx=["uid","sequenceNumber"],kx=["indexId","uid","arrayValue","directionalValue","documentKey"],bx=["indexId","uid","documentKey"],wx=["userId","collectionPath","documentId"],_x=["userId","collectionPath","largestBatchId"],xx=["userId","collectionGroup","largestBatchId"],Ex=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Ix=[].concat(qe(Ex),["documentOverlays"]),Tx=[].concat(qe(Ix),["indexConfiguration","indexState","indexEntries"]),Sx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Cx=function(){function e(){Be(this,e),this.onCommittedListeners=[]}return We(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),Nx=function(){function e(t){var n=this;Be(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return We(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&yk(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=jn(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Rx=function(){function e(t,n){var r=this;Be(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new wk,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new Dx(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=jx(e.target.error);r.At.reject(new Dx(t,n))}}return We(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(hk("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Lx(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Dx(n,t)}}}]),e}(),Ax=function(){function e(t,n,r){Be(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Ka())&&dk("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return We(e,[{key:"Nt",value:function(){var e=Ur(Wr().mark((function e(t){var n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return hk("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Dx(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new bk(kk.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new bk(kk.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Dx(t,n))},i.onupgradeneeded=function(e){hk("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){hk("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ur(Wr().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Wr().mark((function e(){var n,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=Rx.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),Nx.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,hk("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return hk("SimpleDb","Removing database:",e),Mx(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!Za())return!1;if(e.St())return!0;var t=Ka(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Px=function(){function e(t){Be(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return We(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"qt",value:function(e){this.Bt=e}},{key:"delete",value:function(){return Mx(this.$t.delete())}}]),e}(),Dx=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,kk.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return We(n)}(bk);function Ox(e){return"IndexedDbTransactionError"===e.name}var Lx=function(){function e(t){Be(this,e),this.store=t}return We(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(hk("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(hk("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Mx(n)}},{key:"add",value:function(e){return hk("SimpleDb","ADD",this.store.name,e,e),Mx(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Mx(this.store.get(e)).next((function(n){return void 0===n&&(n=null),hk("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return hk("SimpleDb","DELETE",this.store.name,e),Mx(this.store.delete(e))}},{key:"count",value:function(){return hk("SimpleDb","COUNT",this.store.name),Mx(this.store.count())}},{key:"Ut",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Nx((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Nx((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){hk("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new Nx((function(n,r){t.onerror=function(e){var t=jx(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new Nx((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Px(i),o=t(i.primaryKey,i.value,a);if(o instanceof Nx){var s=o.catch((function(e){return a.done(),Nx.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return Nx.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Mx(e){return new Nx((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=jx(e.target.error);n(t)}}))}var Fx=!1;function jx(e){var t=Ax.Vt(Ka());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new bk("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Fx||(Fx=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ux=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return We(n)}(Cx);function Vx(e,t){var n=gk(e);return Ax.xt(n.Ht,t)}var qx=function(){function e(t,n,r,i){Be(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return We(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Fw(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=jn(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&jw(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=jn(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&jw(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Fk.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),p_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ok(this.mutations,e.mutations,(function(e,t){return Vw(e,t)}))&&Ok(this.baseMutations,e.baseMutations,(function(e,t){return Vw(e,t)}))}}]),e}(),Bx=function(){function e(t,n,r,i){Be(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return We(e,null,[{key:"from",value:function(t,n,r){mk(t.mutations.length===r.length);for(var i=h_,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),zx=function(){function e(t,n){Be(this,e),this.largestBatchId=t,this.mutation=n}return We(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Wx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Fk.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Fk.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Kk.EMPTY_BYTE_STRING;Be(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return We(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Hx=We((function e(t){Be(this,e),this.Jt=t}));function Kx(e,t){var n;if(t.document)n=B_(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ab.fromSegments(t.noDocument.path),i=Xx(t.noDocument.readTime);n=Sb.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return yk();var a=ab.fromSegments(t.unknownDocument.path),o=Xx(t.unknownDocument.version);n=Sb.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(Yx(t.readTime)),n}function Gx(e,t){var n=t.key.path.popLast().toArray(),r=Qx(t.readTime);if(t.isFoundDocument()){var i=function(e,t){return{name:L_(e,t.key),fields:t.data.value.mapValue.fields,updateTime:N_(e,t.version.toTimestamp())}}(e.Jt,t);return{document:i,hasCommittedMutations:t.hasCommittedMutations,readTime:r,parentPath:n}}if(t.isNoDocument()){var a=t.key.path.toArray(),o=t.hasCommittedMutations;return{noDocument:{path:a,readTime:$x(t.version)},hasCommittedMutations:o,readTime:r,parentPath:n}}return t.isUnknownDocument()?{unknownDocument:{path:t.key.path.toArray(),version:$x(t.version)},hasCommittedMutations:!0,readTime:r,parentPath:n}:yk()}function Qx(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Yx(e){var t=new Mk(e[0],e[1]);return Fk.fromTimestamp(t)}function $x(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Xx(e){var t=new Mk(e.seconds,e.nanoseconds);return Fk.fromTimestamp(t)}function Jx(e,t){for(var n=(t.baseMutations||[]).map((function(t){return H_(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return H_(e.Jt,t)})),s=Mk.fromMillis(t.localWriteTimeMs);return new qx(t.batchId,s,n,o)}function Zx(e){var t,n,r=Xx(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Xx(e.lastLimboFreeSnapshotVersion):Fk.min();return void 0!==e.query.documents?(mk(1===(n=e.query).documents.length),t=cw(nw(j_(n.documents[0])))):t=function(e){return cw(Q_(e))}(e.query),new Wx(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Kk.fromBase64String(e.resumeToken))}function eE(e,t){var n,r=$x(t.snapshotVersion),i=$x(t.lastLimboFreeSnapshotVersion);n=jb(t.target)?K_(e.Jt,t.target):G_(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Mb(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function tE(e){var t=Q_({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lw(t,t.limit,"L"):t}function nE(e,t){return new zx(t.largestBatchId,H_(e.Jt,t.overlayMutation))}function rE(e,t){var n=t.path.lastSegment();return[e,ix(t.path.popLast()),n]}var iE=function(){function e(){Be(this,e)}return We(e,[{key:"getBundleMetadata",value:function(e,t){return aE(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Xx(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return aE(e).put({bundleId:(n=t).id,createTime:$x(P_(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return oE(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:tE(t.bundledQuery),readTime:Xx(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return oE(e).put(function(e){return{name:e.name,readTime:$x(P_(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function aE(e){return Vx(e,"bundles")}function oE(e){return Vx(e,"namedQueries")}var sE=function(){function e(t,n){Be(this,e),this.M=t,this.userId=n}return We(e,[{key:"getOverlay",value:function(e,t){var n=this;return uE(e).get(rE(this.userId,t)).next((function(e){return e?nE(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new zx(t,a);i.push(r.Xt(e,o))})),Nx.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(ix(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(uE(e).Qt("collectionPathOverlayIndex",i))})),Nx.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=f_(),a=ix(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return uE(e).Ut("collectionPathOverlayIndex",o).next((function(e){var t,n=jn(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=nE(r.M,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=f_(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uE(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=nE(a.M,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return uE(e).put(function(e,t,n){var r=Me(rE(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:W_(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function uE(e){return Vx(e,"documentOverlays")}var cE=function(){function e(){Be(this,e)}return We(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yk(e.integerValue));else if("doubleValue"in e){var n=Yk(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),rb(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ae($k(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ue(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?_b(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):yk()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ue",value:function(e,t){var n=this;this.ne(t,37),ab.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function lE(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function fE(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=lE(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}cE.fe=new cE;var hE=function(){function e(){Be(this,e),this.buffer=new Uint8Array(1024),this.position=0}return We(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=jn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=jn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=fE(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=fE(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),dE=function(){function e(t){Be(this,e),this.De=t}return We(e,[{key:"ae",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),pE=function(){function e(t){Be(this,e),this.De=t}return We(e,[{key:"ae",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),vE=function(){function e(){Be(this,e),this.De=new hE,this.Ce=new dE(this.De),this.xe=new pE(this.De)}return We(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),yE=function(){function e(t,n,r,i){Be(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return We(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function mE(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=gE(e.arrayValue,t.arrayValue))?n:0!==(n=gE(e.directionalValue,t.directionalValue))?n:ab.comparator(e.documentKey,t.documentKey)}function gE(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var kE=function(){function e(t){Be(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=jn(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.$e=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return We(e,[{key:"Fe",value:function(e){var t=Nb(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Rb(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.$e){var a=n[r];if(!this.Le(this.$e,a)||!this.qe(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.qe(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=jn(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"qe",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),bE=function(){function e(){Be(this,e),this.Ue=new wE}return We(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ue.add(t),Nx.resolve()}},{key:"getCollectionParents",value:function(e,t){return Nx.resolve(this.Ue.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Nx.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Nx.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Nx.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return Nx.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return Nx.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Nx.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return Nx.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Nx.resolve()}}]),e}(),wE=function(){function e(){Be(this,e),this.index={}}return We(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new i_(Bk.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new i_(Bk.comparator)).toArray()}}]),e}(),_E=new Uint8Array(0),xE=function(){function e(t){Be(this,e),this.user=t,this.Ke=new wE,this.Ge=new e_((function(e){return Mb(e)}),(function(e,t){return Fb(e,t)})),this.uid=t.uid||""}return We(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:ix(i)};return EE(e).put(a)}return Nx.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Lk(t),""],!1,!0);return EE(e).Ut(r).next((function(e){var r,i=jn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(sx(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=TE(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=TE(e),r=SE(e),i=IE(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=IE(e),i=!0,a=new Map;return Nx.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=p_();return Nx.forEach(a,(function(i,a){var o;hk("IndexedDbIndexManager","Using index ".concat((o=i,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Mb(t)));var s=function(e,t){var n=Nb(t);if(void 0===n)return null;var r,i=jn(Ub(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),u=function(e,t){var n,r=new Map,i=jn(Rb(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=jn(Ub(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r,i=[],a=!0,o=jn(Rb(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,f=jn(Ub(e,u.fieldPath));try{for(f.s();!(s=f.n()).done;){var h=s.value,d=void 0,p=!0;switch(h.op){case"<":case"<=":d="nullValue"in(r=h.value)?sb:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?vb(tb.empty(),ab.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:yk();break;case"==":case"in":case">=":d=h.value;break;case">":d=h.value,p=!1;break;case"!=":case"not-in":d=sb}xb(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var y=e.startAt.position[v];xb(c,y)===y&&(c=y,l=e.startAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Yb(i,a)}(a,i),l=function(e,t){var n,r,i=[],a=!0,o=jn(Rb(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,f=jn(Ub(e,u.fieldPath));try{for(f.s();!(s=f.n()).done;){var h=s.value,d=void 0,p=!0;switch(h.op){case">=":case">":d="nullValue"in(r=h.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?vb(tb.empty(),ab.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?ob:yk(),p=!1;break;case"==":case"in":case"<=":d=h.value;break;case"<":d=h.value,p=!1;break;case"!=":case"not-in":d=ob}Eb(c,d)===d&&(c=d,l=p)}}catch(m){f.e(m)}finally{f.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var y=e.endAt.position[v];Eb(c,y)===y&&(c=y,l=e.endAt.inclusive);break}if(void 0===c)return null;i.push(c),a&&(a=l)}}catch(m){o.e(m)}finally{o.f()}return new Yb(i,a)}(a,i),f=n.je(i,a,c),h=n.je(i,a,l),d=n.We(i,a,u),p=n.ze(i.indexId,s,f,!!c&&c.inclusive,h,!!l&&l.inclusive,d);return Nx.forEach(p,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new ab(sx(t.documentKey)))}))}))}))})).next((function(){return e}))}return Nx.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=u/(null!=t?t.length:1),l=[],f=function(u){var f=t?s.He(t[u/c]):_E,h=n?s.Je(e,f,n[u%c],r):s.Ye(e),d=i?s.Xe(e,f,i[u%c],a):s.Ye(e+1);l.push.apply(l,qe(s.createRange(h,d,o.map((function(t){return s.Je(e,f,t,!0)})))))},h=0;h<u;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new yE(e,ab.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new yE(e,ab.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new yE(e,ab.empty(),_E,_E)}},{key:"getFieldIndex",value:function(e,t){var n=new kE(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.Fe(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new vE,i=jn(Rb(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);cE.fe.Zt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new vE;return cE.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new vE);var i,a=0,o=jn(Rb(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=jn(r);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(this.tn(t,u.fieldPath)&&mb(c))r=this.en(r,u,c);else{var h=f.Ne(u.kind);cE.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,i=qe(e),a=[],o=jn(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=jn(i);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=new vE;f.seed(l.Se()),cE.fe.Zt(u,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Vb&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=TE(e),i=SE(e);return(t?r.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.Ut()).next((function(e){var t=[];return Nx.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Pb(t.sequenceNumber,new Db(Xx(t.readTime),new ab(sx(t.documentKey)),t.largestBatchId)):Pb.empty(),r=e.fields.map((function(e){var t=Me(e,2),n=t[0],r=t[1];return new Ab(Wk.fromServerFormat(n),r)}));return new Cb(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Dk(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=TE(e),a=SE(e);return this.sn(e).next((function(e){return i.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Nx.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:$x(r.readTime),documentKey:ix(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Nx.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Nx.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Nx.forEach(a,(function(r){return n.rn(e,t,r).next((function(t){var a=n.on(i,r);return t.isEqual(a)?Nx.resolve():n.an(e,i,t,a)}))}))}))}))}},{key:"un",value:function(e,t,n){return IE(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:ix(t.key.path)})}},{key:"cn",value:function(e,t,n){return IE(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,ix(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=IE(e),i=new i_(mE);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,ix(t.path)])},(function(e,r){i=i.add(new yE(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"on",value:function(e,t){var n=new i_(mE),r=this.Ze(t,e);if(null==r)return n;var i=Nb(t);if(null!=i){var a=e.data.field(i.fieldPath);if(mb(a)){var o,s=jn(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new yE(t.indexId,e.key,this.He(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new yE(t.indexId,e.key,_E,r));return n}},{key:"an",value:function(e,t,n,r){var i=this;hk("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=o_(a),u=o_(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=o_(o)):l?(i(s),s=o_(a)):(s=o_(a),u=o_(o))}}(n,r,mE,(function(n){a.push(i.un(e,t,n))}),(function(n){a.push(i.cn(e,t,n))})),Nx.waitFor(a)}},{key:"sn",value:function(e){var t=1;return SE(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return mE(e,t)})).filter((function(e,t,n){return!t||0!==mE(e,n[t-1])}));var r=[];r.push(e);var i,a=jn(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=mE(o,e),u=mE(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function EE(e){return Vx(e,"collectionParents")}function IE(e){return Vx(e,"indexEntries")}function TE(e){return Vx(e,"indexConfiguration")}function SE(e){return Vx(e,"indexState")}var CE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NE=function(){function e(t,n,r){Be(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return We(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function RE(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){mk(1===s)})));var c,l=[],f=jn(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=lx(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Nx.waitFor(a).next((function(){return l}))}function AE(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw yk();t=e.noDocument}return JSON.stringify(t).length}NE.DEFAULT_COLLECTION_PERCENTILE=10,NE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,NE.DEFAULT=new NE(41943040,NE.DEFAULT_COLLECTION_PERCENTILE,NE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),NE.DISABLED=new NE(-1,0,0);var PE=function(){function e(t,n,r,i){Be(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.hn={}}return We(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return OE(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=LE(e),o=OE(e);return o.add({}).next((function(s){mk("number"==typeof s);var u,c=new qx(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return W_(e.Jt,t)})),i=n.mutations.map((function(t){return W_(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new i_((function(e,t){return Dk(e.canonicalString(),t.canonicalString())})),d=jn(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=lx(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,fx))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.hn[s]=c.keys()})),Nx.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return OE(e).get(t).next((function(e){return e?(mk(e.userId===n.userId),Jx(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?Nx.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return OE(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(mk(t.batchId>=r),a=Jx(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return OE(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return OE(e).Ut("userMutationsIndex",n).next((function(e){return e.map((function(e){return Jx(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=cx(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return LE(e).Wt({range:i},(function(r,i,o){var s=Me(r,3),u=s[0],c=s[1],l=s[2],f=sx(c);if(u===n.userId&&t.path.isEqual(f))return OE(e).get(l).next((function(e){if(!e)throw yk();mk(e.userId===n.userId),a.push(Jx(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new i_(Dk),i=[];return t.forEach((function(t){var a=cx(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=LE(e).Wt({range:o},(function(e,i,a){var o=Me(e,3),s=o[0],u=o[1],c=o[2],l=sx(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(s)})),Nx.waitFor(i).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=cx(this.userId,r),o=IDBKeyRange.lowerBound(a),s=new i_(Dk);return LE(e).Wt({range:o},(function(e,t,a){var o=Me(e,3),u=o[0],c=o[1],l=o[2],f=sx(c);u===n.userId&&r.isPrefixOf(f)?f.length===i&&(s=s.add(l)):a.done()})).next((function(){return n.fn(e,s)}))}},{key:"fn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(OE(e).get(t).next((function(e){if(null===e)throw yk();mk(e.userId===n.userId),r.push(Jx(n.M,e))})))})),Nx.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return RE(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),Nx.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Nx.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return LE(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=sx(e[1]);i.push(a)}else r.done()})).next((function(){mk(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return DE(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return ME(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return mk(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function DE(e,t,n){var r=cx(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return LE(e).Wt({range:a,jt:!0},(function(e,n,r){var a=Me(e,3),s=a[0],u=a[1];a[2];s===t&&u===i&&(o=!0),r.done()})).next((function(){return o}))}function OE(e){return Vx(e,"mutations")}function LE(e){return Vx(e,"documentMutations")}function ME(e){return Vx(e,"mutationQueues")}var FE=function(){function e(t){Be(this,e),this.wn=t}return We(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),jE=function(){function e(t,n){Be(this,e),this.referenceDelegate=t,this.M=n}return We(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new FE(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return Fk.fromTimestamp(new Mk(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return UE(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return mk(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return UE(e).Wt((function(o,s){var u=Zx(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return Nx.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return UE(e).Wt((function(e,n){var r=Zx(n);t(r)}))}},{key:"yn",value:function(e){return VE(e).get("targetGlobalKey").next((function(e){return mk(null!==e),e}))}},{key:"pn",value:function(e,t){return VE(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return UE(e).put(eE(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Mb(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return UE(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Zx(n);Fb(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=qE(e);return t.forEach((function(t){var o=ix(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Nx.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=qE(e);return Nx.forEach(t,(function(t){var a=ix(t.path);return Nx.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=qE(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=qE(e),i=p_();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=sx(e[1]),a=new ab(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=ix(t.path),r=IDBKeyRange.bound([n],[Lk(n)],!1,!0),i=0;return qE(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=Me(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return UE(e).get(t).next((function(e){return e?Zx(e):null}))}}]),e}();function UE(e){return Vx(e,"targets")}function VE(e){return Vx(e,"targetGlobal")}function qE(e){return Vx(e,"targetDocuments")}function BE(e){return zE.apply(this,arguments)}function zE(){return zE=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===kk.FAILED_PRECONDITION&&t.message===Sx){e.next=2;break}throw t;case 2:hk("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),zE.apply(this,arguments)}function WE(e,t){var n=Me(e,2),r=n[0],i=n[1],a=Me(t,2),o=a[0],s=a[1],u=Dk(r,o);return 0===u?Dk(i,s):u}var HE=function(){function e(t){Be(this,e),this.En=t,this.buffer=new i_(WE),this.An=0}return We(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();WE(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),KE=function(){function e(t,n){Be(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return We(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;hk("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!Ox(n.t0)){n.next=12;break}hk("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,BE(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),GE=function(){function e(t,n){Be(this,e),this.Sn=t,this.params=n}return We(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Nx.resolve(Rk.A);var r=new HE(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(hk("LruGarbageCollector","Garbage collection skipped; disabled"),Nx.resolve(CE)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(hk("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),CE):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(hk("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),fk()<=Do.DEBUG&&hk("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Nx.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),QE=function(){function e(t,n){Be(this,e),this.db=t,this.garbageCollector=function(e,t){return new GE(e,t)}(this,n)}return We(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return YE(e,n)}},{key:"removeReference",value:function(e,t,n){return YE(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return YE(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return ME(e).zt((function(r){return DE(e,r,t).next((function(e){return e&&(n=!0),Nx.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.kn(e,(function(o,s){if(s<=t){var u=n.Mn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Fk.min()),qE(e).delete([0,ix(o.path)])}))}));i.push(u)}})).next((function(){return Nx.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return YE(e,t)}},{key:"kn",value:function(e,t){var n,r=qE(e),i=Rk.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=Me(e,2),o=a[0],s=(a[1],r.path),u=r.sequenceNumber;0===o?(i!==Rk.A&&t(new ab(sx(n)),i),i=u,n=s):i=Rk.A})).next((function(){i!==Rk.A&&t(new ab(sx(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function YE(e,t){return qE(e).put(function(e,t){return{targetId:0,path:ix(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var $E=function(){function e(){Be(this,e),this.changes=new e_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return We(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Sb.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Nx.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),XE=function(){function e(t){Be(this,e),this.M=t}return We(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return eI(e).put(tI(t),n)}},{key:"removeEntry",value:function(e,t){var n=eI(e),r=tI(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return eI(e).get(tI(t)).next((function(e){return n.$n(t,e)}))}},{key:"Fn",value:function(e,t){var n=this;return eI(e).get(tI(t)).next((function(e){return{document:n.$n(t,e),size:AE(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=u_();return this.Bn(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=u_(),i=new t_(ab.comparator);return this.Bn(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,AE(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return Nx.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return eI(e).Wt({range:r},(function(e,t,r){for(var o=ab.fromSegments(e);a&&ab.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.qt(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=u_(),a=t.length+1,o={};if(n.isEqual(Fk.min())){var s=t.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.toArray(),c=Qx(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index="collectionReadTimeIndex"}return eI(e).Wt(o,(function(e,n,o){if(e.length===a){var s=r.$n(ab.fromSegments(e),n);t.isPrefixOf(s.key.path)?i=i.insert(s.key,s):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new JE(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ZE(e).get("remoteDocumentGlobalKey").next((function(e){return mk(!!e),e}))}},{key:"On",value:function(e,t){return ZE(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=Kx(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Fk.min()))return n}return Sb.newInvalidDocument(e)}}]),e}(),JE=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).Un=e,i.trackRemovals=r,i.Kn=new e_((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return We(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new i_((function(e,t){return Dk(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Kn.get(a);if(o.isValidDocument()){var u=Gx(t.Un.M,o);i=i.add(a.path.popLast());var c=AE(u);r+=c-s,n.push(t.Un.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=Gx(t.Un.M,o.convertToNoDocument(Fk.min()));n.push(t.Un.addEntry(e,a,l))}else n.push(t.Un.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Un.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Un.updateMetadata(e,r)),Nx.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Un.Fn(e,t).next((function(e){return n.Kn.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Un.Ln(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,t){n.Kn.set(e,t)})),t}))}}]),n}($E);function ZE(e){return Vx(e,"remoteDocumentGlobal")}function eI(e){return Vx(e,"remoteDocuments")}function tI(e){return e.path.toArray()}var nI=function(){function e(t){Be(this,e),this.M=t}return We(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Rx("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ux,{unique:!0}),e.createObjectStore("documentMutations")}(e),rI(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Nx.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),rI(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fk.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").Ut().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ux,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Nx.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Gn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Qn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.jn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Wn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore("remoteDocuments");t.createIndex("readTimeIndex","readTime",{unique:!1}),t.createIndex("collectionReadTimeIndex",hx,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.zn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:wx});t.createIndex("collectionPathOverlayIndex",_x,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",xx,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:mx}).createIndex("sequenceNumberIndex",gx,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:kx}).createIndex("documentKeyIndex",bx,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=AE(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.Ut().next((function(n){return Nx.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ut("userMutationsIndex",i).next((function(r){return Nx.forEach(r,(function(r){mk(r.userId===n.userId);var i=Jx(t.M,r);return RE(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new Bk(n),o=function(e){return[0,ix(e)]}(a);r.push(t.get(o).next((function(n){return n?Nx.resolve():function(n){return t.put({targetId:0,path:ix(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Nx.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:yx});var n=t.store("collectionParents"),r=new wE,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:ix(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new Bk(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=Me(e,3),r=(n[0],n[1]),a=(n[2],sx(r));return i(a.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Zx(r),a=eE(t.M,i);return n.put(a)}))}}]),e}();function rI(e){e.createObjectStore("targetDocuments",{keyPath:px}).createIndex("documentTargetsIndex",vx,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",dx,{unique:!0}),e.createObjectStore("targetGlobal")}var iI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",aI=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(Be(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hn=a,this.window=o,this.document=s,this.Jn=c,this.Yn=l,this.Xn=f,this.Zn=null,this.ts=!1,this.isPrimary=!1,this.networkEnabled=!0,this.es=null,this.inForeground=!1,this.ns=null,this.ss=null,this.rs=Number.NEGATIVE_INFINITY,this.os=function(e){return Promise.resolve()},!e.vt())throw new bk(kk.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new QE(this,i),this.us=n+"main",this.M=new Hx(u),this.cs=new Ax(this.us,this.Xn,new nI(this.M)),this.hs=new jE(this.referenceDelegate,this.M),this.ls=function(e){return new XE(e)}(this.M),this.fs=new iE,this.window&&this.window.localStorage?this.ds=this.window.localStorage:(this.ds=null,!1===l&&dk("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return We(e,[{key:"start",value:function(){var e=this;return this._s().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new bk(kk.FAILED_PRECONDITION,iI);return e.ws(),e.gs(),e.ys(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.hs.getHighestSequenceNumber(t)}))})).then((function(t){e.Zn=new Rk(t,e.Jn)})).then((function(){e.ts=!0})).catch((function(t){return e.cs&&e.cs.close(),Promise.reject(t)}))}},{key:"ps",value:function(e){var t=this;return this.os=function(){var n=Ur(Wr().mark((function n(r){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.cs.Ot(function(){var t=Ur(Wr().mark((function t(n){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hn.enqueueAndForget(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t._s();case 4:case"end":return e.stop()}}),e)})))))}},{key:"_s",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return sI(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Is(t).next((function(t){t||(e.isPrimary=!1,e.Hn.enqueueRetryable((function(){return e.os(!1)})))}))})).next((function(){return e.Ts(t)})).next((function(n){return e.isPrimary&&!n?e.Es(t).next((function(){return!1})):!!n&&e.As(t).next((function(){return!0}))}))})).catch((function(t){if(Ox(t))return hk("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return hk("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hn.enqueueRetryable((function(){return e.os(t)})),e.isPrimary=t}))}},{key:"Is",value:function(e){var t=this;return oI(e).get("owner").next((function(e){return Nx.resolve(t.Rs(e))}))}},{key:"bs",value:function(e){return sI(e).delete(this.clientId)}},{key:"Ps",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i,a=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vs(this.rs,18e5)){e.next=6;break}return this.rs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Vx(e,"clientMetadata");return t.Ut().next((function(e){var n=a.vs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Nx.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ds){n=jn(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ds.removeItem(this.Ss(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ys",value:function(){var e=this;this.ss=this.Hn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e._s().then((function(){return e.Ps()})).then((function(){return e.ys()}))}))}},{key:"Rs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ts",value:function(e){var t=this;return this.Yn?Nx.resolve(!0):oI(e).get("owner").next((function(n){if(null!==n&&t.Vs(n.leaseTimestampMs,5e3)&&!t.Ds(n.ownerId)){if(t.Rs(n)&&t.networkEnabled)return!0;if(!t.Rs(n)){if(!n.allowTabSynchronization)throw new bk(kk.FAILED_PRECONDITION,iI);return!1}}return!(!t.networkEnabled||!t.inForeground)||sI(e).Ut().next((function(e){return void 0===t.vs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&hk("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ur(Wr().mark((function e(){var t=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ts=!1,this.Cs(),this.ss&&(this.ss.cancel(),this.ss=null),this.xs(),this.Ns(),e.next=7,this.cs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Ux(e,Rk.A);return t.Es(n).next((function(){return t.bs(n)}))}));case 7:this.cs.close(),this.ks();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vs",value:function(e,t){var n=this;return e.filter((function(e){return n.Vs(e.updateTimeMs,t)&&!n.Ds(e.clientId)}))}},{key:"Ms",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return sI(t).Ut().next((function(t){return e.vs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ts}},{key:"getMutationQueue",value:function(e,t){return PE.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getIndexManager",value:function(e){return new xE(e)}},{key:"getDocumentOverlayCache",value:function(e){return sE.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;hk("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=13===(i=this.Xn)?Tx:12===i?Ix:11===i?Ex:void yk();return this.cs.runTransaction(e,o,s,(function(i){return a=new Ux(i,r.Zn?r.Zn.next():Rk.A),"readwrite-primary"===t?r.Is(a).next((function(e){return!!e||r.Ts(a)})).next((function(t){if(!t)throw dk("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hn.enqueueRetryable((function(){return r.os(!1)})),new bk(kk.FAILED_PRECONDITION,Sx);return n(a)})).next((function(e){return r.As(a).next((function(){return e}))})):r.Os(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e){var t=this;return oI(e).get("owner").next((function(e){if(null!==e&&t.Vs(e.leaseTimestampMs,5e3)&&!t.Ds(e.ownerId)&&!t.Rs(e)&&!(t.Yn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new bk(kk.FAILED_PRECONDITION,iI)}))}},{key:"As",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oI(e).put("owner",t)}},{key:"Es",value:function(e){var t=this,n=oI(e);return n.get("owner").next((function(e){return t.Rs(e)?(hk("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Nx.resolve()}))}},{key:"Vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(dk("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ws",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ns=function(){e.Hn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e._s()}))},this.document.addEventListener("visibilitychange",this.ns),this.inForeground="visible"===this.document.visibilityState)}},{key:"xs",value:function(){this.ns&&(this.document.removeEventListener("visibilitychange",this.ns),this.ns=null)}},{key:"gs",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.es=function(){t.Cs(),!Qa()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hn.enterRestrictedMode(!0),t.Hn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.es))}},{key:"Ns",value:function(){this.es&&(this.window.removeEventListener("pagehide",this.es),this.es=null)}},{key:"Ds",value:function(e){var t;try{var n=null!==(null===(t=this.ds)||void 0===t?void 0:t.getItem(this.Ss(e)));return hk("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return dk("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Cs",value:function(){if(this.ds)try{this.ds.setItem(this.Ss(this.clientId),String(Date.now()))}catch(uv){dk("Failed to set zombie client id.",uv)}}},{key:"ks",value:function(){if(this.ds)try{this.ds.removeItem(this.Ss(this.clientId))}catch(uv){}}},{key:"Ss",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return Ax.vt()}}]),e}();function oI(e){return Vx(e,"owner")}function sI(e){return Vx(e,"clientMetadata")}function uI(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var cI=We((function e(t,n){Be(this,e),this.progress=t,this.$s=n})),lI=function(){function e(t,n,r){Be(this,e),this.ls=t,this.Fs=n,this.indexManager=r}return We(e,[{key:"Bs",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.ls.getEntry(e,t).next((function(e){var t,r=jn(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=jn(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Us",value:function(e,t){var n=this;return this.ls.getEntries(e,t).next((function(t){return n.Ks(e,t).next((function(){return t}))}))}},{key:"Ks",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Gs",value:function(e,t,n){return function(e){return ab.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):sw(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new ab(t)).next((function(e){var t=l_();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,i=t.collectionGroup,a=l_();return this.indexManager.getCollectionParents(e,i).next((function(o){return Nx.forEach(o,(function(o){var s=function(e,t){return new ew(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"Ws",value:function(e,t,n){var r,i=this;return this.ls.getAll(e,t.path,n).next((function(n){return r=n,i.Fs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=jn(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=jn(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Sb.newInvalidDocument(u),r=r.insert(u,c)),jw(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){pw(t,n)||(r=r.remove(e))})),r}))}}]),e}(),fI=function(){function e(t,n,r,i){Be(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=i}return We(e,null,[{key:"Js",value:function(t,n){var r,i=p_(),a=p_(),o=jn(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),hI=function(){function e(){Be(this,e)}return We(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Gs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Fk.min())?this.Zs(e,t):this.Xs.Us(e,r).next((function(a){var o=i.ti(t,a);return(rw(t)||iw(t))&&i.ei(t.limitType,o,r,n)?i.Zs(e,t):(fk()<=Do.DEBUG&&hk("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),dw(t)),i.Xs.Gs(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new i_(vw(e));return t.forEach((function(t,r){pw(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return fk()<=Do.DEBUG&&hk("QueryEngine","Using full collection scan to execute query:",dw(t)),this.Xs.Gs(e,t,Fk.min())}}]),e}(),dI=function(){function e(t,n,r,i){Be(this,e),this.persistence=t,this.ni=n,this.M=i,this.si=new t_(Dk),this.ii=new e_((function(e){return Mb(e)}),Fb),this.ri=Fk.min(),this.oi=t.getRemoteDocumentCache(),this.hs=t.getTargetCache(),this.fs=t.getBundleCache(),this.ai(r)}return We(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Fs=this.persistence.getMutationQueue(e,this.indexManager),this.ui=new lI(this.oi,this.Fs,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ui)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function pI(e,t,n,r){return new dI(e,t,n,r)}function vI(e,t){return yI.apply(this,arguments)}function yI(){return yI=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Fs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Fs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=p_(),u=jn(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=jn(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=jn(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=jn(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.ui.Us(e,s).next((function(e){return{ci:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}function mI(e,t){var n=gk(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Nx.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);mk(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Fs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}function gI(e){var t=gk(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.hs.getLastRemoteSnapshotVersion(e)}))}function kI(e,t){var n=gk(e),r=t.snapshotVersion,i=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.oi.newChangeBuffer({trackRemovals:!0});i=n.si;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.hs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.hs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(Kk.EMPTY_BYTE_STRING,Fk.min()).withLastLimboFreeSnapshotVersion(Fk.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.hs.updateTargetData(e,c))}}));var s=u_();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(bI(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Fk.min())){var u=n.hs.getLastRemoteSnapshotVersion(e).next((function(t){return n.hs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return Nx.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ui.Ks(e,s)})).next((function(){return s}))})).then((function(e){return n.si=i,e}))}function bI(e,t,n){var r=p_();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=u_();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Fk.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):hk("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function wI(e,t){var n=gk(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Fs.getNextMutationBatchAfterBatchId(e,t)}))}function _I(e,t){var n=gk(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.hs.getTargetData(e,t).next((function(i){return i?(r=i,Nx.resolve(r)):n.hs.allocateTargetId(e).next((function(i){return r=new Wx(t,i,0,e.currentSequenceNumber),n.hs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function xI(e,t,n){return EI.apply(this,arguments)}function EI(){return EI=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gk(t),a=i.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ox(e.t1)){e.next=12;break}throw e.t1;case 12:hk("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.si=i.si.remove(n),i.ii.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),EI.apply(this,arguments)}function II(e,t,n){var r=gk(e),i=Fk.min(),a=p_();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=gk(e),i=r.ii.get(n);return void 0!==i?Nx.resolve(r.si.get(i)):r.hs.getTargetData(t,n)}(r,e,cw(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.hs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ni.Gs(e,t,n?i:Fk.min(),n?a:p_())})).next((function(e){return{documents:e,hi:a}}))}))}function TI(e,t){var n=gk(e),r=gk(n.hs),i=n.si.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function SI(e){var t=gk(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=gk(e),i=u_(),a=Qx(n),o=eI(t),s=IDBKeyRange.lowerBound(a,!0);return o.Wt({index:"readTimeIndex",range:s},(function(e,t){var n=Kx(r.M,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{$s:i,readTime:Yx(a)}}))}(t.oi,e,t.ri)})).then((function(e){var n=e.$s,r=e.readTime;return t.ri=r,n}))}function CI(e){return NI.apply(this,arguments)}function NI(){return NI=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gk(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=eI(e),n=Fk.min();return t.Wt({index:"readTimeIndex",reverse:!0},(function(e,t,r){t.readTime&&(n=Yx(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.ri=e})));case 2:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function RI(e,t,n,r){return AI.apply(this,arguments)}function AI(){return AI=Ur(Wr().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=gk(t),o=p_(),s=u_(),u=jn(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.li(l.metadata.name),l.document&&(o=o.add(f)),(h=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,_I(a,function(e){return cw(nw(Bk.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return bI(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.hs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.hs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ui.Ks(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function PI(e,t){return DI.apply(this,arguments)}function DI(){return DI=Ur(Wr().mark((function e(t,n){var r,i,a,o=arguments;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:p_(),e.next=3,_I(t,cw(tE(n.bundledQuery)));case 3:return i=e.sent,a=gk(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=P_(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.fs.saveNamedQuery(e,n);var o=i.withResumeToken(Kk.EMPTY_BYTE_STRING,t);return a.si=a.si.insert(o.targetId,o),a.hs.updateTargetData(e,o).next((function(){return a.hs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.hs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.fs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}var OI=function(){function e(t){Be(this,e),this.M=t,this._i=new Map,this.wi=new Map}return We(e,[{key:"getBundleMetadata",value:function(e,t){return Nx.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:P_(n.createTime)}),Nx.resolve()}},{key:"getNamedQuery",value:function(e,t){return Nx.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:tE(e.bundledQuery),readTime:P_(e.readTime)}}(t)),Nx.resolve()}}]),e}(),LI=function(){function e(){Be(this,e),this.overlays=new t_(ab.comparator),this.mi=new Map}return We(e,[{key:"getOverlay",value:function(e,t){return Nx.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),Nx.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.mi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),Nx.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=f_(),i=t.length+1,a=new ab(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return Nx.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new t_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=f_(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=f_(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return Nx.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new zx(t,n));var a=this.mi.get(t);void 0===a&&(a=p_(),this.mi.set(t,a)),this.mi.set(t,a.add(n.key))}}}]),e}(),MI=function(){function e(){Be(this,e),this.gi=new i_(FI.yi),this.pi=new i_(FI.Ii)}return We(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new FI(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new FI(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new ab(new Bk([])),r=new FI(n,e),i=new FI(n,e+1),a=[];return this.pi.forEachInRange([r,i],(function(e){t.Ei(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new ab(new Bk([])),n=new FI(t,e),r=new FI(t,e+1),i=p_();return this.pi.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new FI(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),FI=function(){function e(t,n){Be(this,e),this.key=t,this.Vi=n}return We(e,null,[{key:"yi",value:function(e,t){return ab.comparator(e.key,t.key)||Dk(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Dk(e.Vi,t.Vi)||ab.comparator(e.key,t.key)}}]),e}(),jI=function(){function e(t,n){Be(this,e),this.indexManager=t,this.referenceDelegate=n,this.Fs=[],this.vi=1,this.Si=new i_(FI.yi)}return We(e,[{key:"checkEmpty",value:function(e){return Nx.resolve(0===this.Fs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vi;this.vi++,this.Fs.length>0&&this.Fs[this.Fs.length-1];var a=new qx(i,t,n,r);this.Fs.push(a);var o,s=jn(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Si=this.Si.add(new FI(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return Nx.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Nx.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),i=r<0?0:r;return Nx.resolve(this.Fs.length>i?this.Fs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Nx.resolve(0===this.Fs.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return Nx.resolve(this.Fs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new FI(t,0),i=new FI(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],(function(e){var t=n.Di(e.Vi);a.push(t)})),Nx.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new i_(Dk);return t.forEach((function(e){var t=new FI(e,0),i=new FI(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,i],(function(e){r=r.add(e.Vi)}))})),Nx.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ab.isDocumentKey(i)||(i=i.child(""));var a=new FI(new ab(i),0),o=new i_(Dk);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),a),Nx.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;mk(0===this.Ni(t.batchId,"removed")),this.Fs.shift();var r=this.Si;return Nx.forEach(t.mutations,(function(i){var a=new FI(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new FI(t,0),r=this.Si.firstAfterOrEqual(n);return Nx.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Fs.length,Nx.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.Fs.length?0:e-this.Fs[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.Fs.length?null:this.Fs[t]}}]),e}(),UI=function(){function e(t){Be(this,e),this.ki=t,this.docs=new t_(ab.comparator),this.size=0}return We(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Nx.resolve(n?n.document.mutableCopy():Sb.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=u_();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Sb.newInvalidDocument(e))})),Nx.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=u_(),i=new ab(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||u.readTime.compareTo(n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return Nx.resolve(r)}},{key:"Mi",value:function(e,t){return Nx.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new VI(this)}},{key:"getSize",value:function(e){return Nx.resolve(this.size)}}]),e}(),VI=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).Un=e,r}return We(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Un.addEntry(e,i)):t.Un.removeEntry(r)})),Nx.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Un.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Un.getEntries(e,t)}}]),n}($E),qI=function(){function e(t){Be(this,e),this.persistence=t,this.Oi=new e_((function(e){return Mb(e)}),Fb),this.lastRemoteSnapshotVersion=Fk.min(),this.highestTargetId=0,this.$i=0,this.Fi=new MI,this.targetCount=0,this.Bi=FE.mn()}return We(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),Nx.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Nx.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Nx.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),Nx.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),Nx.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new FE(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,Nx.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),Nx.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.Fi.Ri(t.targetId),this.targetCount-=1,Nx.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),Nx.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Nx.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return Nx.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Fi.Ti(t,n),Nx.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Fi.Ai(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Nx.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Fi.Ri(t),Nx.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Fi.Pi(t);return Nx.resolve(n)}},{key:"containsKey",value:function(e,t){return Nx.resolve(this.Fi.containsKey(t))}}]),e}(),BI=function(){function e(t,n){var r=this;Be(this,e),this.Li={},this.overlays={},this.Zn=new Rk(0),this.ts=!1,this.ts=!0,this.referenceDelegate=t(this),this.hs=new qI(this),this.indexManager=new bE,this.ls=new UI((function(e){return r.referenceDelegate.qi(e)})),this.M=new Hx(n),this.fs=new OI(this.M)}return We(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ts=!1,Promise.resolve()}},{key:"started",get:function(){return this.ts}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new LI,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new jI(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;hk("MemoryPersistence","Starting transaction:",e);var i=new zI(this.Zn.next());return this.referenceDelegate.Ui(),n(i).next((function(e){return r.referenceDelegate.Ki(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gi",value:function(e,t){return Nx.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),zI=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return We(n)}(Cx),WI=function(){function e(t){Be(this,e),this.persistence=t,this.Qi=new MI,this.ji=null}return We(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw yk()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),Nx.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),Nx.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),Nx.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ui",value:function(){this.ji=new Set}},{key:"Ki",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nx.forEach(this.zi,(function(r){var i=ab.fromPath(r);return t.Hi(e,i).next((function(e){e||n.removeEntry(i,Fk.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return Nx.or([function(){return Nx.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gi(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function HI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function KI(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function GI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var QI=function(){function e(t,n,r,i){Be(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return We(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new bk(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(dk("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),YI=function(){function e(t,n,r){Be(this,e),this.targetId=t,this.state=n,this.error=r}return We(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new bk(i.error.code,i.error.message))),a?new e(t,i.state,r):(dk("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),$I=function(){function e(t,n){Be(this,e),this.clientId=t,this.activeTargetIds=n}return We(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=y_(),o=0;i&&o<r.activeTargetIds.length;++o)i=ib(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(dk("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),XI=function(){function e(t,n){Be(this,e),this.clientId=t,this.onlineState=n}return We(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(dk("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),JI=function(){function e(){Be(this,e),this.activeTargetIds=y_()}return We(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ZI=function(){function e(t,n,r,i,a){Be(this,e),this.window=t,this.Hn=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new t_(Dk),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=HI(this.persistenceKey,this.tr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new JI),this.ur=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return We(e,[{key:"start",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ms();case 2:t=e.sent,n=jn(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(HI(this.persistenceKey,i)))&&(o=$I.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=jn(this.ir);try{for(c.s();!(l=c.n()).done;)f=l.value,this.nr(f)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(GI(this.persistenceKey,e));if(n){var r=YI.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(GI(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(){this.Ar()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return hk("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){hk("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){hk("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(hk("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void dk("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hn.enqueueRetryable(Ur(Wr().mark((function e(){var r,i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.ur.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(a));case 16:e.next=39;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=39;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=39;break;case 32:if(n.key!==t.ar){e.next=37;break}u=function(e){var t=Rk.A;if(null!=e)try{var n=JSON.parse(e);mk("number"==typeof n),t=n}catch(e){dk("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Rk.A&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.dr){e.next=39;break}return e.abrupt("return",t.syncEngine.Cr());case 39:e.next=42;break;case 41:t.ir.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new QI(this.currentUser,e,t,n),i=KI(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=KI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=GI(this.persistenceKey,e),i=new YI(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(){this.setItem(this.dr,"value-not-used")}},{key:"Rr",value:function(e){var t=this.ur.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return $I.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return QI.Ji(new uk(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return YI.Ji(r,t)}},{key:"wr",value:function(e){return XI.Ji(e)}},{key:"vr",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Nr(t.batchId,t.state,t.error));case 2:hk("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.kr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Mr(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=y_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),eT=function(){function e(){Be(this,e),this.Or=new JI,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return We(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Or.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Or.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Or.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Or=new JI,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),tT=function(){function e(){Be(this,e)}return We(e,[{key:"Fr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),nT=function(){function e(){var t=this;Be(this,e),this.Br=function(){return t.Lr()},this.qr=function(){return t.Ur()},this.Kr=[],this.Gr()}return We(e,[{key:"Fr",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Br),window.removeEventListener("offline",this.qr)}},{key:"Gr",value:function(){window.addEventListener("online",this.Br),window.addEventListener("offline",this.qr)}},{key:"Lr",value:function(){hk("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=jn(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ur",value:function(){hk("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=jn(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),rT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},iT=function(){function e(t){Be(this,e),this.Qr=t.Qr,this.jr=t.jr}return We(e,[{key:"Wr",value:function(e){this.zr=e}},{key:"Hr",value:function(e){this.Jr=e}},{key:"onMessage",value:function(e){this.Yr=e}},{key:"close",value:function(){this.jr()}},{key:"send",value:function(e){this.Qr(e)}},{key:"Xr",value:function(){this.zr()}},{key:"Zr",value:function(e){this.Jr(e)}},{key:"eo",value:function(e){this.Yr(e)}}]),e}(),aT=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return We(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(i,a){var o=new ok;o.listenOnce(tk.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case ek.NO_ERROR:var t=o.getResponseJson();hk("Connection","XHR received:",JSON.stringify(t)),i(t);break;case ek.TIMEOUT:hk("Connection",'RPC "'+e+'" timed out'),a(new bk(kk.DEADLINE_EXCEEDED,"Request time out"));break;case ek.HTTP_ERROR:var n=o.getStatus();if(hk("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(kk).indexOf(t)>=0?t:kk.UNKNOWN}(r.status);a(new bk(s,r.message))}else a(new bk(kk.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new bk(kk.UNAVAILABLE,"Connection failed."));break;default:yk()}}finally{hk("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"co",value:function(e,t,n){var r=[this.no,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Jg(),a=Zg(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ik({})),this.oo(o.initMessageHeaders,t,n),Ga()||$a()||Ka().indexOf("Electron/")>=0||Xa()||Ka().indexOf("MSAppHost/")>=0||Ya()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");hk("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new iT({Qr:function(e){l?hk("Connection","Not sending because WebChannel is closed:",e):(c||(hk("Connection","Opening WebChannel transport."),u.open(),c=!0),hk("Connection","WebChannel sending:",e),u.send(e))},jr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,ak.EventType.OPEN,(function(){l||hk("Connection","WebChannel transport opened.")})),h(u,ak.EventType.CLOSE,(function(){l||(l=!0,hk("Connection","WebChannel transport closed"),f.Zr())})),h(u,ak.EventType.ERROR,(function(e){l||(l=!0,pk("Connection","WebChannel transport errored:",e),f.Zr(new bk(kk.UNAVAILABLE,"The operation could not be completed")))})),h(u,ak.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];mk(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){hk("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=Gw[e];if(void 0!==t)return Zw(t)}(a),s=i.message;void 0===o&&(o=kk.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Zr(new bk(o,s)),u.close()}else hk("Connection","WebChannel received:",n),f.eo(n)}})),h(a,nk.STAT_EVENT,(function(e){e.stat===rk.PROXY?hk("Connection","Detected buffering proxy"):e.stat===rk.NOPROXY&&hk("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Xr()}),0),f}}]),n}(function(){function e(t){Be(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.no=n+"://"+t.host,this.so="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return We(e,[{key:"io",value:function(e,t,n,r,i){var a=this.ro(e,t);hk("RestConnection","Sending: ",a,n);var o={};return this.oo(o,r,i),this.ao(e,a,o,n).then((function(e){return hk("RestConnection","Received: ",e),e}),(function(t){throw pk("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"uo",value:function(e,t,n,r,i){return this.io(e,t,n,r,i)}},{key:"oo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ck,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ro",value:function(e,t){var n=rT[e];return"".concat(this.no,"/v1/").concat(t,":").concat(n)}}]),e}());function oT(){return"undefined"!=typeof window?window:null}function sT(){return"undefined"!=typeof document?document:null}function uT(e){return new C_(e,!0)}var cT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Be(this,e),this.Hn=t,this.timerId=n,this.ho=r,this.lo=i,this.fo=a,this._o=0,this.wo=null,this.mo=Date.now(),this.reset()}return We(e,[{key:"reset",value:function(){this._o=0}},{key:"yo",value:function(){this._o=this.fo}},{key:"po",value:function(e){var t=this;this.cancel();var n=Math.floor(this._o+this.Io()),r=Math.max(0,Date.now()-this.mo),i=Math.max(0,n-r);i>0&&hk("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this._o," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.wo=this.Hn.enqueueAfterDelay(this.timerId,i,(function(){return t.mo=Date.now(),e()})),this._o*=this.lo,this._o<this.ho&&(this._o=this.ho),this._o>this.fo&&(this._o=this.fo)}},{key:"To",value:function(){null!==this.wo&&(this.wo.skipDelay(),this.wo=null)}},{key:"cancel",value:function(){null!==this.wo&&(this.wo.cancel(),this.wo=null)}},{key:"Io",value:function(){return(Math.random()-.5)*this._o}}]),e}(),lT=function(){function e(t,n,r,i,a,o,s,u){Be(this,e),this.Hn=t,this.Eo=r,this.Ao=i,this.Ro=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.bo=0,this.Po=null,this.Vo=null,this.stream=null,this.vo=new cT(t,n)}return We(e,[{key:"So",value:function(){return 1===this.state||5===this.state||this.Do()}},{key:"Do",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Co()}},{key:"stop",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.So(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xo",value:function(){this.state=0,this.vo.reset()}},{key:"No",value:function(){var e=this;this.Do()&&null===this.Po&&(this.Po=this.Hn.enqueueAfterDelay(this.Eo,6e4,(function(){return e.ko()})))}},{key:"Mo",value:function(e){this.Oo(),this.stream.send(e)}},{key:"ko",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Do()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.Po&&(this.Po.cancel(),this.Po=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Oo(),this.$o(),this.vo.cancel(),this.bo++,4!==t?this.vo.reset():n&&n.code===kk.RESOURCE_EXHAUSTED?(dk(n.toString()),dk("Using maximum backoff delay to prevent overloading the backend."),this.vo.yo()):n&&n.code===kk.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Fo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Hr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Bo(this.bo),n=this.bo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=Me(t,2),i=r[0],a=r[1];e.bo===n&&e.Lo(i,a)}),(function(n){t((function(){var t=new bk(kk.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Lo",value:function(e,t){var n=this,r=this.Bo(this.bo);this.stream=this.Uo(e,t),this.stream.Wr((function(){r((function(){return n.state=2,n.Vo=n.Hn.enqueueAfterDelay(n.Ao,1e4,(function(){return n.Do()&&(n.state=3),Promise.resolve()})),n.listener.Wr()}))})),this.stream.Hr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Co",value:function(){var e=this;this.state=5,this.vo.po(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return hk("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Bo",value:function(e){var t=this;return function(n){t.Hn.enqueueAndForget((function(){return t.bo===e?n():(hk("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),fT=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a,o,s){var u;return Be(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).M=o,u}return We(n,[{key:"Uo",value:function(e,t){return this.Ro.co("Listen",e,t)}},{key:"onMessage",value:function(e){this.vo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:yk()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(mk(void 0===t||"string"==typeof t),Kk.fromBase64String(t||"")):(mk(void 0===t||t instanceof Uint8Array),Kk.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?kk.UNKNOWN:Zw(e.code);return new bk(t,e.message||"")}(o);n=new w_(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=M_(e,u.document.name),l=P_(u.document.updateTime),f=new Ib({mapValue:{fields:u.document.fields}}),h=Sb.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new k_(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=M_(e,v.document),m=v.readTime?P_(v.readTime):Fk.min(),g=Sb.newNoDocument(y,m),k=v.removedTargetIds||[];n=new k_([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=M_(e,b.document),_=b.removedTargetIds||[];n=new k_([],_,w,null)}else{if(!("filter"in t))return yk();t.filter;var x=t.filter;x.targetId;var E=x.count||0,I=new Xw(E),T=x.targetId;n=new b_(T,I)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Fk.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Fk.min():t.readTime?P_(t.readTime):Fk.min()}(e);return this.listener.Ko(t,n)}},{key:"Go",value:function(e){var t={};t.database=U_(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=jb(r)?{documents:K_(e,r)}:{query:G_(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=R_(e,t.resumeToken):t.snapshotVersion.compareTo(Fk.min())>0&&(n.readTime=N_(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return yk()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Mo(t)}},{key:"Qo",value:function(e){var t={};t.database=U_(this.M),t.removeTarget=e,this.Mo(t)}}]),n}(lT),hT=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a,o,s){var u;return Be(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).M=o,u.jo=!1,u}return We(n,[{key:"Wo",get:function(){return this.jo}},{key:"start",value:function(){this.jo=!1,this.lastStreamToken=void 0,At(Nt(n.prototype),"start",this).call(this)}},{key:"Fo",value:function(){this.jo&&this.zo([])}},{key:"Uo",value:function(e,t){return this.Ro.co("Write",e,t)}},{key:"onMessage",value:function(e){if(mk(!!e.streamToken),this.lastStreamToken=e.streamToken,this.jo){this.vo.reset();var t=function(e,t){return e&&e.length>0?(mk(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?P_(e.updateTime):P_(t);return n.isEqual(Fk.min())&&(n=P_(t)),new Dw(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=P_(e.commitTime);return this.listener.Ho(n,t)}return mk(!e.writeResults||0===e.writeResults.length),this.jo=!0,this.listener.Jo()}},{key:"Yo",value:function(){var e={};e.database=U_(this.M),this.Mo(e)}},{key:"zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return W_(t.M,e)}))};this.Mo(n)}}]),n}(lT),dT=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a){var o;return Be(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Ro=i,o.M=a,o.Xo=!1,o}return We(n,[{key:"Zo",value:function(){if(this.Xo)throw new bk(kk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"io",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Me(i,2),o=a[0],s=a[1];return r.Ro.io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===kk.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new bk(kk.UNKNOWN,e.toString())}))}},{key:"uo",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=Me(i,2),o=a[0],s=a[1];return r.Ro.uo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===kk.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new bk(kk.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Xo=!0}}]),n}(function(){return We((function e(){Be(this,e)}))}()),pT=function(){function e(t,n){Be(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ta=0,this.ea=null,this.na=!0}return We(e,[{key:"sa",value:function(){var e=this;0===this.ta&&(this.ia("Unknown"),this.ea=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ea=null,e.ra("Backend didn't respond within 10 seconds."),e.ia("Offline"),Promise.resolve()})))}},{key:"oa",value:function(e){"Online"===this.state?this.ia("Unknown"):(this.ta++,this.ta>=1&&(this.aa(),this.ra("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ia("Offline")))}},{key:"set",value:function(e){this.aa(),this.ta=0,"Online"===e&&(this.na=!1),this.ia(e)}},{key:"ia",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ra",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.na?(dk(t),this.na=!1):hk("OnlineStateTracker",t)}},{key:"aa",value:function(){null!==this.ea&&(this.ea.cancel(),this.ea=null)}}]),e}(),vT=We((function e(t,n,r,i,a){var o=this;Be(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ua=[],this.ca=new Map,this.ha=new Set,this.la=[],this.fa=a,this.fa.Fr((function(e){r.enqueueAndForget(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=TT(o),!e.t0){e.next=5;break}return hk("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gk(t)).ha.add(4),e.next=4,gT(n);case 4:return n.da.set("Unknown"),n.ha.delete(4),e.next=8,yT(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.da=new pT(r,i)}));function yT(e){return mT.apply(this,arguments)}function mT(){return mT=Ur(Wr().mark((function e(t){var n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!TT(t)){e.next=18;break}n=jn(t.la),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),mT.apply(this,arguments)}function gT(e){return kT.apply(this,arguments)}function kT(){return kT=Ur(Wr().mark((function e(t){var n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=jn(t.la),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),kT.apply(this,arguments)}function bT(e,t){var n=gk(e);n.ca.has(t.targetId)||(n.ca.set(t.targetId,t),IT(n)?ET(n):tS(n).Do()&&_T(n,t))}function wT(e,t){var n=gk(e),r=tS(n);n.ca.delete(t),r.Do()&&xT(n,t),0===n.ca.size&&(r.Do()?r.No():TT(n)&&n.da.set("Unknown"))}function _T(e,t){e._a.Z(t.targetId),tS(e).Go(t)}function xT(e,t){e._a.Z(t),tS(e).Qo(t)}function ET(e){e._a=new x_({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.ca.get(t)||null}}),tS(e).start(),e.da.sa()}function IT(e){return TT(e)&&!tS(e).So()&&e.ca.size>0}function TT(e){return 0===gk(e).ha.size}function ST(e){e._a=void 0}function CT(e){return NT.apply(this,arguments)}function NT(){return NT=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.ca.forEach((function(e,n){_T(t,e)}));case 1:case"end":return e.stop()}}),e)}))),NT.apply(this,arguments)}function RT(e,t){return AT.apply(this,arguments)}function AT(){return AT=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ST(t),IT(t)?(t.da.oa(n),ET(t)):t.da.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),AT.apply(this,arguments)}function PT(e,t,n){return DT.apply(this,arguments)}function DT(){return DT=Ur(Wr().mark((function e(t,n,r){var i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.da.set("Online"),!(n instanceof w_&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=jn(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.ca.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.ca.delete(o),t._a.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),hk("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,OT(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof k_?t._a.at(n):n instanceof b_?t._a._t(n):t._a.ht(n),r.isEqual(Fk.min())){e.next=29;break}return e.prev=14,e.next=17,gI(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e._a.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.ca.get(r);i&&e.ca.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.ca.get(t);if(n){e.ca.set(t,n.withResumeToken(Kk.EMPTY_BYTE_STRING,n.snapshotVersion)),xT(e,t);var r=new Wx(n.target,t,1,n.sequenceNumber);_T(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),hk("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,OT(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),DT.apply(this,arguments)}function OT(e,t,n){return LT.apply(this,arguments)}function LT(){return LT=Ur(Wr().mark((function e(t,n,r){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ox(n)){e.next=2;break}throw n;case 2:return t.ha.add(1),e.next=5,gT(t);case 5:t.da.set("Offline"),r||(r=function(){return gI(t.localStore)}),t.asyncQueue.enqueueRetryable(Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.ha.delete(1),e.next=6,yT(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),LT.apply(this,arguments)}function MT(e,t){return t().catch((function(n){return OT(e,n,t)}))}function FT(e){return jT.apply(this,arguments)}function jT(){return jT=Ur(Wr().mark((function e(t){var n,r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gk(t),r=nS(n),i=n.ua.length>0?n.ua[n.ua.length-1].batchId:-1;case 2:if(!UT(n)){e.next=19;break}return e.prev=3,e.next=6,wI(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.ua.length&&r.No(),e.abrupt("break",19);case 10:i=a.batchId,VT(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,OT(n,e.t0);case 17:e.next=2;break;case 19:qT(n)&&BT(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),jT.apply(this,arguments)}function UT(e){return TT(e)&&e.ua.length<10}function VT(e,t){e.ua.push(t);var n=nS(e);n.Do()&&n.Wo&&n.zo(t.mutations)}function qT(e){return TT(e)&&!nS(e).So()&&e.ua.length>0}function BT(e){nS(e).start()}function zT(e){return WT.apply(this,arguments)}function WT(){return WT=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:nS(t).Yo();case 1:case"end":return e.stop()}}),e)}))),WT.apply(this,arguments)}function HT(e){return KT.apply(this,arguments)}function KT(){return KT=Ur(Wr().mark((function e(t){var n,r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=nS(t),r=jn(t.ua);try{for(r.s();!(i=r.n()).done;)a=i.value,n.zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),KT.apply(this,arguments)}function GT(e,t,n){return QT.apply(this,arguments)}function QT(){return QT=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.ua.shift(),a=Bx.from(i,n,r),e.next=3,MT(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,FT(t);case 5:case"end":return e.stop()}}),e)}))),QT.apply(this,arguments)}function YT(e,t){return $T.apply(this,arguments)}function $T(){return $T=Ur(Wr().mark((function e(t,n){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&nS(t).Wo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Jw(i=n.code)||i===kk.ABORTED){e.next=7;break}return r=t.ua.shift(),nS(t).xo(),e.next=5,MT(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,FT(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:qT(t)&&BT(t);case 5:case"end":return e.stop()}}),e)}))),$T.apply(this,arguments)}function XT(e,t){return JT.apply(this,arguments)}function JT(){return JT=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=gk(t)).asyncQueue.verifyOperationInProgress(),hk("RemoteStore","RemoteStore received new credentials"),i=TT(r),r.ha.add(3),e.next=6,gT(r);case 6:return i&&r.da.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.ha.delete(3),e.next=12,yT(r);case 12:case"end":return e.stop()}}),e)}))),JT.apply(this,arguments)}function ZT(e,t){return eS.apply(this,arguments)}function eS(){return eS=Ur(Wr().mark((function e(t,n){var r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gk(t),!n){e.next=7;break}return r.ha.delete(2),e.next=5,yT(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.ha.add(2),e.next=12,gT(r);case 12:r.da.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),eS.apply(this,arguments)}function tS(e){return e.wa||(e.wa=function(e,t,n){var r=gk(e);return r.Zo(),new fT(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:CT.bind(null,e),Hr:RT.bind(null,e),Ko:PT.bind(null,e)}),e.la.push(function(){var t=Ur(Wr().mark((function t(n){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.wa.xo(),IT(e)?ET(e):e.da.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.wa.stop();case 6:ST(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.wa}function nS(e){return e.ma||(e.ma=function(e,t,n){var r=gk(e);return r.Zo(),new hT(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:zT.bind(null,e),Hr:YT.bind(null,e),Jo:HT.bind(null,e),Ho:GT.bind(null,e)}),e.la.push(function(){var t=Ur(Wr().mark((function t(n){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.ma.xo(),t.next=4,FT(e);case 4:t.next=9;break;case 6:return t.next=8,e.ma.stop();case 8:e.ua.length>0&&(hk("RemoteStore","Stopping write stream with ".concat(e.ua.length," pending writes")),e.ua=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.ma}var rS=function(){function e(t,n,r,i,a){Be(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new wk,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return We(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bk(kk.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function iS(e,t){if(dk("AsyncQueue","".concat(t,": ").concat(e)),Ox(e))return new bk(kk.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var aS=function(){function e(t){Be(this,e),this.comparator=t?function(e,n){return t(e,n)||ab.comparator(e.key,n.key)}:function(e,t){return ab.comparator(e.key,t.key)},this.keyedMap=l_(),this.sortedSet=new t_(this.comparator)}return We(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),oS=function(){function e(){Be(this,e),this.ga=new t_(ab.comparator)}return We(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):yk():this.ga=this.ga.insert(t,e)}},{key:"ya",value:function(){var e=[];return this.ga.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),sS=function(){function e(t,n,r,i,a,o,s,u){Be(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return We(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,aS.emptySet(n),a,r,i,!0,!1)}}]),e}(),uS=We((function e(){Be(this,e),this.pa=void 0,this.listeners=[]})),cS=We((function e(){Be(this,e),this.queries=new e_((function(e){return hw(e)}),fw),this.onlineState="Unknown",this.Ia=new Set}));function lS(e,t){return fS.apply(this,arguments)}function fS(){return fS=Ur(Wr().mark((function e(t,n){var r,i,a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gk(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new uS),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.pa=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=iS(e.t0,"Initialization of query '".concat(dw(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ta(r.onlineState),o.pa&&n.Ea(o.pa)&&yS(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),fS.apply(this,arguments)}function hS(e,t){return dS.apply(this,arguments)}function dS(){return dS=Ur(Wr().mark((function e(t,n){var r,i,a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gk(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),dS.apply(this,arguments)}function pS(e,t){var n,r=gk(e),i=!1,a=jn(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=jn(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ea(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.pa=o}}}catch(f){a.e(f)}finally{a.f()}i&&yS(r)}function vS(e,t,n){var r=gk(e),i=r.queries.get(t);if(i){var a,o=jn(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function yS(e){e.Ia.forEach((function(e){e.next()}))}var mS=function(){function e(t,n,r){Be(this,e),this.query=t,this.Aa=n,this.Ra=!1,this.ba=null,this.onlineState="Unknown",this.options=r||{}}return We(e,[{key:"Ea",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=jn(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new sS(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Ra?this.Pa(e)&&(this.Aa.next(e),a=!0):this.Va(e,this.onlineState)&&(this.va(e),a=!0),this.ba=e,a}},{key:"onError",value:function(e){this.Aa.error(e)}},{key:"Ta",value:function(e){this.onlineState=e;var t=!1;return this.ba&&!this.Ra&&this.Va(this.ba,e)&&(this.va(this.ba),t=!0),t}},{key:"Va",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Sa||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Pa",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ba&&this.ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"va",value:function(e){e=sS.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Ra=!0,this.Aa.next(e)}}]),e}(),gS=function(){function e(t,n){Be(this,e),this.payload=t,this.byteLength=n}return We(e,[{key:"Da",value:function(){return"metadata"in this.payload}}]),e}(),kS=function(){function e(t){Be(this,e),this.M=t}return We(e,[{key:"li",value:function(e){return M_(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?B_(this.M,e.document,!1):Sb.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return P_(e)}}]),e}(),bS=function(){function e(t,n,r){Be(this,e),this.Ca=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.progress=wS(t)}return We(e,[{key:"xa",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Na",value:function(e){var t,n=new Map,r=new kS(this.M),i=jn(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.li(a.metadata.name),u=jn(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||p_()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RI(this.localStore,new kS(this.M),this.documents,this.Ca.id);case 2:t=e.sent,n=this.Na(this.documents),r=jn(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,PI(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new cI(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function wS(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var _S=We((function e(t){Be(this,e),this.key=t})),xS=We((function e(t){Be(this,e),this.key=t})),ES=function(){function e(t,n){Be(this,e),this.query=t,this.ka=n,this.Ma=null,this.current=!1,this.Oa=p_(),this.mutatedKeys=p_(),this.$a=vw(t),this.Fa=new aS(this.$a)}return We(e,[{key:"Ba",get:function(){return this.ka}},{key:"La",value:function(e,t){var n=this,r=t?t.qa:new oS,i=t?t.Fa:this.Fa,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=rw(this.query)&&i.size===this.query.limit?i.last():null,c=iw(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=pw(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ua(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.$a(f,u)>0||c&&n.$a(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),rw(this.query)||iw(this.query))for(;o.size>this.query.limit;){var l=rw(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Fa:o,qa:r,ei:s,mutatedKeys:a}}},{key:"Ua",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Fa;this.Fa=e.Fa,this.mutatedKeys=e.mutatedKeys;var a=e.qa.ya();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yk()}};return n(e)-n(t)}(e.type,t.type)||r.$a(e.doc,t.doc)})),this.Ka(n);var o=t?this.Ga():[],s=0===this.Oa.size&&this.current?1:0,u=s!==this.Ma;return this.Ma=s,0!==a.length||u?{snapshot:new sS(this.query,e.Fa,i,a,e.mutatedKeys,0===s,u,!1),Qa:o}:{Qa:o}}},{key:"Ta",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Fa:this.Fa,qa:new oS,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{Qa:[]}}},{key:"ja",value:function(e){return!this.ka.has(e)&&!!this.Fa.has(e)&&!this.Fa.get(e).hasLocalMutations}},{key:"Ka",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ka=t.ka.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ka=t.ka.delete(e)})),this.current=e.current)}},{key:"Ga",value:function(){var e=this;if(!this.current)return[];var t=this.Oa;this.Oa=p_(),this.Fa.forEach((function(t){e.ja(t.key)&&(e.Oa=e.Oa.add(t.key))}));var n=[];return t.forEach((function(t){e.Oa.has(t)||n.push(new xS(t))})),this.Oa.forEach((function(e){t.has(e)||n.push(new _S(e))})),n}},{key:"Wa",value:function(e){this.ka=e.hi,this.Oa=p_();var t=this.La(e.documents);return this.applyChanges(t,!0)}},{key:"za",value:function(){return sS.fromInitialDocuments(this.query,this.Fa,this.mutatedKeys,0===this.Ma)}}]),e}(),IS=We((function e(t,n,r){Be(this,e),this.query=t,this.targetId=n,this.view=r})),TS=We((function e(t){Be(this,e),this.key=t,this.Ha=!1})),SS=function(){function e(t,n,r,i,a,o){Be(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ja={},this.Ya=new e_((function(e){return hw(e)}),fw),this.Xa=new Map,this.Za=new Set,this.tu=new t_(ab.comparator),this.eu=new Map,this.nu=new MI,this.su={},this.iu=new Map,this.ru=FE.gn(),this.onlineState="Unknown",this.ou=void 0}return We(e,[{key:"isPrimaryClient",get:function(){return!0===this.ou}}]),e}();function CS(e,t){return NS.apply(this,arguments)}function NS(){return NS=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=wC(t),!(o=r.Ya.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.za(),e.next=15;break;case 6:return e.next=8,_I(r.localStore,cw(n));case 8:return s=e.sent,r.isPrimaryClient&&bT(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,RS(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function RS(e,t,n,r){return AS.apply(this,arguments)}function AS(){return AS=Ur(Wr().mark((function e(t,n,r,i){var a,o,s,u,c,l;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.au=function(e,n,r){return function(){var e=Ur(Wr().mark((function e(t,n,r,i){var a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.La(r),e.t0=a.ei,!e.t0){e.next=6;break}return e.next=5,II(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.La(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(XS(t,n.targetId,s.Qa),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,II(t.localStore,n,!0);case 3:return a=e.sent,o=new ES(n,a.hi),s=o.La(a.documents),u=g_.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),XS(t,r,c.Qa),l=new IS(n,r,o),e.abrupt("return",(t.Ya.set(n,l),t.Xa.has(r)?t.Xa.get(r).push(n):t.Xa.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),AS.apply(this,arguments)}function PS(e,t){return DS.apply(this,arguments)}function DS(){return DS=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=gk(t),i=r.Ya.get(n),!((a=r.Xa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Xa.set(i.targetId,a.filter((function(e){return!fw(e,n)}))),void r.Ya.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,xI(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),wT(r.remoteStore,i.targetId),YS(r,i.targetId)})).catch(BE);case 9:e.next=14;break;case 11:return YS(r,i.targetId),e.next=14,xI(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),DS.apply(this,arguments)}function OS(e,t,n){return LS.apply(this,arguments)}function LS(){return LS=Ur(Wr().mark((function e(t,n,r){var i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=_C(t),e.prev=1,e.next=4,function(e,t){var n,r=gk(e),i=Mk.now(),a=t.reduce((function(e,t){return e.add(t.key)}),p_());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ui.Us(e,a).next((function(a){n=a;var o,s=[],u=jn(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=Uw(c,n.get(c.key));null!=l&&s.push(new zw(c.key,l,Tb(l.value.mapValue),Ow.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.Fs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.su[e.currentUser.toKey()];r||(r=new t_(Dk)),r=r.insert(t,n),e.su[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,eC(i,a.changes);case 9:return e.next=11,FT(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=iS(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),LS.apply(this,arguments)}function MS(e,t){return FS.apply(this,arguments)}function FS(){return FS=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),e.prev=1,e.next=4,kI(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.eu.get(t);n&&(mk(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ha=!0:e.modifiedDocuments.size>0?mk(n.Ha):e.removedDocuments.size>0&&(mk(n.Ha),n.Ha=!1))})),e.next=8,eC(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,BE(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),FS.apply(this,arguments)}function jS(e,t,n){var r=gk(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Ya.forEach((function(e,n){var r=n.view.Ta(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=gk(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=jn(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ta(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&yS(n)}(r.eventManager,t),i.length&&r.Ja.Ko(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function US(e,t,n){return VS.apply(this,arguments)}function VS(){return VS=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u,c;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=gk(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.eu.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new t_(ab.comparator)).insert(o,Sb.newNoDocument(o,Fk.min())),u=p_().add(o),c=new m_(Fk.min(),new Map,new i_(Dk),s,u),e.next=9,MS(i,c);case 9:i.tu=i.tu.remove(o),i.eu.delete(n),ZS(i),e.next=16;break;case 14:return e.next=16,xI(i.localStore,n,!1).then((function(){return YS(i,n,r)})).catch(BE);case 16:case"end":return e.stop()}}),e)}))),VS.apply(this,arguments)}function qS(e,t){return BS.apply(this,arguments)}function BS(){return BS=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),i=n.batch.batchId,e.prev=1,e.next=4,mI(r.localStore,n);case 4:return a=e.sent,QS(r,i,null),GS(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,eC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,BE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),BS.apply(this,arguments)}function zS(e,t,n){return WS.apply(this,arguments)}function WS(){return WS=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gk(t),e.prev=1,e.next=4,function(e,t){var n=gk(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Fs.lookupMutationBatch(e,t).next((function(t){return mk(null!==t),r=t.keys(),n.Fs.removeMutationBatch(e,t)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,QS(i,n,r),GS(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,eC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,BE(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),WS.apply(this,arguments)}function HS(e,t){return KS.apply(this,arguments)}function KS(){return KS=Ur(Wr().mark((function e(t,n){var r,i,a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TT((r=gk(t)).remoteStore)||hk("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=gk(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Fs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.iu.get(i)||[]).push(n),r.iu.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=iS(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),KS.apply(this,arguments)}function GS(e,t){(e.iu.get(t)||[]).forEach((function(e){e.resolve()})),e.iu.delete(t)}function QS(e,t,n){var r=gk(e),i=r.su[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.su[r.currentUser.toKey()]=i}}function YS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=jn(e.Xa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Ya.delete(a),n&&e.Ja.uu(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Xa.delete(t),e.isPrimaryClient&&e.nu.Ri(t).forEach((function(t){e.nu.containsKey(t)||$S(e,t)}))}function $S(e,t){e.Za.delete(t.path.canonicalString());var n=e.tu.get(t);null!==n&&(wT(e.remoteStore,n),e.tu=e.tu.remove(t),e.eu.delete(n),ZS(e))}function XS(e,t,n){var r,i=jn(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof _S?(e.nu.addReference(a.key,t),JS(e,a)):a instanceof xS?(hk("SyncEngine","Document no longer in limbo: "+a.key),e.nu.removeReference(a.key,t),e.nu.containsKey(a.key)||$S(e,a.key)):yk()}}catch(o){i.e(o)}finally{i.f()}}function JS(e,t){var n=t.key,r=n.path.canonicalString();e.tu.get(n)||e.Za.has(r)||(hk("SyncEngine","New document in limbo: "+n),e.Za.add(r),ZS(e))}function ZS(e){for(;e.Za.size>0&&e.tu.size<e.maxConcurrentLimboResolutions;){var t=e.Za.values().next().value;e.Za.delete(t);var n=new ab(Bk.fromString(t)),r=e.ru.next();e.eu.set(r,new TS(n)),e.tu=e.tu.insert(n,r),bT(e.remoteStore,new Wx(cw(nw(n.path)),r,2,Rk.A))}}function eC(e,t,n){return tC.apply(this,arguments)}function tC(){return tC=Ur(Wr().mark((function e(t,n,r){var i,a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=gk(t),a=[],o=[],s=[],e.t0=i.Ya.isEmpty(),e.t0){e.next=9;break}return i.Ya.forEach((function(e,t){s.push(i.au(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=fI.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Ja.Ko(a),e.next=9,function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Nx.forEach(n,(function(t){return Nx.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Nx.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ox(e.t0)){e.next=10;break}throw e.t0;case 10:hk("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=jn(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.si.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),tC.apply(this,arguments)}function nC(e,t){return rC.apply(this,arguments)}function rC(){return rC=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=gk(t)).currentUser.isEqual(n)){e.next=11;break}return hk("SyncEngine","User change. New user:",n.toKey()),e.next=5,vI(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.iu.forEach((function(e){e.forEach((function(e){e.reject(new bk(kk.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.iu.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,eC(r,i.ci);case 11:case"end":return e.stop()}}),e)}))),rC.apply(this,arguments)}function iC(e,t){var n=gk(e),r=n.eu.get(t);if(r&&r.Ha)return p_().add(r.key);var i=p_(),a=n.Xa.get(t);if(!a)return i;var o,s=jn(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Ya.get(u);i=i.unionWith(c.view.Ba)}}catch(l){s.e(l)}finally{s.f()}return i}function aC(e,t){return oC.apply(this,arguments)}function oC(){return oC=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),e.next=3,II(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Wa(i),e.abrupt("return",(r.isPrimaryClient&&XS(r,n.targetId,a.Qa),a));case 6:case"end":return e.stop()}}),e)}))),oC.apply(this,arguments)}function sC(e){return uC.apply(this,arguments)}function uC(){return uC=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gk(t),e.abrupt("return",SI(n.localStore).then((function(e){return eC(n,e)})));case 2:case"end":return e.stop()}}),e)}))),uC.apply(this,arguments)}function cC(e,t,n,r){return lC.apply(this,arguments)}function lC(){return lC=Ur(Wr().mark((function e(t,n,r,i){var a,o;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gk(t),e.next=3,function(e,t){var n=gk(e),r=gk(n.Fs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ui.Us(e,t):Nx.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,FT(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(QS(a,n,i||null),GS(a,n),function(e,t){gk(gk(e).Fs).dn(t)}(a.localStore,n)):yk();case 11:return e.next=13,eC(a,o);case 13:e.next=16;break;case 15:hk("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),lC.apply(this,arguments)}function fC(e,t){return hC.apply(this,arguments)}function hC(){return hC=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(wC(r=gk(t)),_C(r),!0!==n||!0===r.ou){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,dC(r,i.toArray());case 5:return a=e.sent,r.ou=!0,e.next=9,ZT(r.remoteStore,!0);case 9:o=jn(a);try{for(o.s();!(s=o.n()).done;)u=s.value,bT(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ou){e.next=25;break}return c=[],l=Promise.resolve(),r.Xa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return YS(r,t),xI(r.localStore,t,!0)})),wT(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,dC(r,c);case 21:return function(e){var t=gk(e);t.eu.forEach((function(e,n){wT(t.remoteStore,n)})),t.nu.bi(),t.eu=new Map,t.tu=new t_(ab.comparator)}(r),r.ou=!1,e.next=25,ZT(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),hC.apply(this,arguments)}function dC(e,t,n){return pC.apply(this,arguments)}function pC(){return pC=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,y,m;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=gk(t),a=[],o=[],s=jn(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Xa.get(c))||0===f.length){e.next=34;break}return e.next=11,_I(i.localStore,cw(f[0]));case 11:l=e.sent,h=jn(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Ya.get(p),e.next=20,aC(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,TI(i.localStore,c);case 36:return m=e.sent,e.next=39,_I(i.localStore,m);case 39:return l=e.sent,e.next=42,RS(i,vC(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Ja.Ko(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),pC.apply(this,arguments)}function vC(e){return tw(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function yC(e){var t=gk(e);return gk(gk(t.localStore).persistence).Ms()}function mC(e,t,n,r){return gC.apply(this,arguments)}function gC(){return gC=Ur(Wr().mark((function e(t,n,r,i){var a,o,s;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=gk(t)).ou){e.next=5;break}hk("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Xa.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,SI(a.localStore);case 11:return o=e.sent,s=m_.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,eC(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,xI(a.localStore,n,!0);case 18:return YS(a,n,i),e.abrupt("break",21);case 20:yk();case 21:case"end":return e.stop()}}),e)}))),gC.apply(this,arguments)}function kC(e,t,n){return bC.apply(this,arguments)}function bC(){return bC=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=wC(t)).ou){e.next=45;break}a=jn(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Xa.has(s)){e.next=10;break}return hk("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,TI(i.localStore,s);case 12:return u=e.sent,e.next=15,_I(i.localStore,u);case 15:return c=e.sent,e.next=18,RS(i,vC(u),c.targetId,!1);case 18:bT(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=jn(r),e.prev=30,h=Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Xa.has(t),!e.t0){e.next=5;break}return e.next=5,xI(i.localStore,t,!1).then((function(){wT(i.remoteStore,t),YS(i,t)})).catch(BE);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),bC.apply(this,arguments)}function wC(e){var t=gk(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=MS.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=US.bind(null,t),t.Ja.Ko=pS.bind(null,t.eventManager),t.Ja.uu=vS.bind(null,t.eventManager),t}function _C(e){var t=gk(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zS.bind(null,t),t}function xC(e,t,n){var r=gk(e);(function(){var e=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=gk(e),r=P_(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.fs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(wS(i)),a=new bS(i,t.localStore,n.M),e.next=14,n.cu();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.xa(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.cu();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,eC(t,u.$s,void 0);case 30:return e.next=32,function(e,t){var n=gk(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.fs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),pk("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var EC=function(){function e(){Be(this,e),this.synchronizeTabs=!1}return We(e,[{key:"initialize",value:function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=uT(t.databaseInfo.databaseId),this.sharedClientState=this.hu(t),this.persistence=this.lu(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.fu(t),this.localStore=this.du(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fu",value:function(e){return null}},{key:"du",value:function(e){return pI(this.persistence,new hI,e.initialUser,this.M)}},{key:"lu",value:function(e){return new BI(WI.Wi,this.M)}},{key:"hu",value:function(e){return new eT}},{key:"terminate",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),IC=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this))._u=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return We(n,[{key:"initialize",value:function(){var e=Ur(Wr().mark((function e(t){var r=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,CI(this.localStore);case 4:return e.next=6,this._u.initialize(this,t);case 6:return e.next=8,_C(this._u.syncEngine);case 8:return e.next=10,FT(this._u.remoteStore);case 10:return e.next=12,this.persistence.ps((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"du",value:function(e){return pI(this.persistence,new hI,e.initialUser,this.M)}},{key:"fu",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new KE(t,e.asyncQueue)}},{key:"lu",value:function(e){var t=uI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?NE.withCacheSize(this.cacheSizeBytes):NE.DEFAULT;return new aI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,oT(),sT(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"hu",value:function(e){return new eT}}]),n}(EC),TC=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,r,!1))._u=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return We(n,[{key:"initialize",value:function(){var e=Ur(Wr().mark((function e(t){var r,i=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At(Nt(n.prototype),"initialize",this).call(this,t);case 2:if(r=this._u.syncEngine,e.t0=this.sharedClientState instanceof ZI,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Nr:cC.bind(null,r),kr:mC.bind(null,r),Mr:kC.bind(null,r),Ms:yC.bind(null,r),Cr:sC.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ps(function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fC(i._u.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t=oT();if(!ZI.vt(t))throw new bk(kk.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=uI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ZI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(IC),SC=function(){function e(){Be(this,e)}return We(e,[{key:"initialize",value:function(){var e=Ur(Wr().mark((function e(t,n){var r=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return jS(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,this.syncEngine),e.next=12,ZT(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new cS}},{key:"createDatastore",value:function(e){var t,n=uT(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new aT(t));return function(e,t,n,r){return new dT(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return jS(o.syncEngine,e,0)},a=nT.vt()?new nT:new tT,new vT(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new SS(e,t,n,r,i,a);return o&&(s.ou=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gk(t),hk("RemoteStore","RemoteStore shutting down."),n.ha.add(5),e.next=5,gT(n);case 5:n.fa.shutdown(),n.da.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function CC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ur(Wr().mark((function r(){var i;return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var NC=function(){function e(t){Be(this,e),this.observer=t,this.muted=!1}return We(e,[{key:"next",value:function(e){this.observer.next&&this.wu(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.wu(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"mu",value:function(){this.muted=!0}},{key:"wu",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),RC=function(){function e(t,n){var r=this;Be(this,e),this.gu=t,this.M=n,this.metadata=new wk,this.buffer=new Uint8Array,this.yu=new TextDecoder("utf-8"),this.pu().then((function(e){e&&e.Da()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return We(e,[{key:"close",value:function(){return this.gu.cancel()}},{key:"getMetadata",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.pu());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pu",value:function(){var e=Ur(Wr().mark((function e(){var t,n,r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Iu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.yu.decode(t),r=Number(n),isNaN(r)&&this.Tu("length string (".concat(n,") is not valid number")),e.next=9,this.Eu(r);case 9:return i=e.sent,e.abrupt("return",new gS(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Au",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Iu",value:function(){var e=Ur(Wr().mark((function e(){var t,n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Au()<0)){e.next=7;break}return e.next=3,this.Ru();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Au())<0&&this.Tu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Eu",value:function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ru();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Tu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.yu.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tu",value:function(e){throw this.gu.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ru",value:function(){var e=Ur(Wr().mark((function e(){var t,n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gu.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AC=function(){function e(t){Be(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return We(e,[{key:"lookup",value:function(){var e=Ur(Wr().mark((function e(t){var n,r=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new bk(kk.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),i=U_(r.M)+"/documents",a={documents:n.map((function(e){return L_(r.M,e)}))},e.next=5,r.uo("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=z_(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());mk(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Yw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ur(Wr().mark((function e(){var t,n=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ab.fromPath(t);n.mutations.push(new $w(r,n.precondition(r)))})),e.next=7,function(){var e=Ur(Wr().mark((function e(t,n){var r,i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=gk(t),i=U_(r.M)+"/documents",a={writes:n.map((function(e){return W_(r.M,e)}))},e.next=3,r.io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw yk();t=Fk.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new bk(kk.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ow.updateTime(t):Ow.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fk.min()))throw new bk(kk.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ow.updateTime(t)}return Ow.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),PC=function(){function e(t,n,r,i){Be(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.bu=5,this.vo=new cT(this.asyncQueue,"transaction_retry")}return We(e,[{key:"run",value:function(){this.bu-=1,this.Pu()}},{key:"Pu",value:function(){var e=this;this.vo.po(Ur(Wr().mark((function t(){var n,r;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new AC(e.datastore),(r=e.Vu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.vu(t)}))}))})).catch((function(t){e.vu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Vu",value:function(e){try{var t=this.updateFunction(e);return!nb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"vu",value:function(e){var t=this;this.bu>0&&this.Su(e)?(this.bu-=1,this.asyncQueue.enqueueAndForget((function(){return t.Pu(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Su",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Jw(t)}return!1}}]),e}(),DC=function(){function e(t,n,r,i){var a=this;Be(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=uk.UNAUTHENTICATED,this.clientId=Pk.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return hk("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return hk("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return We(e,[{key:"getConfiguration",value:function(){var e=Ur(Wr().mark((function e(){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new bk(kk.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new wk;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ur(Wr().mark((function n(){var r;return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=iS(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function OC(e,t){return LC.apply(this,arguments)}function LC(){return LC=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),hk("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,vI(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),LC.apply(this,arguments)}function MC(e,t){return FC.apply(this,arguments)}function FC(){return FC=Ur(Wr().mark((function e(t,n){var r,i;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,jC(t);case 3:return r=e.sent,hk("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return XT(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return XT(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),FC.apply(this,arguments)}function jC(e){return UC.apply(this,arguments)}function UC(){return UC=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return hk("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,OC(t,new EC);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),UC.apply(this,arguments)}function VC(e){return qC.apply(this,arguments)}function qC(){return qC=Ur(Wr().mark((function e(t){return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return hk("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,MC(t,new SC);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),qC.apply(this,arguments)}function BC(e){return jC(e).then((function(e){return e.persistence}))}function zC(e){return jC(e).then((function(e){return e.localStore}))}function WC(e){return VC(e).then((function(e){return e.remoteStore}))}function HC(e){return VC(e).then((function(e){return e.syncEngine}))}function KC(e){return GC.apply(this,arguments)}function GC(){return GC=Ur(Wr().mark((function e(t){var n,r;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VC(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=CS.bind(null,n.syncEngine),r.onUnlisten=PS.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),GC.apply(this,arguments)}function QC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function i(){return Wr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NC({next:function(a){t.enqueueAndForget((function(){return hS(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new bk(kk.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new bk(kk.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new mS(nw(n.path),a,{includeMetadataChanges:!0,Sa:!0});return lS(e,o)},i.next=3,KC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function YC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function i(){return Wr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new NC({next:function(n){t.enqueueAndForget((function(){return hS(e,o)})),n.fromCache&&"server"===r.source?i.reject(new bk(kk.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new mS(n,a,{includeMetadataChanges:!0,Sa:!0});return lS(e,o)},i.next=3,KC(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var $C=new Map;function XC(e,t,n){if(!n)throw new bk(kk.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function JC(e,t,n,r){if(!0===t&&!0===r)throw new bk(kk.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function ZC(e){if(!ab.isDocumentKey(e))throw new bk(kk.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function eN(e){if(ab.isDocumentKey(e))throw new bk(kk.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tN(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":yk()}function nN(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bk(kk.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tN(e);throw new bk(kk.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function rN(e,t){if(t<=0)throw new bk(kk.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var iN=function(){function e(t){var n;if(Be(this,e),void 0===t.host){if(void 0!==t.ssl)throw new bk(kk.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bk(kk.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,JC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return We(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),aN=function(){function e(t,n,r){Be(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iN({}),this._settingsFrozen=!1,t instanceof tb?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new bk(kk.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tb(e.options.projectId)}(t))}return We(e,[{key:"app",get:function(){if(!this._app)throw new bk(kk.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new bk(kk.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iN(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xk;switch(e.type){case"gapi":var t=e.client;return mk(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Sk(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new bk(kk.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$C.get(e);t&&(hk("ComponentProvider","Removing Datastore"),$C.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function oN(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=nN(e,aN))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&pk("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=uk.MOCK_USER;else{o=Ha(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new bk(kk.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new uk(u)}e._authCredentials=new Ek(new _k(o,s))}}var sN=function(){function e(t,n,r){Be(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return We(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new cN(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),uN=function(){function e(t,n,r){Be(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return We(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),cN=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this,e,r,nw(i)))._path=i,a.type="collection",a}return We(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sN(this.firestore,null,new ab(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(uN);function lN(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xo(e),XC("collection","path",t),e instanceof aN){var a=Bk.fromString.apply(Bk,[t].concat(r));return eN(a),new cN(e,null,a)}if(!(e instanceof sN||e instanceof cN))throw new bk(kk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bk.fromString.apply(Bk,[t].concat(r)));return eN(o),new cN(e.firestore,null,o)}function fN(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=xo(e),1===arguments.length&&(t=Pk.R()),XC("doc","path",t),e instanceof aN){var a=Bk.fromString.apply(Bk,[t].concat(r));return ZC(a),new sN(e,null,new ab(a))}if(!(e instanceof sN||e instanceof cN))throw new bk(kk.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Bk.fromString.apply(Bk,[t].concat(r)));return ZC(o),new sN(e.firestore,e instanceof cN?e.converter:null,new ab(o))}function hN(e,t){return e=xo(e),t=xo(t),(e instanceof sN||e instanceof cN)&&(t instanceof sN||t instanceof cN)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function dN(e,t){return e=xo(e),t=xo(t),e instanceof uN&&t instanceof uN&&e.firestore===t.firestore&&fw(e._query,t._query)&&e.converter===t.converter}var pN=function(){function e(){var t=this;Be(this,e),this.Du=Promise.resolve(),this.Cu=[],this.xu=!1,this.Nu=[],this.ku=null,this.Mu=!1,this.Ou=!1,this.$u=[],this.vo=new cT(this,"async_queue_retry"),this.Fu=function(){var e=sT();e&&hk("AsyncQueue","Visibility state changed to "+e.visibilityState),t.vo.To()};var n=sT();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Fu)}return We(e,[{key:"isShuttingDown",get:function(){return this.xu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Bu(),this.Lu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.xu){this.xu=!0,this.Ou=e||!1;var t=sT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Fu)}}},{key:"enqueue",value:function(e){var t=this;if(this.Bu(),this.xu)return new Promise((function(){}));var n=new wk;return this.Lu((function(){return t.xu&&t.Ou?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Cu.push(e),t.qu()}))}},{key:"qu",value:function(){var e=Ur(Wr().mark((function e(){var t=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Cu.length){e.next=14;break}return e.prev=1,e.next=4,this.Cu[0]();case 4:this.Cu.shift(),this.vo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ox(e.t0)){e.next=12;break}throw e.t0;case 12:hk("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Cu.length>0&&this.vo.po((function(){return t.qu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Lu",value:function(e){var t=this,n=this.Du.then((function(){return t.Mu=!0,e().catch((function(e){t.ku=e,t.Mu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw dk("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Mu=!1,e}))}));return this.Du=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Bu(),this.$u.indexOf(e)>-1&&(t=0);var i=rS.createAndSchedule(this,e,t,n,(function(e){return r.Uu(e)}));return this.Nu.push(i),i}},{key:"Bu",value:function(){this.ku&&yk()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ku",value:function(){var e=Ur(Wr().mark((function e(){var t;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Du,e.next=3,t;case 3:if(t!==this.Du){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Gu",value:function(e){var t,n=jn(this.Nu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Qu",value:function(e){var t=this;return this.Ku().then((function(){t.Nu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=jn(t.Nu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ku()}))}},{key:"ju",value:function(e){this.$u.push(e)}},{key:"Uu",value:function(e){var t=this.Nu.indexOf(e);this.Nu.splice(t,1)}}]),e}();function vN(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=jn(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var yN=function(){function e(){Be(this,e),this._progressObserver={},this._taskCompletionResolver=new wk,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return We(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),mN=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new pN,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return We(n,[{key:"_terminate",value:function(){return this._firestoreClient||kN(this),this._firestoreClient.terminate()}}]),n}(aN);function gN(e){return e._firestoreClient||kN(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function kN(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new eb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new DC(e._authCredentials,e._appCheckCredentials,e._queue,r)}function bN(e,t,n){var r=new wk;return e.asyncQueue.enqueue(Ur(Wr().mark((function i(){return Wr().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,OC(e,n);case 3:return i.next=5,MC(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===kk.FAILED_PRECONDITION||e.code===kk.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function wN(e){return function(e){return e.asyncQueue.enqueue(Ur(Wr().mark((function t(){var n,r;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,BC(e);case 2:return n=t.sent,t.next=5,WC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=gk(e);return t.ha.delete(0),yT(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(gN(e=nN(e,mN)))}function _N(e){return function(e){return e.asyncQueue.enqueue(Ur(Wr().mark((function t(){var n,r;return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,BC(e);case 2:return n=t.sent,t.next=5,WC(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=gk(t)).ha.add(0),e.next=4,gT(n);case 4:n.da.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(gN(e=nN(e,mN)))}function xN(e,t){var n=gN(e=nN(e,mN)),r=new yN;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new RC(e,t)}(function(e,t){if(e instanceof Uint8Array)return CC(e,t);if(e instanceof ArrayBuffer)return CC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,uT(t));e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xC,t.next=3,HC(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function EN(e,t){return function(e,t){return e.asyncQueue.enqueue(Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=gk(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.fs.getNamedQuery(e,t)}))},n.next=3,zC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(gN(e=nN(e,mN)),t).then((function(t){return t?new uN(e,null,t.query):null}))}function IN(e){if(e._initialized||e._terminated)throw new bk(kk.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var TN=function(){function e(){Be(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new bk(kk.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wk(n)}return We(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var SN=function(){function e(t){Be(this,e),this._byteString=t}return We(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Kk.fromBase64String(t))}catch(t){throw new bk(kk.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Kk.fromUint8Array(t))}}]),e}(),CN=We((function e(t){Be(this,e),this._methodName=t})),NN=function(){function e(t,n){if(Be(this,e),!isFinite(t)||t<-90||t>90)throw new bk(kk.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bk(kk.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return We(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Dk(this._lat,e._lat)||Dk(this._long,e._long)}}]),e}(),RN=/^__.*__$/,AN=function(){function e(t,n,r){Be(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return We(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new zw(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bw(e,this.data,t,this.fieldTransforms)}}]),e}(),PN=function(){function e(t,n,r){Be(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return We(e,[{key:"toMutation",value:function(e,t){return new zw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function DN(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yk()}}var ON=function(){function e(t,n,r,i,a,o){Be(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Wu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return We(e,[{key:"path",get:function(){return this.settings.path}},{key:"zu",get:function(){return this.settings.zu}},{key:"Hu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ju",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Xu(e),r}},{key:"Zu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Wu(),r}},{key:"tc",value:function(e){return this.Hu({path:void 0,Yu:!0})}},{key:"ec",value:function(e){return eR(e,this.settings.methodName,this.settings.nc||!1,this.path,this.settings.sc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Wu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Xu(this.path.get(e))}},{key:"Xu",value:function(e){if(0===e.length)throw this.ec("Document fields must not be empty");if(DN(this.zu)&&RN.test(e))throw this.ec('Document fields cannot begin and end with "__"')}}]),e}(),LN=function(){function e(t,n,r){Be(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||uT(t)}return We(e,[{key:"ic",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ON({zu:e,methodName:t,sc:n,path:Wk.emptyPath(),Yu:!1,nc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function MN(e){var t=e._freezeSettings(),n=uT(e._databaseId);return new LN(e._databaseId,!!t.ignoreUndefinedProperties,n)}function FN(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ic(a.merge||a.mergeFields?2:0,t,n,i);$N("Data must be an object, but it was:",o,r);var s,u,c=QN(r,o);if(a.merge)s=new Hk(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=jn(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=XN(t,d,n);if(!o.contains(p))throw new bk(kk.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));tR(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new Hk(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new AN(new Ib(c),s,u)}var jN=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.zu)throw 1===e.zu?e.ec("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ec("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CN);function UN(e,t,n){return new ON({zu:3,sc:t.settings.sc,methodName:e._methodName,Yu:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var VN=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"_toFieldTransform",value:function(e){return new Pw(e.path,new Ew)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(CN),qN=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e)).rc=r,i}return We(n,[{key:"_toFieldTransform",value:function(e){var t=UN(this,e,!0),n=this.rc.map((function(e){return GN(e,t)})),r=new Iw(n);return new Pw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CN),BN=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e)).rc=r,i}return We(n,[{key:"_toFieldTransform",value:function(e){var t=UN(this,e,!0),n=this.rc.map((function(e){return GN(e,t)})),r=new Sw(n);return new Pw(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CN),zN=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e)).oc=r,i}return We(n,[{key:"_toFieldTransform",value:function(e){var t=new Nw(e.M,kw(e.M,this.oc));return new Pw(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(CN);function WN(e,t,n,r){var i=e.ic(1,t,n);$N("Data must be an object, but it was:",i,r);var a=[],o=Ib.empty();Uk(r,(function(e,r){var s=ZN(t,e,n);r=xo(r);var u=i.Zu(s);if(r instanceof jN)a.push(s);else{var c=GN(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new Hk(a);return new PN(o,s,i.fieldTransforms)}function HN(e,t,n,r,i,a){var o=e.ic(1,t,n),s=[XN(t,r,n)],u=[i];if(a.length%2!=0)throw new bk(kk.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(XN(t,a[c])),u.push(a[c+1]);for(var l=[],f=Ib.empty(),h=s.length-1;h>=0;--h)if(!tR(l,s[h])){var d=s[h],p=u[h];p=xo(p);var v=o.Zu(d);if(p instanceof jN)l.push(d);else{var y=GN(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Hk(l);return new PN(f,m,o.fieldTransforms)}function KN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return GN(n,e.ic(r?4:3,t))}function GN(e,t){if(YN(e=xo(e)))return $N("Unsupported field value:",t,e),QN(e,t);if(e instanceof CN)return function(e,t){if(!DN(t.zu))throw t.ec("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ec("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Yu&&4!==t.zu)throw t.ec("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=jn(e);try{for(a.s();!(n=a.n()).done;){var o=GN(n.value,t.tc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=xo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kw(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Mk.fromDate(e);return{timestampValue:N_(t.M,n)}}if(e instanceof Mk){var r=new Mk(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:N_(t.M,r)}}if(e instanceof NN)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof SN)return{bytesValue:R_(t.M,e._byteString)};if(e instanceof sN){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ec("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:D_(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ec("Unsupported field value: ".concat(tN(e)))}(e,t)}function QN(e,t){var n={};return Vk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Uk(e,(function(e,r){var i=GN(r,t.Ju(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function YN(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Mk||e instanceof NN||e instanceof SN||e instanceof sN||e instanceof CN)}function $N(e,t,n){if(!YN(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=tN(n);throw"an object"===r?t.ec(e+" a custom object"):t.ec(e+" "+r)}}function XN(e,t,n){if((t=xo(t))instanceof TN)return t._internalPath;if("string"==typeof t)return ZN(e,t);throw eR("Field path arguments must be of type string or ",e,!1,void 0,n)}var JN=new RegExp("[~\\*/\\[\\]]");function ZN(e,t,n){if(t.search(JN)>=0)throw eR("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Aa(TN,qe(t.split(".")))._internalPath}catch(r){throw eR("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function eR(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new bk(kk.INVALID_ARGUMENT,s+e+u)}function tR(e,t){return e.some((function(e){return e.isEqual(t)}))}var nR=function(){function e(t,n,r,i,a){Be(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return We(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sN(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new rR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(iR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),rR=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"data",value:function(){return At(Nt(n.prototype),"data",this).call(this)}}]),n}(nR);function iR(e,t){return"string"==typeof t?ZN(e,t):t instanceof TN?t._internalPath:t._delegate._internalPath}var aR=function(){function e(t,n){Be(this,e),this.hasPendingWrites=t,this.fromCache=n}return We(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),oR=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a,o,s){var u;return Be(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return We(n,[{key:"exists",value:function(){return At(Nt(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new sR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(iR("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(nR),sR=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return At(Nt(n.prototype),"data",this).call(this,e)}}]),n}(oR),uR=function(){function e(t,n,r,i){Be(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new aR(i.hasPendingWrites,i.fromCache),this.query=r}return We(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new sR(n._firestore,n._userDataWriter,r.key,r,new aR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new bk(kk.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new sR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new sR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new aR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:cR(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function cR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yk()}}function lR(e,t){return e instanceof oR&&t instanceof oR?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof uR&&t instanceof uR&&e._firestore===t._firestore&&dN(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function fR(e){if(iw(e)&&0===e.explicitOrderBy.length)throw new bk(kk.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var hR=We((function e(){Be(this,e)}));function dR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var pR=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this)).ac=e,a.uc=r,a.cc=i,a.type="where",a}return We(n,[{key:"_apply",value:function(e){var t=MN(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new bk(kk.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){IR(o,a);var u,c=[],l=jn(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(ER(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=ER(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||IR(o,a),s=KN(n,"where",o,"in"===a||"not-in"===a);var h=Vb.create(i,a,s);return function(e,t){if(t.S()){var n=ow(e);if(null!==n&&!n.isEqual(t.field))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=aw(e);null!==r&&TR(e,t.field,r)}var i=function(e,t){var n,r=jn(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new bk(kk.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new bk(kk.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.ac,this.uc,this.cc);return new uN(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ew(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(hR);var vR=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this)).ac=e,i.hc=r,i.type="orderBy",i}return We(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new bk(kk.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new bk(kk.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new $b(t,n);return function(e,t){if(null===aw(e)){var n=ow(e);null!==n&&TR(e,n,t.field)}}(e,r),r}(e._query,this.ac,this.hc);return new uN(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ew(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(hR);var yR=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this)).type=e,a.lc=r,a.fc=i,a}return We(n,[{key:"_apply",value:function(e){return new uN(e.firestore,e.converter,lw(e._query,this.lc,this.fc))}}]),n}(hR);var mR=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this)).type=e,a.dc=r,a._c=i,a}return We(n,[{key:"_apply",value:function(e){var t=xR(e,this.type,this.dc,this._c);return new uN(e.firestore,e.converter,function(e,t){return new ew(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(hR);function gR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mR("startAt",t,!0)}function kR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new mR("startAfter",t,!1)}var bR=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i){var a;return Be(this,n),(a=t.call(this)).type=e,a.dc=r,a._c=i,a}return We(n,[{key:"_apply",value:function(e){var t=xR(e,this.type,this.dc,this._c);return new uN(e.firestore,e.converter,function(e,t){return new ew(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(hR);function wR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bR("endBefore",t,!1)}function _R(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bR("endAt",t,!0)}function xR(e,t,n,r){if(n[0]=xo(n[0]),n[0]instanceof nR)return function(e,t,n,r,i){if(!r)throw new bk(kk.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=jn(uw(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(vb(t,r.key));else{var c=r.data.field(u.field);if(Xk(c))throw new bk(kk.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new bk(kk.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new Yb(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=MN(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new bk(kk.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new bk(kk.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!sw(e)&&-1!==c.indexOf("/"))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Bk.fromString(c));if(!ab.isDocumentKey(l))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ab(l);s.push(vb(t,f))}else{var h=KN(n,r,c);s.push(h)}}return new Yb(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ER(e,t,n){if("string"==typeof(n=xo(n))){if(""===n)throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sw(t)&&-1!==n.indexOf("/"))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Bk.fromString(n));if(!ab.isDocumentKey(r))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vb(e,new ab(r))}if(n instanceof sN)return vb(e,n._key);throw new bk(kk.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tN(n),"."))}function IR(e,t){if(!Array.isArray(e)||0===e.length)throw new bk(kk.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new bk(kk.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function TR(e,t,n){if(!n.isEqual(t))throw new bk(kk.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var SR=function(){function e(){Be(this,e)}return We(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ub(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yk(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($k(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw yk()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Uk(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new NN(Yk(e.latitude),Yk(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Jk(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zk(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Qk(e);return new Mk(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Bk.fromString(e);mk(rx(n));var r=new tb(n.get(1),n.get(3)),i=new ab(n.popFirst(5));return r.isEqual(t)||dk("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function CR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var NR=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).firestore=e,r}return We(n,[{key:"convertBytes",value:function(e){return new SN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sN(this.firestore,null,t)}}]),n}(SR),RR=function(){function e(t,n){Be(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=MN(t)}return We(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=AR(e,this._firestore),i=CR(r.converter,t,n),a=FN(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Ow.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=AR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=xo(t))||t instanceof TN?HN(this._dataReader,"WriteBatch.update",i._key,t,n,o):WN(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Ow.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=AR(e,this._firestore);return this._mutations=this._mutations.concat(new Yw(t._key,Ow.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new bk(kk.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function AR(e,t){if((e=xo(e)).firestore!==t)throw new bk(kk.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var PR=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).firestore=e,r}return We(n,[{key:"convertBytes",value:function(e){return new SN(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sN(this.firestore,null,t)}}]),n}(SR);function DR(e){e=nN(e,sN);var t=nN(e.firestore,mN),n=gN(t),r=new PR(t);return function(e,t){var n=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function r(){return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ur(Wr().mark((function e(t,n,r){var i,a;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=gk(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ui.Bs(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new bk(kk.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=iS(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new oR(t,r,e._key,n,new aR(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function OR(e){e=nN(e,uN);var t=nN(e.firestore,mN),n=gN(t),r=new PR(t);return function(e,t){var n=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function r(){return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ur(Wr().mark((function e(t,n,r){var i,a,o,s,u;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,II(t,n,!0);case 3:i=e.sent,a=new ES(n,i.hi),o=a.La(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=iS(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new uR(t,r,e,n)}))}function LR(e,t,n){e=nN(e,sN);var r=nN(e.firestore,mN),i=CR(e.converter,t,n);return UR(r,[FN(MN(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ow.none())])}function MR(e,t,n){e=nN(e,sN);for(var r=nN(e.firestore,mN),i=MN(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return UR(r,[("string"==typeof(t=xo(t))||t instanceof TN?HN(i,"updateDoc",e._key,t,n,o):WN(i,"updateDoc",e._key,t)).toMutation(e._key,Ow.exists(!0))])}function FR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=xo(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||vN(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(vN(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sN)l=nN(e.firestore,mN),f=nw(e._key.path),c={next:function(t){n[u]&&n[u](VR(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=nN(e,uN);l=nN(p.firestore,mN),f=p._query;var v=new PR(l);c={next:function(e){n[u]&&n[u](new uR(l,v,p,e))},error:n[u+1],complete:n[u+2]},fR(e._query)}return function(e,t,n,r){var i=new NC(r),a=new mS(t,i,n);return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lS,t.next=3,KC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.mu(),e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=hS,t.next=3,KC(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gN(l),f,h,c)}function jR(e,t){return function(e,t){var n=new NC(t);return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gk(e).Ia.add(t),t.next()},t.next=3,KC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.mu(),e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function t(){return Wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){gk(e).Ia.delete(t)},t.next=3,KC(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(gN(e=nN(e,mN)),vN(t)?t:{next:t})}function UR(e,t){return function(e,t){var n=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function r(){return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=OS,r.next=3,HC(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(gN(e),t)}function VR(e,t,n){var r=n.docs.get(t._key),i=new PR(e);return new oR(e,i,t._key,r,new aR(n.hasPendingWrites,n.fromCache),t.converter)}var qR=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,r))._firestore=e,i}return We(n,[{key:"get",value:function(e){var t=this,r=AR(e,this._firestore),i=new PR(this._firestore);return At(Nt(n.prototype),"get",this).call(this,e).then((function(e){return new oR(t._firestore,i,r._key,e._document,new aR(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Be(this,e),this._firestore=t,this._transaction=n,this._dataReader=MN(t)}return We(e,[{key:"get",value:function(e){var t=this,n=AR(e,this._firestore),r=new NR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return yk();var i=e[0];if(i.isFoundDocument())return new nR(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new nR(t._firestore,r,n._key,null,n.converter);throw yk()}))}},{key:"set",value:function(e,t,n){var r=AR(e,this._firestore),i=CR(r.converter,t,n),a=FN(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=AR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=xo(t))||t instanceof TN?HN(this._dataReader,"Transaction.update",i._key,t,n,o):WN(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=AR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function BR(e,t){return function(e,t){var n=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function r(){var i;return Wr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return VC(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new PC(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(gN(e=nN(e,mN)),(function(n){return t(new qR(e,n))}))}function zR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new qN("arrayUnion",t)}function WR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BN("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ck=e}(os),Zo(new No("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new mN(i,new Ik(e.getProvider("auth-internal")),new Nk(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),hs(sk,"3.4.6",e),hs(sk,"3.4.6","esm2017")}();function HR(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new bk("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function KR(){if("undefined"===typeof Uint8Array)throw new bk("unimplemented","Uint8Arrays are not available in this environment.")}function GR(){if("undefined"==typeof atob)throw new bk("unimplemented","Blobs are unavailable in Firestore in this environment.")}var QR=function(){function e(t){Be(this,e),this._delegate=t}return We(e,[{key:"toBase64",value:function(){return GR(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return KR(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return GR(),new e(SN.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return KR(),new e(SN.fromUint8Array(t))}}]),e}();function YR(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=jn(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var $R=function(){function e(){Be(this,e)}return We(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){IN(e=nN(e,mN));var n=gN(e),r=e._freezeSettings(),i=new SC;return bN(n,i,new IC(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){IN(e=nN(e,mN));var t=gN(e),n=e._freezeSettings(),r=new SC;return bN(t,r,new TC(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new bk(kk.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new wk;return e._queue.enqueueAndForgetEvenWhileRestricted(Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ur(Wr().mark((function e(t){var n;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ax.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ax.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(uI(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),XR=function(){function e(t,n,r){var i=this;Be(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof tb||(this._appCompat=t)}return We(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||pk("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};oN(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return wN(this._delegate)}},{key:"disableNetwork",value:function(){return _N(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&JC("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new wk;return e.asyncQueue.enqueueAndForget(Ur(Wr().mark((function n(){return Wr().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=HS,n.next=3,HC(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(gN(e=nN(e,mN)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return jR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new bk("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new fA(this,lN(this._delegate,e))}catch(bM){throw rA(bM,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new nA(this,fN(this._delegate,e))}catch(bM){throw rA(bM,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new uA(this,function(e,t){if(e=nN(e,aN),XC("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new bk(kk.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uN(e,null,function(e){return new ew(Bk.emptyPath(),e)}(t))}(this._delegate,e))}catch(bM){throw rA(bM,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return BR(this._delegate,(function(n){return e(new ZR(t,n))}))}},{key:"batch",value:function(){var e=this;return gN(this._delegate),new eA(new RR(this._delegate,(function(t){return UR(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return xN(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return EN(this._delegate,e).then((function(e){return e?new uA(t,e):null}))}}]),e}(),JR=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).firestore=e,r}return We(n,[{key:"convertBytes",value:function(e){return new QR(new SN(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return nA.forKey(t,this.firestore,null)}}]),n}(SR);var ZR=function(){function e(t,n){Be(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new JR(t)}return We(e,[{key:"get",value:function(e){var t=this,n=hA(e);return this._delegate.get(n).then((function(e){return new oA(t._firestore,new oR(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=hA(e);return n?(HR("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=hA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hA(e);return this._delegate.delete(t),this}}]),e}(),eA=function(){function e(t){Be(this,e),this._delegate=t}return We(e,[{key:"set",value:function(e,t,n){var r=hA(e);return n?(HR("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=hA(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=hA(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),tA=function(){function e(t,n,r){Be(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return We(e,[{key:"fromFirestore",value:function(e,t){var n=new sR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new sA(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new JR(t),n),i.set(n,a)),a}}]),e}();tA.INSTANCES=new WeakMap;var nA=function(){function e(t,n){Be(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JR(t)}return We(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new fA(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new fA(this.firestore,lN(this._delegate,e))}catch(bM){throw rA(bM,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=xo(e))instanceof sN&&hN(this._delegate,e)}},{key:"set",value:function(e,t){t=HR("DocumentReference.set",t);try{return t?LR(this._delegate,e,t):LR(this._delegate,e)}catch(bM){throw rA(bM,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?MR(this._delegate,e):MR.apply(void 0,[this._delegate,e,t].concat(r))}catch(bM){throw rA(bM,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return UR(nN(e.firestore,mN),[new Yw(e._key,Ow.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iA(n),a=aA(n,(function(t){return new oA(e.firestore,new oR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return FR(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?DR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nN(e,sN);var t=nN(e.firestore,mN);return QC(gN(t),e._key,{source:"server"}).then((function(n){return VR(t,e,n)}))}(this._delegate):function(e){e=nN(e,sN);var t=nN(e.firestore,mN);return QC(gN(t),e._key).then((function(n){return VR(t,e,n)}))}(this._delegate),t.then((function(e){return new oA(n.firestore,new oR(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(tA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new bk("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sN(n._delegate,r,new ab(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sN(n._delegate,r,t))}}]),e}();function rA(e,t,n){return e.message=e.message.replace(t,n),e}function iA(e){var t,n=jn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!YR(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function aA(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=YR(e[0])?e[0]:YR(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var oA=function(){function e(t,n){Be(this,e),this._firestore=t,this._delegate=n}return We(e,[{key:"ref",get:function(){return new nA(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return lR(this._delegate,e._delegate)}}]),e}(),sA=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||yk()}(void 0!==t),t}}]),n}(oA),uA=function(){function e(t,n){Be(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new JR(t)}return We(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,dR(this._delegate,function(e,t,n){var r=t,i=iR("where",e);return new pR(i,r,n)}(t,n,r)))}catch(bM){throw rA(bM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,dR(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=iR("orderBy",e);return new vR(n,t)}(t,n)))}catch(bM){throw rA(bM,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,dR(this._delegate,function(e){return rN("limit",e),new yR("limit",e,"F")}(t)))}catch(bM){throw rA(bM,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,dR(this._delegate,function(e){return rN("limitToLast",e),new yR("limitToLast",e,"L")}(t)))}catch(bM){throw rA(bM,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,dR(this._delegate,gR.apply(void 0,arguments)))}catch(bM){throw rA(bM,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,dR(this._delegate,kR.apply(void 0,arguments)))}catch(bM){throw rA(bM,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,dR(this._delegate,wR.apply(void 0,arguments)))}catch(bM){throw rA(bM,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,dR(this._delegate,_R.apply(void 0,arguments)))}catch(bM){throw rA(bM,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return dN(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?OR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=nN(e,uN);var t=nN(e.firestore,mN),n=gN(t),r=new PR(t);return YC(n,e._query,{source:"server"}).then((function(n){return new uR(t,r,e,n)}))}(this._delegate):function(e){e=nN(e,uN);var t=nN(e.firestore,mN),n=gN(t),r=new PR(t);return fR(e._query),YC(n,e._query).then((function(n){return new uR(t,r,e,n)}))}(this._delegate),t.then((function(e){return new lA(n.firestore,new uR(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=iA(n),a=aA(n,(function(t){return new lA(e.firestore,new uR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return FR(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(tA.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),cA=function(){function e(t,n){Be(this,e),this._firestore=t,this._delegate=n}return We(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new sA(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),lA=function(){function e(t,n){Be(this,e),this._firestore=t,this._delegate=n}return We(e,[{key:"query",get:function(){return new uA(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new sA(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new cA(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new sA(n._firestore,r))}))}},{key:"isEqual",value:function(e){return lR(this._delegate,e._delegate)}}]),e}(),fA=function(e){Pt(n,e);var t=Ft(n);function n(e,r){var i;return Be(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return We(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new nA(this.firestore,e):null}},{key:"doc",value:function(e){try{return new nA(this.firestore,void 0===e?fN(this._delegate):fN(this._delegate,e))}catch(bM){throw rA(bM,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=nN(e.firestore,mN),r=fN(e),i=CR(e.converter,t);return UR(n,[FN(MN(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ow.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new nA(t.firestore,e)}))}},{key:"isEqual",value:function(e){return hN(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(tA.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(uA);function hA(e){return nN(e,sN)}var dA=function(){function e(){Be(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Aa(TN,n)}return We(e,[{key:"isEqual",value:function(e){return(e=xo(e))instanceof TN&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Wk.keyField().canonicalString())}}]),e}(),pA=function(){function e(t){Be(this,e),this._delegate=t}return We(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new VN("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new jN("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=zR.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=WR.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new zN("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),vA={Firestore:XR,GeoPoint:NN,Timestamp:Mk,Blob:QR,Transaction:ZR,WriteBatch:eA,DocumentReference:nA,DocumentSnapshot:oA,Query:uA,QueryDocumentSnapshot:sA,QuerySnapshot:lA,CollectionReference:fA,FieldPath:dA,FieldValue:pA,setLogLevel:function(e){!function(e){lk.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new No("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},vA)))}(e,(function(e,t){return new XR(e,t,new $R)})),e.registerVersion("@firebase/firestore-compat","0.1.15")}(Ms);var yA="@firebase/database",mA="0.12.6",gA="";var kA=function(){function e(t){Be(this,e),this.domStorage_=t,this.prefix_="firebase:"}return We(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ao(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:io(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),bA=function(){function e(){Be(this,e),this.cache_={},this.isInMemoryStorage=!0}return We(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return so(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),wA=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new kA(t)}}catch(bM){}return new bA},_A=wA("localStorage"),xA=wA("sessionStorage"),EA=new Bo("@firebase/database"),IA=function(){var e=1;return function(){return e++}}(),TA=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Ma(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new mo;n.update(t);var r=n.digest();return Ua.encodeByteArray(r)},SA=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?ao(r):r,t+=" "}return t},CA=null,NA=!0,RA=function(e,t){Ma(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(EA.logLevel=Do.VERBOSE,CA=EA.log.bind(EA),t&&xA.set("logging_enabled",!0)):"function"===typeof e?CA=e:(CA=null,xA.remove("logging_enabled"))},AA=function(){if(!0===NA&&(NA=!1,null===CA&&!0===xA.get("logging_enabled")&&RA(!0)),CA){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=SA.apply(null,t);CA(r)}},PA=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];AA.apply(void 0,[e].concat(n))}},DA=function(){var e="FIREBASE INTERNAL ERROR: "+SA.apply(void 0,arguments);EA.error(e)},OA=function(){var e="FIREBASE FATAL ERROR: ".concat(SA.apply(void 0,arguments));throw EA.error(e),new Error(e)},LA=function(){var e="FIREBASE WARNING: "+SA.apply(void 0,arguments);EA.warn(e)},MA=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},FA="[MIN_NAME]",jA="[MAX_NAME]",UA=function(e,t){if(e===t)return 0;if(e===FA||t===jA)return-1;if(t===FA||e===jA)return 1;var n=YA(e),r=YA(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},VA=function(e,t){return e===t?0:e<t?-1:1},qA=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+ao(t))},BA=function e(t){if("object"!==typeof t||null===t)return ao(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=ao(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},zA=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function WA(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var HA=function(e){Ma(!MA(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var KA=new RegExp("^-?(0*)\\d{1,10}$"),GA=-2147483648,QA=2147483647,YA=function(e){if(KA.test(e)){var t=Number(e);if(t>=GA&&t<=QA)return t}return null},$A=function(e){try{e()}catch(bM){setTimeout((function(){var t=bM.stack||"";throw LA("Exception was thrown by user callback.",t),bM}),Math.floor(0))}},XA=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},JA=function(){function e(t,n){var r=this;Be(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return We(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){LA('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),ZA=function(){function e(t,n,r){var i=this;Be(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return We(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(AA("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',LA(e)}}]),e}(),eP=function(){function e(t){Be(this,e),this.accessToken=t}return We(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();eP.OWNER="owner";var tP="5",nP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rP="websocket",iP="long_polling",aP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Be(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_A.get("host:"+t)||this._host}return We(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_A.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function oP(e,t,n){var r;if(Ma("string"===typeof t,"typeof type must == string"),Ma("object"===typeof n,"typeof params must == object"),t===rP)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==iP)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return WA(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var sP=function(){function e(){Be(this,e),this.counters_={}}return We(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;so(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return za(void 0,this.counters_)}}]),e}(),uP={},cP={};function lP(e){var t=e.toString();return uP[t]||(uP[t]=new sP),uP[t]}var fP=function(){function e(t){Be(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return We(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&$A((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),hP="start",dP="close",pP=function(){function e(t,n,r,i,a,o,s){var u=this;Be(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=PA(t),this.stats_=lP(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),oP(n,iP,e)}}return We(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new fP(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ja()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new vP((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===hP)n.id=a,n.password=o;else{if(i!==dP)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=tP,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&nP.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=ao(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Va(t),r=zA(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ja()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=ao(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ja()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),vP=function(){function e(t,n,r,i){if(Be(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ja())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=IA(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(bM){AA("frame writing exception"),bM.stack&&AA(bM.stack),AA(bM)}}}return We(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ja()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){AA("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(bM){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||AA("No IE domain setting required")}catch(bM){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),yP=null;"undefined"!==typeof MozWebSocket?yP=MozWebSocket:"undefined"!==typeof WebSocket&&(yP=WebSocket);var mP=function(){function e(t,n,r,i,a,o,s){Be(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=PA(this.connId),this.stats_=lP(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return We(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_A.set("previous_websocket_failure",!0);try{if(Ja()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(tP,"/").concat(gA,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new yP(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new yP(this.connURL,[],s)}}catch(bM){this.log_("Error instantiating WebSocket.");var u=bM.message||bM.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){_A.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=io(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Ma(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=ao(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=zA(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(bM){this.log_("Exception thrown from WebSocket.send():",bM.message||bM.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=tP,!Ja()&&"undefined"!==typeof location&&location.hostname&&nP.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),oP(e,rP,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==yP&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return _A.isInMemoryStorage||!0===_A.get("previous_websocket_failure")}}]),e}();mP.responsesRequiredToBeHealthy=2,mP.healthyTimeout=3e4;var gP=function(){function e(t){Be(this,e),this.initTransports_(t)}return We(e,[{key:"initTransports_",value:function(t){var n=mP&&mP.isAvailable(),r=n&&!mP.previouslyFailed();if(t.webSocketOnly&&(n||LA("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[mP];else{var i,a=this.transports_=[],o=jn(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[pP,mP]}}]),e}(),kP=function(){function e(t,n,r,i,a,o,s,u,c,l){Be(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=PA("c:"+this.id+":"),this.transportManager_=new gP(n),this.log_("Connection created"),this.start_()}return We(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=XA((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=qA("t",e),n=qA("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=qA("t",e),n=qA("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=qA("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?DA("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):DA("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),tP!==n&&LA("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),XA((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):XA((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_A.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),bP=function(){function e(){Be(this,e)}return We(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),wP=function(){function e(t){Be(this,e),this.allowedEvents_=t,this.listeners_={},Ma(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return We(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=qe(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Ma(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),_P=function(e){Pt(n,e);var t=Ft(n);function n(){var e;return Be(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ga()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return We(n,[{key:"getInitialEvent",value:function(e){return Ma("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(wP),xP=function(){function e(t,n){if(Be(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return We(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function EP(){return new xP("")}function IP(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function TP(e){return e.pieces_.length-e.pieceNum_}function SP(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new xP(e.pieces_,t)}function CP(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function NP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function RP(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new xP(t,0)}function AP(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof xP)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new xP(n,0)}function PP(e){return e.pieceNum_>=e.pieces_.length}function DP(e,t){var n=IP(e),r=IP(t);if(null===n)return t;if(n===r)return DP(SP(e),SP(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function OP(e,t){if(TP(e)!==TP(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function LP(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(TP(e)>TP(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var MP=We((function e(t,n){Be(this,e),this.errorPrefix_=n,this.parts_=NP(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=_o(this.parts_[r]);FP(this)}));function FP(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jP(e))}function jP(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var UP=function(e){Pt(n,e);var t=Ft(n);function n(){var e,r,i;return Be(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return We(n,[{key:"getInitialEvent",value:function(e){return Ma("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(wP),VP=1e3,qP=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a,o,s,u,c){var l;if(Be(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=PA("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=VP,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ja())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return UP.getInstance().on("visible",l.onVisible_,Lt(l)),-1===e.host.indexOf("fblocal")&&_P.getInstance().on("online",l.onOnline_,Lt(l)),l}return We(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(ao(i)),Ma(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Wa,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Ma(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ma(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=oo(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=oo(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Ma(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+ao(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):DA("Unrecognized action received from server: "+ao(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Ma(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=VP,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=VP,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=VP),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ur(Wr().mark((function e(){var t,r,i,a,o,s,u,c,l,f,h,d,p,v,y=this;return Wr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,i())},l=function(e){Ma(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:h=e.sent,d=Me(h,2),p=d[0],v=d[1],s?AA("getToken() completed but was canceled"):(AA("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new kP(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){LA(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&LA(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){AA("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){AA("Resuming connection for reason: "+e),delete this.interruptReasons_[e],co(this.interruptReasons_)&&(this.reconnectDelay_=VP,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return BA(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new xP(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){AA("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){AA("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=jn(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=jn(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ja()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+gA.replace(/\./g,"-")]=1,Ga()?e["framework.cordova"]=1:$a()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=_P.getInstance().currentlyOnline();return co(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&so(e,"w")){var n=uo(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();LA("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(bP);qP.nextPersistentConnectionId_=0,qP.nextConnectionId_=0;var BP,zP=function(){function e(t,n){Be(this,e),this.name=t,this.node=n}return We(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),WP=function(){function e(){Be(this,e)}return We(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new zP(FA,e),r=new zP(FA,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return zP.MIN}}]),e}(),HP=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"compare",value:function(e,t){return UA(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Fa("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return zP.MIN}},{key:"maxPost",value:function(){return new zP(jA,BP)}},{key:"makePost",value:function(e,t){return Ma("string"===typeof e,"KeyIndex indexValue must always be a string."),new zP(e,BP)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return BP},set:function(e){BP=e}}]),n}(WP),KP=new HP,GP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Be(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return We(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),QP=function(){function e(t,n,r,i,a){Be(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:XP.EMPTY_NODE,this.right=null!=a?a:XP.EMPTY_NODE}return We(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return XP.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return XP.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();QP.RED=!0,QP.BLACK=!1;var YP,$P=function(){function e(){Be(this,e)}return We(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new QP(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),XP=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Be(this,e),this.comparator_=t,this.root_=n}return We(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,QP.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,QP.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new GP(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new GP(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new GP(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new GP(this.root_,null,this.comparator_,!0,e)}}]),e}();function JP(e,t){return UA(e.name,t.name)}function ZP(e,t){return UA(e,t)}XP.EMPTY_NODE=new $P;var eD,tD,nD,rD=function(e){return"number"===typeof e?"number:"+HA(e):"string:"+e},iD=function(e){if(e.isLeafNode()){var t=e.val();Ma("string"===typeof t||"number"===typeof t||"object"===typeof t&&so(t,".sv"),"Priority must be a string or number.")}else Ma(e===YP||e.isEmpty(),"priority of unexpected type.");Ma(e===YP||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},aD=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Be(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Ma(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),iD(this.priorityNode_)}return We(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return PP(t)?this:".priority"===IP(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=IP(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Ma(".priority"!==r||1===TP(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(SP(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+rD(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?HA(this.value_):this.value_,this.lazyHash_=TA(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Ma(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Ma(i>=0,"Unknown leaf type: "+n),Ma(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return eD},set:function(e){eD=e}}]),e}();aD.VALUE_TYPE_ORDER=["object","boolean","number","string"];var oD,sD,uD=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?UA(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return zP.MIN}},{key:"maxPost",value:function(){return new zP(jA,new aD("[PRIORITY-POST]",nD))}},{key:"makePost",value:function(e,t){var n=tD(e);return new zP(t,new aD("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(WP),cD=new uD,lD=Math.log(2),fD=function(){function e(t){Be(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/lD,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return We(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),hD=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new QP(o,a.node,QP.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new QP(o,a.node,QP.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new QP(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,QP.BLACK):(s(f,QP.BLACK),s(f,QP.RED))}return a}(new fD(e.length));return new XP(r||t,a)},dD={},pD=function(){function e(t,n){Be(this,e),this.indexes_=t,this.indexSet_=n}return We(e,[{key:"get",value:function(e){var t=uo(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof XP?t:null}},{key:"hasIndex",value:function(e){return so(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Ma(t!==KP,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(zP.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?hD(i,t.getCompare()):dD;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(lo(this.indexes_,(function(e,i){var a=uo(r.indexSet_,i);if(Ma(a,"Missing index implementation for "+i),e===dD){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(zP.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),hD(o,a.getCompare())}return dD}var c=n.get(t.name),l=e;return c&&(l=l.remove(new zP(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(lo(this.indexes_,(function(e){if(e===dD)return e;var r=n.get(t.name);return r?e.remove(new zP(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Ma(dD&&cD,"ChildrenNode.ts has not been loaded"),oD=oD||new e({".priority":dD},{".priority":cD})}}]),e}(),vD=function(){function e(t,n,r){Be(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&iD(this.priorityNode_),this.children_.isEmpty()&&Ma(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return We(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||sD}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?sD:t}},{key:"getChild",value:function(e){var t=IP(e);return null===t?this:this.getImmediateChild(t).getChild(SP(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Ma(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new zP(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?sD:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=IP(e);if(null===n)return t;Ma(".priority"!==IP(e)||1===TP(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(SP(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(cD,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+rD(this.getPriority().val())+":"),this.forEachChild(cD,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":TA(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new zP(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new zP(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new zP(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,zP.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,zP.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yD?-1:0}},{key:"withIndex",value:function(t){if(t===KP||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===KP||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(cD),r=t.getIterator(cD),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===KP?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return sD||(sD=new e(new XP(ZP),null,pD.Default))}}]),e}();vD.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var yD=new(function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.call(this,new XP(ZP),vD.EMPTY_NODE,pD.Default)}return We(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return vD.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(vD));Object.defineProperties(zP,{MIN:{value:new zP(FA,vD.EMPTY_NODE)},MAX:{value:new zP(jA,yD)}}),HP.__EMPTY_NODE=vD.EMPTY_NODE,aD.__childrenNodeConstructor=vD,YP=yD,function(e){nD=e}(yD);function mD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return vD.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Ma(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new aD(n,mD(t))}if(e instanceof Array){var r=vD.EMPTY_NODE;return WA(e,(function(t,n){if(so(e,t)&&"."!==t.substring(0,1)){var i=mD(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(mD(t))}var i=[],a=!1,o=e;if(WA(o,(function(e,t){if("."!==e.substring(0,1)){var n=mD(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new zP(e,n)))}})),0===i.length)return vD.EMPTY_NODE;var s=hD(i,JP,(function(e){return e.name}),ZP);if(a){var u=hD(i,cD.getCompare());return new vD(s,mD(t),new pD({".priority":u},{".priority":cD}))}return new vD(s,mD(t),pD.Default)}!function(e){tD=e}(mD);var gD=function(e){Pt(n,e);var t=Ft(n);function n(e){var r;return Be(this,n),(r=t.call(this)).indexPath_=e,Ma(!PP(e)&&".priority"!==IP(e),"Can't create PathIndex with empty path or .priority key"),r}return We(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?UA(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=mD(e),r=vD.EMPTY_NODE.updateChild(this.indexPath_,n);return new zP(t,r)}},{key:"maxPost",value:function(){var e=vD.EMPTY_NODE.updateChild(this.indexPath_,yD);return new zP(jA,e)}},{key:"toString",value:function(){return NP(this.indexPath_,0).join("/")}}]),n}(WP),kD=function(e){Pt(n,e);var t=Ft(n);function n(){return Be(this,n),t.apply(this,arguments)}return We(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?UA(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return zP.MIN}},{key:"maxPost",value:function(){return zP.MAX}},{key:"makePost",value:function(e,t){var n=mD(e);return new zP(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(WP),bD=new kD,wD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function _D(e){return{type:"value",snapshotNode:e}}function xD(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ED(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function ID(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var TD=function(){function e(){Be(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cD}return We(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Ma(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Ma(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:FA}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Ma(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Ma(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jA}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Ma(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===cD}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function SD(e){var t,n={};return e.isDefault()||(e.index_===cD?t="$priority":e.index_===bD?t="$value":e.index_===KP?t="$key":(Ma(e.index_ instanceof gD,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=ao(t),e.startSet_&&(n.startAt=ao(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+ao(e.indexStartName_))),e.endSet_&&(n.endAt=ao(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+ao(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function CD(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==cD&&(t.i=e.index_.toString()),t}var ND=function(e){Pt(n,e);var t=Ft(n);function n(e,r,i,a){var o;return Be(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=PA("p:rest:"),o.listens_={},o}return We(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=SD(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),uo(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=SD(e._queryParams),r=e._path.toString(),i=new Wa;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Me(i,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+po(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=io(c.responseText)}catch(bM){LA("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&LA("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Ma(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(bP),RD=function(){function e(){Be(this,e),this.rootNode_=vD.EMPTY_NODE}return We(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function AD(){return{value:null,children:new Map}}function PD(e,t,n){if(PP(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=IP(t);e.children.has(r)||e.children.set(r,AD()),PD(e.children.get(r),t=SP(t),n)}}function DD(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){DD(r,new xP(t.toString()+"/"+e),n)}))}var OD,LD=function(){function e(t){Be(this,e),this.collection_=t,this.last_=null}return We(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&WA(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),MD=function(){function e(t,n){Be(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new LD(t);var r=1e4+2e4*Math.random();XA(this.reportStats_.bind(this),Math.floor(r))}return We(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;WA(t,(function(t,i){i>0&&so(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),XA(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function FD(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(OD||(OD={}));var jD,UD=function(){function e(t,n,r){Be(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=OD.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return We(e,[{key:"operationForChild",value:function(t){if(PP(this.path)){if(null!=this.affectedTree.value)return Ma(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new xP(t));return new e(EP(),n,this.revert)}return Ma(IP(this.path)===t,"operationForChild called for unrelated child."),new e(SP(this.path),this.affectedTree,this.revert)}}]),e}(),VD=function(){function e(t,n,r){Be(this,e),this.source=t,this.path=n,this.snap=r,this.type=OD.OVERWRITE}return We(e,[{key:"operationForChild",value:function(t){return PP(this.path)?new e(this.source,EP(),this.snap.getImmediateChild(t)):new e(this.source,SP(this.path),this.snap)}}]),e}(),qD=function(){function e(t,n,r){Be(this,e),this.source=t,this.path=n,this.children=r,this.type=OD.MERGE}return We(e,[{key:"operationForChild",value:function(t){if(PP(this.path)){var n=this.children.subtree(new xP(t));return n.isEmpty()?null:n.value?new VD(this.source,EP(),n.value):new e(this.source,EP(),n)}return Ma(IP(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,SP(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),BD=function(){function e(t,n,r){Be(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return We(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(PP(e))return this.isFullyInitialized()&&!this.filtered_;var t=IP(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function zD(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Fa("Should only compare child_ events.");var r=new zP(t.childName,t.snapshotNode),i=new zP(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function WD(e,t){return{eventCache:e,serverCache:t}}function HD(e,t,n,r){return WD(new BD(t,n,r),e.serverCache)}function KD(e,t,n,r){return WD(e.eventCache,new BD(t,n,r))}function GD(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function QD(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var YD=function(){return jD||(jD=new XP(VA)),jD},$D=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YD();Be(this,e),this.value=t,this.children=n}return We(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:EP(),value:this.value};if(PP(e))return null;var n=IP(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(SP(e),t);return null!=i?{path:AP(new xP(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(PP(t))return this;var n=IP(t),r=this.children.get(n);return null!==r?r.subtree(SP(t)):new e(null)}},{key:"set",value:function(t,n){if(PP(t))return new e(n,this.children);var r=IP(t),i=(this.children.get(r)||new e(null)).set(SP(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(PP(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=IP(t),r=this.children.get(n);if(r){var i,a=r.remove(SP(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(PP(e))return this.value;var t=IP(e),n=this.children.get(t);return n?n.get(SP(e)):null}},{key:"setTree",value:function(t,n){if(PP(t))return n;var r,i=IP(t),a=(this.children.get(i)||new e(null)).setTree(SP(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(EP(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(AP(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,EP(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(PP(e))return null;var i=IP(e),a=this.children.get(i);return a?a.findOnPath_(SP(e),AP(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,EP(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(PP(t))return this;this.value&&r(n,this.value);var i=IP(t),a=this.children.get(i);return a?a.foreachOnPath_(SP(t),AP(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(EP(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(AP(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return WA(t,(function(e,t){n=n.set(new xP(e),t)})),n}}]),e}(),XD=function(){function e(t){Be(this,e),this.writeTree_=t}return We(e,null,[{key:"empty",value:function(){return new e(new $D(null))}}]),e}();function JD(e,t,n){if(PP(t))return new XD(new $D(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=DP(i,t);return a=a.updateChild(o,n),new XD(e.writeTree_.set(i,a))}var s=new $D(n),u=e.writeTree_.setTree(t,s);return new XD(u)}function ZD(e,t,n){var r=e;return WA(n,(function(e,n){r=JD(r,AP(t,e),n)})),r}function eO(e,t){if(PP(t))return XD.empty();var n=e.writeTree_.setTree(t,new $D(null));return new XD(n)}function tO(e,t){return null!=nO(e,t)}function nO(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(DP(n.path,t)):null}function rO(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(cD,(function(e,n){t.push(new zP(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new zP(e,n.value))})),t}function iO(e,t){if(PP(t))return e;var n=nO(e,t);return new XD(null!=n?new $D(n):e.writeTree_.subtree(t))}function aO(e){return e.writeTree_.isEmpty()}function oO(e,t){return sO(EP(),e.writeTree_,t)}function sO(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Ma(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=sO(AP(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(AP(e,".priority"),r)),n}function uO(e,t){return _O(t,e)}function cO(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function lO(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Ma(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&fO(s,r.path)?i=!1:LP(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=dO(e.allWrites,hO,EP()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=eO(e.visibleWrites,r.path):WA(r.children,(function(t){e.visibleWrites=eO(e.visibleWrites,AP(r.path,t))}));return!0}return!1}function fO(e,t){if(e.snap)return LP(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&LP(AP(e.path,n),t))return!0;return!1}function hO(e){return e.visible}function dO(e,t,n){for(var r=XD.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)LP(n,o)?r=JD(r,s=DP(n,o),a.snap):LP(o,n)&&(s=DP(o,n),r=JD(r,EP(),a.snap.getChild(s)));else{if(!a.children)throw Fa("WriteRecord should have .snap or .children");if(LP(n,o))r=ZD(r,s=DP(n,o),a.children);else if(LP(o,n))if(PP(s=DP(o,n)))r=ZD(r,EP(),a.children);else{var u=uo(a.children,IP(s));if(u){var c=u.getChild(SP(s));r=JD(r,EP(),c)}}}}}return r}function pO(e,t,n,r,i){if(r||i){var a=iO(e.visibleWrites,t);if(!i&&aO(a))return n;if(i||null!=n||tO(a,EP())){return oO(dO(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(LP(e.path,t)||LP(t,e.path))}),t),n||vD.EMPTY_NODE)}return null}var o=nO(e.visibleWrites,t);if(null!=o)return o;var s=iO(e.visibleWrites,t);return aO(s)?n:null!=n||tO(s,EP())?oO(s,n||vD.EMPTY_NODE):null}function vO(e,t,n,r){return pO(e.writeTree,e.treePath,t,n,r)}function yO(e,t){return function(e,t,n){var r=vD.EMPTY_NODE,i=nO(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(cD,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=iO(e.visibleWrites,t);return n.forEachChild(cD,(function(e,t){var n=oO(iO(a,new xP(e)),t);r=r.updateImmediateChild(e,n)})),rO(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return rO(iO(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function mO(e,t,n,r){return function(e,t,n,r,i){Ma(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=AP(t,n);if(tO(e.visibleWrites,a))return null;var o=iO(e.visibleWrites,a);return aO(o)?i.getChild(n):oO(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function gO(e,t){return function(e,t){return nO(e.visibleWrites,t)}(e.writeTree,AP(e.treePath,t))}function kO(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=iO(e.visibleWrites,t),c=nO(u,EP());if(null!=c)s=c;else{if(null==n)return[];s=oO(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function bO(e,t,n){return function(e,t,n,r){var i=AP(t,n),a=nO(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?oO(iO(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function wO(e,t){return _O(AP(e.treePath,t),e.writeTree)}function _O(e,t){return{treePath:e,writeTree:t}}var xO=function(){function e(){Be(this,e),this.changeMap=new Map}return We(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Ma("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Ma(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ID(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ED(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,xD(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Fa("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ID(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),EO=new(function(){function e(){Be(this,e)}return We(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),IO=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Be(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return We(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new BD(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bO(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:QD(this.viewCache_),i=kO(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function TO(e,t,n,r,i){var a,o,s=new xO;if(n.type===OD.OVERWRITE){var u=n;u.source.fromUser?a=NO(e,t,u.path,u.snap,r,i,s):(Ma(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!PP(u.path),a=CO(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===OD.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=AP(n,r);RO(t,IP(c))&&(s=NO(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=AP(n,r);RO(t,IP(c))||(s=NO(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(Ma(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=PO(e,t,c.path,c.children,r,i,o,s))}else if(n.type===OD.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=gO(r,n))return t;var s,u=new IO(r,t,i),c=t.eventCache.getNode();if(PP(n)||".priority"===IP(n)){var l;if(t.serverCache.isFullyInitialized())l=vO(r,QD(t));else{var f=t.serverCache.getNode();Ma(f instanceof vD,"serverChildren would be complete if leaf node"),l=yO(r,f)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var h=IP(n),d=bO(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,SP(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,vD.EMPTY_NODE,SP(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=vO(r,QD(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=gO(r,EP()),HD(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=gO(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(PP(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return CO(e,t,n,u.getNode().getChild(n),i,a,s,o);if(PP(n)){var c=new $D(null);return u.getNode().forEachChild(KP,(function(e,t){c=c.set(new xP(e),t)})),PO(e,t,n,c,i,a,s,o)}return t}var l=new $D(null);return r.foreach((function(e,t){var r=AP(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),PO(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==OD.LISTEN_COMPLETE)throw Fa("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=KD(t,a.getNode(),a.isFullyInitialized()||PP(n),a.isFiltered());return SO(e,o,n,r,EO,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=GD(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(_D(GD(t)))}}(t,a,f),{viewCache:a,changes:f}}function SO(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=gO(r,n))return t;if(PP(n))if(Ma(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=QD(t),l=yO(r,c instanceof vD?c:vD.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=vO(r,QD(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=IP(n);if(".priority"===h){Ma(1===TP(n),"Can't have a priority with additional path components");var d=u.getNode(),p=mO(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=SP(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var m=mO(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(h).updateChild(y,m):u.getNode().getImmediateChild(h)}else v=bO(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,y,i,a):u.getNode()}}return HD(t,o,u.isFullyInitialized()||PP(n),e.filter.filtersNodes())}function CO(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(PP(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=IP(n);if(!c.isCompleteForPath(n)&&TP(n)>1)return t;var d=SP(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,EO,null)}var v=KD(t,u,c.isFullyInitialized()||PP(n),l.filtersNodes());return SO(e,v,n,i,new IO(i,v,a),s)}function NO(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new IO(i,t,a);if(PP(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=HD(t,u,!0,e.filter.filtersNodes());else{var f=IP(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=HD(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=SP(n),p=c.getNode().getImmediateChild(f);if(PP(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===CP(d)&&v.getChild(RP(d)).isEmpty()?v:v.updateChild(d,r):vD.EMPTY_NODE}if(p.equals(h))s=t;else s=HD(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function RO(e,t){return e.eventCache.isCompleteForChild(t)}function AO(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function PO(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=PP(n)?r:new $D(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=AO(0,t.serverCache.getNode().getImmediateChild(n),r);c=CO(e,c,new xP(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var f=AO(0,t.serverCache.getNode().getImmediateChild(n),r);c=CO(e,c,new xP(n),f,i,a,o,s)}})),c}var DO;function OO(e,t){var n=QD(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!PP(t)&&!n.getImmediateChild(IP(t)).isEmpty())?n.getChild(t):null}function LO(e,t,n,r){t.type===OD.MERGE&&null!==t.source.queryId&&(Ma(QD(e.viewCache_),"We should always have a full cache before handling merges"),Ma(GD(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=TO(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,Ma(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Ma(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Ma(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,MO(e,s.changes,s.viewCache.eventCache.getNode(),null)}function MO(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),zD(e,i,"child_removed",t,r,n),zD(e,i,"child_added",t,r,n),zD(e,i,"child_moved",a,r,n),zD(e,i,"child_changed",t,r,n),zD(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var FO;function jO(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Ma(null!=a,"SyncTree gave us an op for an invalid query."),LO(a,t,n,r)}var o,s=[],u=jn(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(LO(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function UO(e,t){var n,r=null,i=jn(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||OO(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var VO=We((function e(t){Be(this,e),this.listenProvider_=t,this.syncPointTree_=new $D(null),this.pendingWriteTree_={visibleWrites:XD.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function qO(e,t,n,r,i){return function(e,t,n,r,i){Ma(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=JD(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?HO(e,new VD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function BO(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=cO(e.pendingWriteTree_,t),i=lO(e.pendingWriteTree_,t);if(i){var a=new $D(null);return null!=r.snap?a=a.set(EP(),!0):WA(r.children,(function(e){a=a.set(new xP(e),!0)})),HO(e,new UD(r.path,a,n))}return[]}function zO(e,t,n){return HO(e,new VD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function WO(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=UO(n,DP(e,t));if(r)return r}));return pO(r,t,i,n,!0)}function HO(e,t){return KO(t,e.syncPointTree_,null,uO(e.pendingWriteTree_,EP()))}function KO(e,t,n,r){if(PP(e.path))return GO(e,t,n,r);var i=t.get(EP());null==n&&null!=i&&(n=UO(i,EP()));var a=[],o=IP(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=wO(r,o);a=a.concat(KO(s,u,c,l))}return i&&(a=a.concat(jO(i,e,r,n))),a}function GO(e,t,n,r){var i=t.get(EP());null==n&&null!=i&&(n=UO(i,EP()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=wO(r,t),u=e.operationForChild(t);u&&(a=a.concat(GO(u,i,o,s)))})),i&&(a=a.concat(jO(i,e,r,n))),a}function QO(e,t){return e.tagToQueryMap.get(t)}function YO(e){var t=e.indexOf("$");return Ma(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new xP(e.substr(0,t))}}function $O(e,t,n){var r=e.syncPointTree_.get(t);return Ma(r,"Missing sync point for query tag that we're tracking"),jO(r,n,uO(e.pendingWriteTree_,t),null)}var XO=function(){function e(t){Be(this,e),this.node_=t}return We(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),JO=function(){function e(t,n){Be(this,e),this.syncTree_=t,this.path_=n}return We(e,[{key:"getImmediateChild",value:function(t){var n=AP(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return WO(this.syncTree_,this.path_)}}]),e}(),ZO=function(e,t,n){return e&&"object"===typeof e?(Ma(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?eL(e[".sv"],t,n):"object"===typeof e[".sv"]?tL(e[".sv"],t):void Ma(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},eL=function(e,t,n){if("timestamp"===e)return n.timestamp;Ma(!1,"Unexpected server value: "+e)},tL=function(e,t,n){e.hasOwnProperty("increment")||Ma(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Ma(!1,"Unexpected increment value: "+r);var i=t.node();if(Ma(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},nL=function(e,t,n,r){return iL(t,new JO(n,e),r)},rL=function(e,t,n){return iL(e,new XO(t),n)};function iL(e,t,n){var r,i=e.getPriority().val(),a=ZO(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=ZO(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new aD(s,mD(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new aD(a))),u.forEachChild(cD,(function(e,i){var a=iL(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var aL=We((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Be(this,e),this.name=t,this.parent=n,this.node=r}));function oL(e,t){for(var n=t instanceof xP?t:new xP(t),r=e,i=IP(n);null!==i;){var a=uo(r.node.children,i)||{children:{},childCount:0};r=new aL(i,r,a),i=IP(n=SP(n))}return r}function sL(e){return e.node.value}function uL(e,t){e.node.value=t,dL(e)}function cL(e){return e.node.childCount>0}function lL(e,t){WA(e.node.children,(function(n,r){t(new aL(n,e,r))}))}function fL(e,t,n,r){n&&!r&&t(e),lL(e,(function(e){fL(e,t,!0,r)})),n&&r&&t(e)}function hL(e){return new xP(null===e.parent?e.name:hL(e.parent)+"/"+e.name)}function dL(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===sL(e)&&!cL(e)}(n),i=so(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,dL(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,dL(e))}(e.parent,e.name,e)}var pL=/[\[\].#$\/\u0000-\u001F\u007F]/,vL=/[\[\].#$\u0000-\u001F\u007F]/,yL=10485760,mL=function(e){return"string"===typeof e&&0!==e.length&&!pL.test(e)},gL=function(e){return"string"===typeof e&&0!==e.length&&!vL.test(e)},kL=function e(t,n,r){var i=r instanceof xP?new MP(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+jP(i));if("function"===typeof n)throw new Error(t+"contains a function "+jP(i)+" with contents = "+n.toString());if(MA(n))throw new Error(t+"contains "+n.toString()+" "+jP(i));if("string"===typeof n&&n.length>yL/3&&_o(n)>yL)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+jP(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(WA(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!mL(n)))throw new Error(t+" contains an invalid key ("+n+") "+jP(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;u=n,(s=i).parts_.length>0&&(s.byteLength_+=1),s.parts_.push(u),s.byteLength_+=_o(u),FP(s),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=_o(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+jP(i)+" in addition to actual children.")}},bL=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!mL(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),gL(e)}(n))throw new Error(wo(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},wL=We((function e(){Be(this,e),this.eventLists_=[],this.recursionDepth_=0}));function _L(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||OP(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function xL(e,t,n){_L(e,n),EL(e,(function(e){return LP(e,t)||LP(t,e)}))}function EL(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(IL(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function IL(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();CA&&AA("event: "+n.toString()),$A(r)}}}var TL="repo_interrupt",SL=function(){function e(t,n,r,i){Be(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wL,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=AD(),this.transactionQueueTree_=new aL,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return We(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function CL(e,t,n){if(e.stats_=lP(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new ND(e.repoInfo_,(function(t,n,r,i){AL(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return PL(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ao(n)}catch(bM){throw new Error("Invalid authOverride provided: "+bM)}}e.persistentConnection_=new qP(e.repoInfo_,t,(function(t,n,r,i){AL(e,t,n,r,i)}),(function(t){PL(e,t)}),(function(t){!function(e,t){WA(t,(function(t,n){DL(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return cP[n]||(cP[n]=t()),cP[n]}(e.repoInfo_,(function(){return new MD(e.stats_,e.server_)})),e.infoData_=new RD,e.infoSyncTree_=new VO({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=zO(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),DL(e,"connected",!1),e.serverSyncTree_=new VO({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);xL(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function NL(e){var t=e.infoData_.getNode(new xP(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function RL(e){return(t=(t={timestamp:NL(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function AL(e,t,n,r,i){e.dataUpdateCount++;var a=new xP(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=lo(n,(function(e){return mD(e)}));o=function(e,t,n,r){var i=QO(e,r);if(i){var a=YO(i),o=a.path,s=a.queryId,u=DP(o,t),c=$D.fromObject(n);return $O(e,o,new qD(FD(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=mD(n);o=function(e,t,n,r){var i=QO(e,r);if(null!=i){var a=YO(i),o=a.path,s=a.queryId,u=DP(o,t);return $O(e,o,new VD(FD(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=lo(n,(function(e){return mD(e)}));o=function(e,t,n){var r=$D.fromObject(n);return HO(e,new qD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=mD(n);o=zO(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=VL(e,a)),xL(e.eventQueue_,f,o)}function PL(e,t){DL(e,"connected",t),!1===t&&function(e){ML(e,"onDisconnectEvents");var t=RL(e),n=AD();DD(e.onDisconnect_,EP(),(function(r,i){var a=nL(r,i,e.serverSyncTree_,t);PD(n,r,a)}));var r=[];DD(n,EP(),(function(t,n){r=r.concat(zO(e.serverSyncTree_,t,n));var i=HL(e,t);VL(e,i)})),e.onDisconnect_=AD(),xL(e.eventQueue_,EP(),r)}(e)}function DL(e,t,n){var r=new xP("/.info/"+t),i=mD(n);e.infoData_.updateSnapshot(r,i);var a=zO(e.infoSyncTree_,r,i);xL(e.eventQueue_,r,a)}function OL(e){return e.nextWriteId_++}function LL(e){e.persistentConnection_&&e.persistentConnection_.interrupt(TL)}function ML(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];AA.apply(void 0,[t].concat(r))}function FL(e,t,n){return WO(e.serverSyncTree_,t,n)||vD.EMPTY_NODE}function jL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||WL(e,t),sL(t)){var n=BL(e,t);Ma(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&UL(e,hL(t),n)}else cL(t)&&lL(t,(function(t){jL(e,t)}))}function UL(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=FL(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];Ma(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=DP(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){ML(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(BO(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);WL(e,oL(e.transactionQueueTree_,t)),jL(e,e.transactionQueueTree_),xL(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)$A(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{LA("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}VL(e,t)}}),o)}function VL(e,t){var n=qL(e,t),r=hL(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=DP(n,u.path),l=!1,f=void 0;if(Ma(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,f=u.abortReason,i=i.concat(BO(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,f="maxretry",i=i.concat(BO(e.serverSyncTree_,u.currentWriteId,!0));else{var h=FL(e,u.path,o);u.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){kL("transaction failed: Data returned ",d,u.path);var p=mD(d);"object"===typeof d&&null!=d&&so(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=u.currentWriteId,y=RL(e),m=rL(p,h,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=OL(e),o.splice(o.indexOf(v),1),i=(i=i.concat(qO(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(BO(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(BO(e.serverSyncTree_,u.currentWriteId,!0))}xL(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},u=0;u<t.length;u++)s(u);WL(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)$A(r[c]);jL(e,e.transactionQueueTree_)}(e,BL(e,n),r),r}function qL(e,t){var n,r=e.transactionQueueTree_;for(n=IP(t);null!==n&&void 0===sL(r);)r=oL(r,n),n=IP(t=SP(t));return r}function BL(e,t){var n=[];return zL(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function zL(e,t,n){var r=sL(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);lL(t,(function(t){zL(e,t,n)}))}function WL(e,t){var n=sL(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,uL(t,n.length>0?n:void 0)}lL(t,(function(t){WL(e,t)}))}function HL(e,t){var n=hL(qL(e,t)),r=oL(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){KL(e,t)})),KL(e,r),fL(r,(function(t){KL(e,t)})),n}function KL(e,t){var n=sL(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Ma(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Ma(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(BO(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?uL(t,void 0):n.length=a+1,xL(e.eventQueue_,hL(t),i);for(var s=0;s<r.length;s++)$A(r[s])}}var GL=function(e,t){var n=QL(e),r=n.namespace;"firebase.com"===n.domain&&OA(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||OA("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&LA("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new aP(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new xP(n.pathString)}},QL=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(bM){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=jn(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):LA("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},YL=function(){function e(t,n,r,i){Be(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return We(e,[{key:"key",get:function(){return PP(this._path)?null:CP(this._path)}},{key:"ref",get:function(){return new $L(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=CD(this._queryParams),t=BA(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return CD(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=xo(t))instanceof e))return!1;var n=this._repo===t._repo,r=OP(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var $L=function(e){Pt(n,e);var t=Ft(n);function n(e,r){return Be(this,n),t.call(this,e,r,new TD,!1)}return We(n,[{key:"parent",get:function(){var e=RP(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(YL);!function(e){Ma(!DO,"__referenceConstructor has already been defined"),DO=e}($L),function(e){Ma(!FO,"__referenceConstructor has already been defined"),FO=e}($L);var XL={},JL=!1;function ZL(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||OA("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),AA("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=GL(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=GL(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new eP(eP.OWNER):new ZA(e.name,e.options,t);bL("Invalid Firebase Database URL",s),PP(s.path)||OA("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=XL[t.name];i||(i={},XL[t.name]=i);var a=i[e.toURLString()];a&&OA("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new SL(e,JL,n,r),i[e.toURLString()]=a,a}(u,e,l,new JA(e.name,n));return new eM(f,e)}var eM=function(){function e(t,n){Be(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return We(e,[{key:"_repo",get:function(){return this._instanceStarted||(CL(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new $L(this._repo,EP())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=XL[t];n&&n[e.key]===e||OA("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),LL(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&OA("Cannot call "+e+" on a deleted database.")}}]),e}();qP.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},qP.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){gA=e}(os),Zo(new No("database",(function(e,t){var n=t.instanceIdentifier;return ZL(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),hs(yA,mA,e),hs(yA,mA,"esm2017")}();var tM=Ms.initializeApp({apiKey:"AIzaSyCp4AgmQWbN4cffcfpnxUXeX9xXKAxU_Vs",authDomain:"react-contact-form-86d3e.firebaseapp.com",projectId:"react-contact-form-86d3e",storageBucket:"react-contact-form-86d3e.appspot.com",messagingSenderId:"1092238520264",appId:"1:1092238520264:web:e18e6bf0da531f98e2dafd",measurementId:"G-B0CQ05RXVY"}).firestore(),nM=function(){var e=Me((0,t.useState)(""),2),n=e[0],r=e[1],i=Me((0,t.useState)(""),2),a=i[0],o=i[1],s=Me((0,t.useState)(""),2),u=s[0],c=s[1],l=Me((0,t.useState)(!1),2),f=l[0],h=l[1];return(0,w.jsx)("div",{children:(0,w.jsx)("form",{className:"form justify-content-center",onSubmit:function(e){e.preventDefault(),h(!0),tM.collection("contacts").add({name:n,email:a,message:u}).then((function(){h(!1),alert("Your message has been submitted")})).catch((function(e){alert(e.message),h(!1)})),r(""),o(""),c("")},children:(0,w.jsxs)("div",{className:"form-box",children:[(0,w.jsx)("h1",{className:"text-center",children:"Contact Me"}),(0,w.jsx)("label",{children:"Name"}),(0,w.jsx)("input",{type:"text",placeholder:"Name",pattern:"^[( )a-zA-Z]+$",value:n,onChange:function(e){return r(e.target.value)},required:!0}),(0,w.jsx)("label",{children:"Email"}),(0,w.jsx)("input",{type:"email",placeholder:"Email",value:a,onChange:function(e){return o(e.target.value)},required:!0}),(0,w.jsx)("label",{children:"Message"}),(0,w.jsx)("textarea",{placeholder:"Message",value:u,onChange:function(e){return c(e.target.value)},required:!0}),(0,w.jsx)("button",{type:"submit",style:{background:f?"#ccc":" rgb(2, 2, 110)"},children:"Submit"})]})})})},rM=function(){return(0,w.jsx)("div",{children:(0,w.jsxs)("section",{className:"landing-page transition",children:[(0,w.jsx)("div",{className:"container",children:(0,w.jsx)("div",{className:"content",children:(0,w.jsxs)("div",{className:"content-details",children:[(0,w.jsx)("h1",{className:"title hue-shift",children:"Welcome to my personal blog."}),(0,w.jsx)("p",{className:"description",children:"Join my newsletter ! Suscribe to my newsletter to receive my new articles."}),(0,w.jsx)("div",{className:"search",children:(0,w.jsx)("input",{type:"text",className:"newsletter",placeholder:"Your email address",required:!0})}),(0,w.jsxs)("div",{className:"image-group hue-shift",children:[(0,w.jsx)("img",{src:"/images/liq-5.png",alt:"",className:"blob-large"}),(0,w.jsx)("img",{src:"/images/liq-4.png",alt:"",className:"blob-bean"})]})]})})}),(0,w.jsx)("img",{src:"/images/liq-1.png",alt:"",className:"blob blob-1 hue-shift"}),(0,w.jsx)("img",{src:"/images/liq-2.png",alt:"",className:"blob blob-2 hue-shift"}),(0,w.jsx)("img",{src:"/images/liq-3.png",alt:"",className:"blob blob-3 hue-shift"})]})})},iM=function(){var e=Me((0,t.useState)(!1),2),n=e[0],r=e[1];return window.addEventListener("scroll",(function(){var e=document.documentElement.scrollTop;e>300?r(!0):e<=300&&r(!1)})),(0,w.jsx)("button",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},style:{display:n?"flex":"none",height:40,float:"right",backgroundImage:"none",margin:"10px"},className:"btn btn-link",children:(0,w.jsx)("i",{className:"bi bi-caret-up-square-fill scroll"})})},aM=function(){return window.addEventListener("scroll",(function(){for(var e=document.querySelectorAll(".reveal"),t=0;t<e.length;t++){var n=window.innerHeight;e[t].getBoundingClientRect().top<n-150?e[t].classList.add("active"):e[t].classList.remove("active")}})),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{children:(0,w.jsx)(rM,{})}),(0,w.jsxs)("div",{className:"mt-5 p-5 grey article-page reveal",children:[(0,w.jsx)("h1",{className:"text-center",children:"Last Articles"}),(0,w.jsx)(Sa,{max:"8",searchbarOff:!0})]}),(0,w.jsx)("div",{className:"reveal",children:(0,w.jsx)(Mr,{})}),(0,w.jsx)("div",{className:"grey reveal",children:(0,w.jsx)(nM,{})}),(0,w.jsx)(iM,{})]})},oM=function(){return(0,w.jsx)("div",{children:(0,w.jsx)(nM,{})})},sM=function(){var e=ir();return(0,w.jsxs)(ei,{variant:"danger",children:[(0,w.jsx)("p",{children:"Page not found !"}),(0,w.jsx)(wi,{variant:"outline-primary",onClick:function(){return e(-1)},children:"Retour"})]})},uM=1,cM={Home:{path:"/",component:(0,w.jsx)(Ra,{}),groups:[1,2],order:0,children:{index:{path:"index",component:(0,w.jsx)(aM,{}),groups:[1,2]},About:{path:"about",component:(0,w.jsx)(Fr,{}),groups:[1,2],order:1},Articles:{path:"articles",component:(0,w.jsx)(Ca,{}),groups:[1,2],order:2,children:{Article:{path:":slug",component:(0,w.jsx)(Gr,{}),groups:[],order:-1}}},Contact:{path:"contact",component:(0,w.jsx)(oM,{}),groups:[1,2],order:3},Error404:{path:"*",component:(0,w.jsx)(sM,{}),groups:[],order:-1}}}},lM=function e(t){return Object.entries(t).map((function(t,n){var r=Me(t,2),i=(r[0],r[1]),a=i.path,o=i.component;return"children"in i?(0,w.jsx)(Jn,{path:a,element:o,children:e(i.children)},n):"index"===a?(0,w.jsx)(Jn,{index:!0,element:o},n):(0,w.jsx)(Jn,{path:a,element:o},n)}))},fM=function(e){var t=e.children;return(0,w.jsxs)(Ir,{children:[t,(0,w.jsx)(er,{children:lM(cM)})]})},hM=function(e){return function(t){return t[1].groups.find((function(t){return t===e}))}},dM=function(e){return e[0].toLowerCase()===filter.toLowerCase()},pM=function e(t,n){return Object.entries(t).filter(n).map((function(t,r){var i=Me(t,2),a=i[0],o=i[1],s=o.path,u=[];if("children"in o){o.path;var c=o.children;u=e(c,n)}if("index"!==s)return[(0,w.jsx)(Sr,{className:"nav-link col","aria-current":"page",to:s,children:a},a+" "+r)].concat(qe(u))}))},vM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=hM(e);return"string"===typeof e&&(n=dM),(0,w.jsx)(t.Fragment,{children:pM(cM,n)})},yM=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.entries(n).flatMap((function(n){var i=Me(n,2),a=i[0],o=i[1],s=o.path,u=a.toLowerCase();if(t!==u)return"children"in o&&Object.keys(null===o||void 0===o?void 0:o.children).length?e(t,o.children,s):null;var c=null!==r&&"/"!==r.substr(r.length-1)?"/":"";return u===t&&[r,s].join(c)})).find((function(e){return e}))},mM=function(e){return yM(e,cM)},gM=function(){return(0,w.jsx)("header",{className:"sticky-top",children:(0,w.jsx)(rn,{collapseOnSelect:!0,expand:"lg",bg:"primary",variant:"dark",className:"navbar-custom",children:(0,w.jsxs)(sn,{children:[(0,w.jsx)(rn.Brand,{href:"/",children:"React Blog"}),(0,w.jsx)(rn.Toggle,{"aria-controls":"responsive-navbar-nav"}),(0,w.jsx)(rn.Collapse,{id:"responsive-navbar-nav",children:(0,w.jsx)(Fn,{className:"ms-auto",children:vM(uM)})})]})})})};function kM(){return(0,w.jsx)(t.Fragment,{children:(0,w.jsx)(fM,{})})}r.render((0,w.jsx)(kM,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.70658c74.js.map